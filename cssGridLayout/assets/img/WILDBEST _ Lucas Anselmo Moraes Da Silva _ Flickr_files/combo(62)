YUI.add("hermes-lang-upload-blocking",(function(e,t){e.Intl.add("hermes/upload-blocking","en-US",{UPLOADS_LOCKED_SOON:[{type:0,value:"Your uploads will be locked soon."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD:[{type:0,value:"Starting January 8th, free accounts on Flickr with "},{type:1,value:"limitCount"},{type:0,value:" photos or more will no longer be able to upload new photos."}],LEARN_MORE_ABOUT_CHANGES_HERE:[{type:0,value:"Learn more about these changes here."}],UPGRADE_TO_GET_UNLIMITED:[{type:0,value:"For unlimited uploads, upgrade to Pro at "},{type:1,value:"percentOff"},{type:0,value:"% off using code "},{type:1,value:"couponCode"},{type:0,value:"."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_2:[{type:0,value:"Starting January 8, 2019 free accounts on Flickr with "},{type:1,value:"limitCount"},{type:0,value:" photos or more will no longer be able to upload new photos. Starting February 5, 2019 some items over the limit will be at risk of deletion."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_BY_1_8_2019:[{type:0,value:"Starting January 8th, free accounts on Flickr with "},{type:1,value:"limitCount"},{type:0,value:" or more photos and videos will no longer be able to upload new content."}],UPGRADE_TO_GET_UNLIMITED_BY_1_8_2019:[{type:0,value:"For unlimited uploads, upgrade to Pro at "},{type:1,value:"percentOff"},{type:0,value:"% off using code "},{type:1,value:"couponCode"},{type:0,value:". (Discount valid until January 8, 2019)"}],OVER_UPLOAD_LIMIT_HEAD:[{type:0,value:"Your photos are at risk of deletion soon."}],OVER_UPLOAD_LIMIT_COPY:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:'</a> photos or videos. Your uploads are now locked, and starting February 5th, the oldest items over the limit for free accounts will be at risk of deletion. To unlock uploads and protect your photos and videos, you’ll need to remove items until you’re under the account limit or <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">upgrade to Flickr Pro</a> for unlimited storage.'}],AT_UPLOAD_LIMIT_HEAD:[{type:0,value:"Your uploads are now locked."}],AT_UPLOAD_LIMIT_COPY:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:'</a> photos or videos. Starting February 5th, the oldest items over your free account limit will be at risk of deletion. However, any items licensed Creative Commons (or other free license types) before November 1, 2018 will not be deleted. To upload new photos or videos, you’ll need to remove items until you’re under the account limit or you can <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">upgrade to Flickr Pro</a> for unlimited uploads.'}],UPLOADS_LOCKED_SOON_HEAD:[{type:0,value:"Your uploads will be locked soon."}],UPLOADS_LOCKED_SOON_COPY:[{type:0,value:'You are nearing your <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">'},{type:1,value:"limitCount"},{type:0,value:" item Free Flickr account limit</a>. To upload more than "},{type:1,value:"limitCount"},{type:0,value:' photos or videos, you’ll need to <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">upgrade to Flickr Pro</a> for unlimited uploads.'}],YOU_CAN_UPLOAD_COUNT_MORE:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"You can upload "},{type:1,value:"countString"},{type:0,value:" more photo or video."}]},other:{value:[{type:0,value:"You can upload "},{type:1,value:"countString"},{type:0,value:" more photos and videos."}]}},offset:0,pluralType:"cardinal"}],MORE_THAN_LIMIT_ITEMS_TO_UPLOAD:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"Looks like there is more than "},{type:1,value:"countString"},{type:0,value:" item to upload. We’ll upload the first "},{type:1,value:"countString"},{type:0,value:" from your batch."}]},other:{value:[{type:0,value:"Looks like there are more than "},{type:1,value:"countString"},{type:0,value:" items to upload. We’ll upload the first "},{type:1,value:"countString"},{type:0,value:" from your batch."}]}},offset:0,pluralType:"cardinal"}],NEVERMIND:[{type:0,value:"Nevermind"}],OK_GO_AHEAD:[{type:0,value:"Ok go ahead"}],UPLOAD_QUEUE_FULL:[{type:0,value:"Your upload queue is full!"}],GET_PRO_FOR_UNLIMITED:[{type:0,value:"Get Pro for unlimited uploads"}],NOT_NOW:[{type:0,value:"Not now"}],UPLOAD_YOUVE_REACHED_LIMIT_GET_PRO:[{type:0,value:"You’ve reached the 1000 item upload limit. Get Pro for unlimited uploads."}],YOUVE_REACHED_UPLOAD_LIMIT:[{type:0,value:"You’ve reached the "},{type:1,value:"limitCount"},{type:0,value:" item upload limit."}],AT_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:" photos or videos</a>. To upload more than "},{type:1,value:"limitCount"},{type:0,value:" items, you’ll need to upgrade to Flickr Pro for unlimited storage."}],OVER_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Your Free Flickr account is <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limited to '},{type:1,value:"limitCount"},{type:0,value:" photos or videos</a>. Starting February 5th, the oldest items over the limit will be at risk of deletion. Upgrade to Flickr Pro for unlimited storage."}],PHOTO_EDITOR_REACHED_UPLOAD_LIMIT:[{type:0,value:"You’ve reached your "},{type:1,value:"limitCount"},{type:0,value:' item limit. To save a new copy, <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'" target="_blank">upgrade to Flickr Pro</a>.'}],OVER_UPLOAD_LIMIT_EXTEND_HEAD:[{type:0,value:"Update: Free Flickr account limit deadline extension."}],OVER_UPLOAD_LIMIT_EXTEND_COPY:[{type:0,value:"We’re extending the deadline for upgrading to Flickr Pro for unlimited storage or removing your photos/videos to meet the new "},{type:1,value:"limit"},{type:0,value:" item limit. The new deadline is March "},{type:1,value:"dateNumber"},{type:0,value:", 2019."}],ALL_YOUR_PHOTOS_MATTER:[{type:0,value:'<span class="all-text">ALL</span> your photos matter.'}],UPLOAD_LIMIT_EXTEND_MODAL_1:[{type:0,value:"We know the recent update limiting photo and video uploads to "},{type:1,value:"limit"},{type:0,value:" for free Flickr accounts was a big one. We’ve heard loud and clear from our Flickr photographers that you need more time to make sure your photos are safe."}],UPLOAD_LIMIT_EXTEND_MODAL_2:[{type:0,value:"Whether you’re upgrading to Flickr Pro for unlimited photo storage or downloading photos to meet the new limit, we’re extending the deadline to March "},{type:1,value:"dateNumber"},{type:0,value:", 2019."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views, "},{type:1,value:"faves"},{type:0,value:" faves, and "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES:[{type:0,value:"This includes some of "},{type:1,value:"faves"},{type:0,value:" faves attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views and "},{type:1,value:"faves"},{type:0,value:" faves attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"views"},{type:0,value:" views and "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES_TAGS:[{type:0,value:"This includes some of the "},{type:1,value:"faves"},{type:0,value:" faves and "},{type:1,value:"tags"},{type:0,value:" tags attached to those photos."}],RIGHT_NOW_PHOTOS_AT_RISK:[{type:0,value:"Right now "},{type:1,value:"count"},{type:0,value:" of your photos are at risk of deletion."}],TAKE_MOMENT_TO_PROTECT_PHOTOS:[{type:0,value:"Please take a moment to protect the photos in your account."}],PROTECT_THESE_PHOTOS:[{type:0,value:"Protect these photos."}],SAVE_YOUR_PHOTOS:[{type:0,value:"Save your photos"}],CONTINUE_WITHOUT_SECURING_PHOTOS:[{type:0,value:"Continue without securing "},{type:1,value:"count"},{type:0,value:" photos."}],CONTINUE_WITHOUT_SECURING_PHOTOS_B:[{type:0,value:"Continue without securing "},{type:1,value:"count"},{type:0,value:" photos"}],MARK_PHOTOS_FOR_DELETION:[{type:0,value:"No, mark "},{type:1,value:"count"},{type:0,value:" for deletion."}],MARK_PHOTOS_FOR_DELETION_B:[{type:0,value:"No, mark "},{type:1,value:"count"},{type:0,value:" for deletion"}],DONT_REMIND_AGAIN:[{type:0,value:"Don’t remind me again."}],DONT_REMIND_AGAIN_B:[{type:0,value:"Don’t remind me again"}],CHOOSE_ABOVE_TO_CONTINUE:[{type:0,value:"Choose an option above to continue to your photos."}],DID_YOU_KNOW_FLICKR_PRO:[{type:0,value:"Did you know Flickr Pro is more than just unlimited storage?"}],UPGRADE_YOU_ALSO_GET:[{type:0,value:"You also get ad-free browsing, priority support from our Support Heroes, and you will save money with exclusive discounts on photo books, software, and gear from our industry partners."}],DONT_NEED_TO_BE_PROFESSIONAL:[{type:0,value:"You don’t need to be a professional to be a Flickr Pro."}],FLICKR_PROS_LOVE_PHOTOGRAPHY:[{type:0,value:"Flickr Pros love photography, plain and simple. By joining Flickr Pro, you’ll join a community of people who enjoy talking, sharing, and discovering photos as much as you do."}],JOIN_FLICKR_PRO:[{type:0,value:"Join Flickr Pro"}],OVER_UPLOAD_LIMIT_HEAD_FINAL:[{type:0,value:"Your photos are at risk of deletion."}],OVER_UPLOAD_LIMIT_COPY_FINAL:[{type:0,value:"Your Free Flickr account is limited to "},{type:1,value:"limitCount"},{type:0,value:" photos or videos. The oldest items over the limit are at risk of deletion. Upgrade to Flickr Pro for unlimited storage."}],LIKE_TO_KEEP_YOUR_PHOTOS:[{type:0,value:'You know we’d like to keep all your photos here forever, for free. (Including this one, the first photo you uploaded to Flickr.) You probably also know we have <a href="'},{type:1,value:"rulesUrl"},{type:0,value:'">new rules for free accounts</a> and may need to delete photos exceeding our new limits. You have '},{type:1,value:"photoCountString"},{type:0,value:" we can no longer keep for free. It’s time to let us know what you’d like to do."}],DONT_SAVE_MY_PHOTOS:[{type:0,value:"Don’t save my photos"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-fluid-modal-nav-bar",(function(l,n){var e=l.Template.Handlebars.revive({1:function(l,n,e,a,t){var o,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=r(e,"unless").call(null!=n?n:l.nullContext||{},null!=n?r(n,"disabled"):n,{name:"unless",hash:{},fn:l.program(2,t,0),inverse:l.noop,data:t,loc:{start:{line:5,column:3},end:{line:7,column:14}}}))?o:""},2:function(l,n,e,a,t){var o,r,u=null!=n?n:l.nullContext||{},i=l.hooks.helperMissing,c="function",s=l.escapeExpression,m=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t<li data-id="'+s(typeof(r=null!=(r=m(e,"id")||(null!=n?m(n,"id"):n))?r:i)===c?r.call(u,{name:"id",hash:{},data:t,loc:{start:{line:6,column:16},end:{line:6,column:22}}}):r)+'" data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=n?m(n,"value"):n))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:36},end:{line:6,column:45}}}):r)+'" '+(null!=(o=m(e,"if").call(u,null!=n?m(n,"searchPillConfig"):n,{name:"if",hash:{},fn:l.program(3,t,0),inverse:l.noop,data:t,loc:{start:{line:6,column:47},end:{line:6,column:113}}}))?o:"")+' class="link '+(null!=(o=m(e,"if").call(u,null!=n?m(n,"selected"):n,{name:"if",hash:{},fn:l.program(5,t,0),inverse:l.noop,data:t,loc:{start:{line:6,column:126},end:{line:6,column:157}}}))?o:"")+" "+(null!=(o=m(e,"if").call(u,null!=n?m(n,"hiddenByDefault"):n,{name:"if",hash:{},fn:l.program(7,t,0),inverse:l.noop,data:t,loc:{start:{line:6,column:158},end:{line:6,column:194}}}))?o:"")+'" tabindex="0"><a data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=n?m(n,"value"):n))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:224},end:{line:6,column:233}}}):r)+'">'+s(typeof(r=null!=(r=m(e,"name")||(null!=n?m(n,"name"):n))?r:i)===c?r.call(u,{name:"name",hash:{},data:t,loc:{start:{line:6,column:235},end:{line:6,column:243}}}):r)+"</a></li>\n"},3:function(l,n,e,a,t){var o,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'data-context="'+l.escapeExpression("function"==typeof(o=null!=(o=r(e,"searchPillConfig")||(null!=n?r(n,"searchPillConfig"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"searchPillConfig",hash:{},data:t,loc:{start:{line:6,column:85},end:{line:6,column:105}}}):o)+'"'},5:function(l,n,e,a,t){return"selected"},7:function(l,n,e,a,t){return"hidden"},9:function(l,n,e,a,t){return'\t\t\t<form action="/search" method="get" role="search">\n\t\t\t\t<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n\t\t\t\t<ul class="search-pillbox"></ul>\n\t\t\t\t<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n\t\t\t</form>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,e,a,t){var o,r=null!=n?n:l.nullContext||{},u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="fluid-modal-nav-bar">\n\t<div class="fluid-modal-nav-content">\n\t\t<ul class="links">\n'+(null!=(o=u(e,"each").call(r,null!=n?u(n,"links"):n,{name:"each",hash:{},fn:l.program(1,t,0),inverse:l.noop,data:t,loc:{start:{line:4,column:2},end:{line:8,column:11}}}))?o:"")+"\t\t</ul>\n"+(null!=(o=u(e,"if").call(r,null!=n?u(n,"enableSearch"):n,{name:"if",hash:{},fn:l.program(9,t,0),inverse:l.noop,data:t,loc:{start:{line:10,column:2},end:{line:16,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),a={};l.Array.each([],(function(n){var e=l.Template.get("hermes/"+n);e&&(a[n]=e)})),l.Template.register("hermes/fluid-modal-nav-bar",(function(n,t){return(t=t||{}).partials=t.partials?l.merge(a,t.partials):a,e(n,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-modal-nav-bar-view",(function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t,i,n=this.get("breakpointConfig")||[],a=this.appContext.viewportData.getWidth();for(i=n.sort((function(e,t){return e.maxWidth-t.maxWidth})),t=0;t<i.length;t++)if(a<i[t].maxWidth){this.mobileConfig=i[t],this.set("links",this.mobileConfig.links),this.set("enableSearch",this.mobileConfig.enableSearch);break}return this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"}),commons:this.intlMessage({intlName:"commons.THE_COMMONS"})}),this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this,i=e.one(".search-field");if(this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach((function(i){i.selected&&t.set("currentSelection",e.one('.link[data-id="'+i.id+'"]'))})),this.defaultContext=this.get("links")[0].value,this.get("currentSelection").hasAttribute("data-context")){var n=JSON.parse(this.get("currentSelection").getAttribute("data-context"));this.addPill(n.pillName,this.get("contextToString")[n.scope]),this.registerEventHandler(i.on("key",this.handleSearchFieldKeydown.bind(this),"down:8"))}return this},deselectAll:function(){this.get("container").one(t.css.nav).one(t.css.navContent).one(t.css.links).all(t.css.link).removeClass("selected")},handleClick:function(t){var i,n,a=t.target,s=a.get("parentNode"),l=this.get("container"),r={},o=this.appContext.getViewer().nsid;if("a"===a.getDOMNode().tagName.toLowerCase())t.halt(),this.updateSelectionAndSearchField(s),this.fire("subviewViewEvent","navigation",t);else if(a.hasClass("link"))t.halt(),this.updateSelectionAndSearchField(a),this.fire("subviewViewEvent","navigation",t);else if(a.hasClass("search-pill-remover"))t.halt(),this.removeContext();else if(i=l.one(".search-field"),this.get("enableSearch")&&i&&(n=l.one(".search-field").getDOMNode(),"submit"===a.getDOMNode().type)){t.halt(),r.apiParams={},r.apiParams[e.AttributeHelpers.coerceString(n.name)]=n.value,r.id=e.SearchHelper.generateQueryString(r.apiParams)||e.guid(),r.viewerNsid=o;var c=this.get("currentSelection");c.hasAttribute("data-context")?r.contextSearch=c.getAttribute("data-id"):(this.deselectAll(),this.set("currentSelection",{type:"search",modelParams:r})),this.fire("subviewViewEvent","search",r)}},onParentViewEvent:function(t,i){var n=this.get("currentSelection");"backToList"===i[0]&&(n instanceof e.Node?this.get("currentSelection").getDOMNode().click():"search"===n.type&&this.fire("subviewViewEvent","search",n.modelParams))},addPill:function(t,i){var n,a={name:t};i&&(a.combo=!0,a.secondName=i),n=e.Node.create(this.templates("search-pill")(a)),this.get("container").one(".search-pillbox").appendChild(n)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},removeContext:function(){var t=this.get("container"),i=t.one(".search-field").getDOMNode(),n={},a=this.appContext.getViewer().nsid,s={},l=t.one('.link[data-id="'+this.defaultContext+'"]');this.removePills(),this.deselectAll(),l.addClass("selected"),this.set("currentSelection",l),s.target=l,i.value.length>0?(n.apiParams={},n.apiParams[e.AttributeHelpers.coerceString(i.name)]=i.value,n.id=e.SearchHelper.generateQueryString(n.apiParams)||e.guid(),n.viewerNsid=a,this.fire("subviewViewEvent","search",n)):this.fire("subviewViewEvent","navigation",s)},handleSearchFieldKeydown:function(t){var i=t.target;0===e.fluid.getTextFieldCursorPosition(i)&&""===e.fluid.getTextFieldSelection()&&this.removeContext()},updateSelectionAndSearchField:function(e){var t,i=this.get("container"),n=i.one(".search-field"),a=i.one(".search-pill");this.deselectAll(),e.addClass("selected"),this.set("currentSelection",e),this.get("currentSelection").hasAttribute("data-context")&&(t=JSON.parse(this.get("currentSelection").getAttribute("data-context"))),n&&(n.getDOMNode().value=""),t?a||this.addPill(t.pillName,this.get("contextToString")[t.scope]):a&&this.removePills()}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},breakpointConfig:{value:null}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","hermes-template-search-pill","attribute-helpers","search-helper"],langBundles:["common","wallart","groups","search","commons"],optional:["person-models","photo-models"]});YUI.add("hermes-template-slim-footer",(function(e,a){var n=e.Template.Handlebars.revive({1:function(e,a,n,l,t){var s=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'\t\t<a  class="trustarc-cookie-pref-link" href="/help/cookies">'+e.escapeExpression((s(n,"intlMessage")||a&&s(a,"intlMessage")||e.hooks.helperMissing).call(null!=a?a:e.nullContext||{},{name:"intlMessage",hash:{intlName:"policy-terms.COOKIES"},data:t,loc:{start:{line:12,column:61},end:{line:12,column:108}}}))+"</a>\n"},compiler:[8,">= 4.3.0"],main:function(e,a,n,l,t){var s,o=null!=a?a:e.nullContext||{},i=e.hooks.helperMissing,r=e.escapeExpression,c=e.lambda,m=e.lookupProperty||function(e,a){if(Object.prototype.hasOwnProperty.call(e,a))return e[a]};return'<div class="slim-footer">\n\t<a href="/about" data-track="footer-about">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.ABOUT"},data:t,loc:{start:{line:2,column:44},end:{line:2,column:83}}}))+'</a>\n\t<a href="/jobs" data-track="footer-jobs">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.JOBS"},data:t,loc:{start:{line:3,column:42},end:{line:3,column:80}}}))+'</a>\n\t<a target="_blank" href="//blog.flickr.net/en" data-track="footer-blog">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.BLOG"},data:t,loc:{start:{line:4,column:73},end:{line:4,column:111}}}))+'</a>\n\t<a href="/services/developer" data-track="footer-developers">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.DEVELOPERS"},data:t,loc:{start:{line:5,column:62},end:{line:5,column:106}}}))+'</a>\n\t<a href="/help/guidelines" data-track="footer-guidelines">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.GUIDELINES"},data:t,loc:{start:{line:6,column:59},end:{line:6,column:103}}}))+'</a>\n\t<a target="_blank" href="//flickrhelp.com" data-track="footer-help">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP"},data:t,loc:{start:{line:7,column:69},end:{line:7,column:107}}}))+'</a>\n\t<a href="/help/forum" data-track="footer-forum">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.HELP_FORUM"},data:t,loc:{start:{line:8,column:49},end:{line:8,column:93}}}))+'</a>\n\t<a href="/help/privacy" data-track="footer-privacy">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.PRIVACY"},data:t,loc:{start:{line:9,column:53},end:{line:9,column:94}}}))+'</a>\n\t<a href="/help/terms" data-track="footer-terms">'+r((m(n,"intlMessage")||a&&m(a,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"common.TERMS"},data:t,loc:{start:{line:10,column:49},end:{line:10,column:88}}}))+"</a>\n"+(null!=(s=(m(n,"isFlipped")||a&&m(a,"isFlipped")||i).call(o,"enable-cookie-consent-execution-hermes",{name:"isFlipped",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:11,column:1},end:{line:13,column:15}}}))?s:"")+'\t<div class="foot-li lang-switcher">\n\t\t<a href="/change_language.gne?lang='+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"code"):s,a))+"&csrf="+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"csrf"):s,a))+'" data-track="footer-language">'+r(c(null!=(s=null!=a?m(a,"selectedLang"):a)?m(s,"name"):s,a))+'</a>\n\t\t<div class="arrow">\n\t\t\t<svg class="icon icon-caret-down"><use xlink:href="#icon-caret-down"></use></svg>\n\t\t</div>\n\t </div>\n</div>\n\t\n'},useData:!0}),l={};e.Array.each([],(function(a){var n=e.Template.get("hermes/"+a);n&&(l[a]=n)})),e.Template.register("hermes/slim-footer",(function(a,t){return(t=t||{}).partials=t.partials?e.merge(l,t.partials):l,n(a,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("footer-helper",(function(e,r){require("hermes-core/flog")(r);var n=["en-US","zh-HK","de-DE","es-US","fr-FR","ko-KR","it-IT","pt-BR","vn-VN","id-ID"],o={"en-US":"English","de-DE":"Deutsch","es-US":"Español","fr-FR":"Français","ko-KR":"한글","it-IT":"Italiano","pt-BR":"Português","vn-VN":"Tiếng Việt","id-ID":"Bahasa Indonesia","zh-HK":"繁體中文"};e.FooterHelper=function(r,a){var t,s,i,u,c,d=[],l=r.lang;for(u=r.auth&&r.auth.csrf?r.auth.csrf:"","vi-vn"===l.toLowerCase()&&(l="vn-VN"),c={code:l,name:o[l],csrf:u},s=0,i=n.length;s<i;s++)n[s]!==l&&"string"==typeof n[s]&&d.push({code:n[s].toLowerCase(),name:o[n[s]],csrf:u});t=d.map((function(e){return{href:"/change_language.gne?lang="+e.code+"&csrf="+e.csrf,text:e.name}}));var f={createDropAround:function(n,o){var a,s;(s=n.one("a")).addClass("dimmed"),(a=new e.Views.FluidDroparound({appContext:r,showDropArrow:!0,observePageResize:!0,dismissOnOverlayClick:!0,anchorElement:n.one(".arrow"),classList:"lang-droparound",menuItems:t})).show(),o.registerEventHandler(a.on("closeDroparound",(function(e){s.removeClass("dimmed")})))},getTemplateParams:function(){return{selectedLang:c,helpLocaleKey:c.code.replace("-","_")||"en_US",menuLangs:d}}};return e.augment(f,e.EventTarget),f}}),"@VERSION@",{requires:["fluid-droparound-view","event-custom"],optionalRequires:["hermes-core"]});YUI.add("slim-footer-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.footerHelper=new e.FooterHelper(this.appContext,{}),this},buildContainer:function(){var t;return this.get("viewer")&&e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))}),t=this.footerHelper.getTemplateParams(),YUI.Env.isServer?t.pageUrl=this.appContext.request.url:t.pageUrl=window.location.pathname,t.requiresCookieConsent=!0,this.appContext.flipper.isFlipped("enable-geoblock-cookie-consent")&&(t.requiresCookieConsent=this.appContext.requiresCookieConsent),this.setContainerWithTemplate("slim-footer",t),this},activate:function(){var e,t=this,r=this.get("container");return this.registerEventHandler(r.delegate("click",(function(r){e=r.target.ancestor(".lang-switcher",!0),r.preventDefault(),t.footerHelper.createDropAround(e,t)}),".lang-switcher")),this}})}),"@VERSION@",{requires:["flickr-view","hermes-template-slim-footer","url-helper","footer-helper"],langBundles:["common","policy-terms"]});YUI.add("hermes-lang-policy-terms",(function(e,l){e.Intl.add("hermes/policy-terms","en-US",{DOWNLOAD_TERMS_OF_SERVICE:[{type:0,value:"Download Terms of Service"}],DOWNLOAD_PRIVACY_POLICY:[{type:0,value:"Download Privacy Policy"}],DOWNLOAD_API_TERMS:[{type:0,value:"Download API Terms of Service"}],DOWNLOAD_COMMUNITY_GUIDELINES:[{type:0,value:"Download Community Guidelines"}],DOWNLOAD_COOKIE_POLICY:[{type:0,value:"Download Cookie Policy"}],DOWNLOAD_DATA_PROCESSING_POLICY:[{type:0,value:"Download Data Processing Policy"}],POLICIES_AND_GUIDELINES:[{type:0,value:"Policies & Guidelines"}],TERMS:[{type:0,value:"Terms"}],PRIVACY:[{type:0,value:"Privacy"}],API:[{type:0,value:"API"}],COMMUNITY:[{type:0,value:"Community"}],COOKIES:[{type:0,value:"Cookies"}],DATA_PROCESSING:[{type:0,value:"Data Processing"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("global-nav-view",(function(e,t){var i=require("hermes-core/flog")(t),n=new e.SubscriptionsHelper,o=[{type:"migrateSubscription",priority:0,placement:"header"},{type:"pastDue",priority:1,placement:"header"},{type:"loginMigration",priority:2,placement:"header"},{type:"exploredUpsell",priority:3,placement:"header"},{type:"churnedProBanner",priority:3,placement:"header"},{type:"lightShadowExplore",priority:4,placement:"header"},{type:"cookieConsent",priority:0,placement:"footer"},{type:"cookie",priority:0,placement:"footer"},{type:"defaultSafetyMigration",priority:0,placement:"modal"},{type:"surveyModal",priority:3,placement:"modal"},{type:"uploadLimit",priority:1,placement:"toast"}];e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var i,n;if(void 0===t.enableBrowserUpgradeBanner&&(t.enableBrowserUpgradeBanner=!0),this.set("showBrowserUpgradeBanner",!1),YUI.Env.isServer&&t.enableBrowserUpgradeBanner){var o=this.appContext.request.headers["user-agent"],r=e.BrowserSupport.isUnsupportedBrowser(o),a=e.BrowserSupport.isBot(o),s=e.BrowserSupport.isSharingBot(o);!r||a||s||this.set("showBrowserUpgradeBanner",!0)}if(!YUI.Env.isServer){var l=e.StorageHelper.getItem("hasDismissedBrowserUpgradeBanner",!0);l&&"true"===l&&this.set("showBrowserUpgradeBanner",!1)}return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="global-nav-content"></div>'),this.appStateParams=t,this.themeClass=t.theme||"default-theme",i=this.appContext.getLocation(),n=t.modelParams&&t.modelParams.apiParams?t.modelParams.apiParams:i.href,this.searchUrl=new e.SearchUrl(n,this.appContext,t.searchType),this.isSOHP=t.isSOHP,this.isProPage=t.isProPage,this.disableMobileNav=t.disableMobileNav,this.hideBanner=t.isSearchResults,this.isRefencingAnnouncementPage=t.isRefencingAnnouncementPage,this.uploadLimitDismissHours=48,this.isDesktopWidthBreakpoint=1080,this.photoPrintsHelper=new e.PhotoPrintsHelper(this.appContext),this.mathHelper=new e.MathHelper,this.hasPendingGift=!1,this.hasExpiringGift=!1,this.convertDurationToString={week:this.intlMessage({intlName:"gift-pro.1_WEEK"}),month:this.intlMessage({intlName:"gift-pro.1_MONTH"}),year:this.intlMessage({intlName:"gift-pro.1_YEAR"})},this.STATUS_PENDING=1,this.STATUS_MUTED=2,this.STATUS_ACCEPTED=3,this.STATUS_REJECTED=4,this.STATUS_EXPIRED=5,this},subviewConfig:{"search-autosuggest-field-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:this.isSOHP},"account-menu-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"notifications-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.getViewer().signedIn}},"browser-upgrade-banner-view":{requiredToShowOnServer:!0,requiredToShowOnClient:!1,dealbreaker:!1,disabled:function(){return!this.get("showBrowserUpgradeBanner")}},"person-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content, #stacking-overlay-container",excludeSelectors:[".c-account-menu"]},"group-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content, #stacking-overlay-container",excludeSelectors:[".c-account-menu"]},"partner-account-banner-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1},"featured-toast-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"flickr-chat-center-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-flickr-chat")||!this.appContext.getViewer().signedIn}},"slim-footer-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["navbar-footer-placement","mobile-nav-drawer-list"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-cookie-consent-execution-hermes")}}},loadState:function(){var t=this,i=this.appContext.getViewer(),n=[];return i.signedIn?(n.push(this.appContext.getModel("person-models",i.nsid).then((function(e){t.set("viewer",e),t.elementStates=t.setElementStates(t.appStateParams)}))),n.push(this.appContext.getModel("person-profile-models",i.nsid).then((function(e){t.profileModel=e})))):this.elementStates=this.setElementStates(this.appStateParams),e.Promise.all(n)},buildContainer:function(){var t,i={},o=this.appContext.getViewer().signedIn;return this.get("viewer")&&(i=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),t={theme:this.themeClass,disableMobileNav:this.disableMobileNav,"show-browser-upgrade-banner":this.get("showBrowserUpgradeBanner"),showNotificationsMenu:!1,viewer:i,isSignedIn:o,elements:this.elementStates,isRefencingAnnouncementPage:this.isRefencingAnnouncementPage,upgradeProLink:n.getProLandingPageUrl(n.UTM_GLOBAL_NAV,{utm_content:this.intlMessage({intlName:"common.GET_PRO"})})},o&&(t["notifications-menu-view"]=this.subviews["notifications-menu-view"].get("container"),t.showNotificationsMenu=!0),this.photoPrintsHelper.isPrintFeatureEnabled()&&(t.printCartUrl=this.photoPrintsHelper.getCartUrl()),this.setContainerWithTemplate("global-nav",t),this},activate:function(){var n=this,r=(this.appContext.flapp.get("activeView").name,this.get("container")),a=this.appContext.getViewer(),s=r.one(".gn-upload .gn-title");return this.contentContainer=r.one(".global-nav"),r.one(".mobile-nav-toggle")&&(this.navDrawer=r.one(".mobile-nav-drawer"),this.navDrawerOverlay=r.one(".mobile-nav-drawer-overlay"),this.registerEventHandler(r.one(".mobile-nav-toggle").on("click",(function(e){n.navDrawerShown?n.hideMobileNavDrawer():n.showMobileNavDrawer()}))),this.registerEventHandler(this.navDrawer.delegate("click",this.handleDrawerItemClick.bind(this),".mobile-nav-menu-item, .slim-footer > :not(.lang-switcher)"))),r.one(".mobile-search-button")?(this.registerEventHandler(r.one(".mobile-search-button").on("click",function(e){n.contentContainer.addClass("search-open"),n.fire("parentViewEvent","focus-search-field"),r.one(".flickr-logo-container").addClass("hidden")}.bind(this))),this.registerEventHandler(e.on("add-context-to-search-field",(function(e,t=!0){n.contentContainer.addClass("search-open"),t&&n.fire("parentViewEvent","focus-search-field")}),this))):this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(t){var i=e.config.win.innerWidth<=this.isDesktopWidthBreakpoint,o=i?this.appContext.viewportData.getWidth():0,a=i?46:0;i||(n.contentContainer.removeClass("search-open"),r.one(".flickr-logo-container").removeClass("hidden")),n.fire("parentViewEvent","resize-search-field",o-a)}.bind(this))),r.one(".mobile-search-close-button")&&this.registerEventHandler(r.one(".mobile-search-close-button").on("click",function(e){n.contentContainer.removeClass("search-open"),r.one(".flickr-logo-container").removeClass("hidden"),n.fire("parentViewEvent","clear-search-field")}.bind(this))),a.signedIn||s&&this.registerEventHandler(s.on("click",this.signUpAndUpload.bind(this))),e.AnchorRepositioner.addOffset(t,r),this.registerEventHandler(r.delegate("keydown",this.toggleSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(r.delegate("keydown",this.enterSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(r.on("keydown",this.goToSubmenuHeading.bind(this),"ul.gn-submenu")),this.registerEventHandler(r.delegate("keydown",this.keyboardNavigation.bind(this),"ul.nav-menu")),this.registerEventHandler(r.delegate("mouseup",this.toggleAriaExpanded.bind(this),"a[aria-haspopup=true]")),this.toastSubview=this.subviews["featured-toast-view"],this.registerEventHandler(e.on("accountCard:overLimitLearnMoreClick",(function(){n.showOverLimitToast()}))),this.registerEventHandler(e.on("printsPage:choosePhotosClicked",(function(){n.handlePrintClick()}))),this.photoPrintsHelper.isPrintFeatureEnabled()&&(this.printsButton=r.one(".gn-create .prints-button"),this.mobilePrintsButton=r.one(".mobile-nav-drawer .prints-button"),this.cartLink=r.one(".gn-create .cart-link"),this.mobileCartLink=r.one(".mobile-nav-drawer .cart-link"),this.printsButton&&this.registerEventHandler(this.printsButton.on("click",this.handlePrintClick.bind(this))),this.mobilePrintsButton&&this.registerEventHandler(this.mobilePrintsButton.on("click",this.handlePrintClick.bind(this))),(this.cartLink||this.mobileCartLink)&&(this.photoPrintsHelper.fetchCartCount().then((function(e){var t=e?e.count:0,i=n.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:void 0!==t?t.toString():"0"});t>0&&(n.cartLink.removeClass("disabled"),n.mobileCartLink.removeClass("disabled")),n.cartLink.set("innerHTML",i),n.mobileCartLink.set("innerHTML",i)})).catch((function(e){var t=n.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:"0"});n.cartLink.set("innerHTML",t),n.mobileCartLink.set("innerHTML",t)})),this.prepareOrderConfirmationModal())),this.appContext.bannerManager.loadBanners(o).then((function(){var e=this.appContext.bannerManager.getBanners(["header","footer","modal"]);0===e.length&&(e=this.appContext.bannerManager.getBanners(["toast"])),e.forEach((function(e){return this.appContext.bannerManager.renderBannerView(e)}))})),this.registerEventHandler(this.appContext.bannerManager.on("renderBanner",(function(t){var i,o,a;if("header"===t.placement)return o=(i=t.bannerView).get("container"),(a=r.one(".nav-banner-container")).empty(),a.appendChild(o),i.on("subviewActivated",(function(){e.fire("globalNav:bannerSubviewActivated")})),n.registerEventHandler(i.on("dismissed",(function(){i.get("container").remove(),i.destroy(),e.fire("globalNav:bannerDismissed")}))),i.normalizedActivate();if("toast"===t.placement)return o=(i=t.bannerView).get("container"),i.activate().then((function(){var e=i.subview;n.toastSubview.setup(e.featuredToastConfig),n.toastSubview.on("primaryActionClicked",(function(t){e.handleToastPrimaryActionClick(t)})),n.toastSubview.on("secondaryActionClicked",(function(t){e.handleToastSecondaryActionClick(t)})),n.registerEventHandler(i.on("dismissed",(function(){i.get("container").remove(),n.toastSubview.dismiss()}))),n.toastSubview.show()}));if("modal"===t.placement){i=t.bannerView;var s=e.merge({appContext:n.appContext,noScroll:!0,maxHeight:!1,showHeader:!1,showFooter:!1,showCancelX:!1,dismissOnOverlayClick:!0,contentPadding:0,classList:"modal-restyle",width:560,subview:i},t.containerConfig),l=new e.Views.FluidModal(s);l.show(),n.registerEventHandler(l.on("close",(()=>{i.handleContainerClose()}))),n.registerEventHandler(i.on("dismissed",(()=>{l.close()})))}}))),a.signedIn&&"pro-checkout-route"!==this.appContext.routeConfig.module&&this.appContext.callAPI("flickr.payments.getUserGiftList",{status:"1,2"}).then(function(t){this.hasPendingGift=t.hasPendingGifts&&!this.appContext.getCookie(e.config.flickr.modals.dismiss_pending_gift_modal_name),this.pendingGifts=[],this.expiringGifts=[],(t.hasPendingGifts||t.hasMutedGifts)&&t.gifts.forEach(function(t){if(t.giftStatus===this.STATUS_PENDING&&this.pendingGifts.push(t),t.giftStatus===this.STATUS_MUTED){var i=e.moment.unix(t.giftGivenDate).add(1,"Y");e.moment(i).subtract(1,"w").isBefore(e.moment())&&this.expiringGifts.push(t)}}.bind(this)),this.expiringGifts.length>0&&!this.appContext.getCookie(e.config.flickr.modals.dismiss_expiring_gift_modal_name)&&this.showExpiringGiftModal(),this.hasPendingGift&&this.showPendingGiftModal()}.bind(this)).catch(function(e){i.log(e)}.bind(this)),this},showHelloProModal:function(){var t=e.URLHelper.generatePersonUrls(this.get("viewer")),i=new e.Views.FluidModal({actionButtonLabel:this.intlMessage({intlName:"checkout.OK_THANKS"}),htmlMessage:this.templates("pro-hello-pro")({photostreamURL:e.url(t.photostream)}),showBodyLines:!0,showHeader:!1,appContext:this.appContext,dismissOnOverlayClick:!1,dismissOnActionClick:!0,actionButtonDisabled:!1,actionButtonIsDangerous:!1,showCancelButton:!1,classList:"welcome-pro-modal",showCancelX:!1});i.on("activated",(function(t){var n=i.get("container").one(".freebrowsing"),o=i.get("container").one(".auto-uploadr"),r=i.get("container").one(".partners");n.on("click",(function(t){e.config.win.location=e.url("/")})),o.on("click",(function(t){e.config.win.location=e.url("/tools")})),r.on("click",(function(t){e.config.win.location=e.url("/account")}))})),i.on("actionClick",(function(){e.config.win.location.reload()})),i.show()},showExpiringGiftModal:function(){var e,t,i,n=!1,o={};(this.expiringGifts.length>1&&(n=!0),n)?(e=this.intlMessage({intlName:"gift-pro.GIFT_WAITING_TITLE_MULTIPLE"}),t=this.intlMessage({intlName:"gift-pro.EXPIRES_SOON_MULTIPLE",count:this.expiringGifts.length})):(i=(o=this.expiringGifts[0]).giverNsid||o.giverName?o.giverName:this.intlMessage({intlName:"gift-pro.ANONYMOUS"}),e=this.intlMessage({intlName:"gift-pro.GIFT_WAITING_TITLE"}),t=this.intlMessage({intlName:"gift-pro.EXPIRES_SOON",giverName:i,duration:this.convertDurationToString[o.giftType]}));var r={modalTitle:e,modalText:t,hasMultiple:n,gift:o,cookieName:"dismiss_expiring_gift_modal_name",giftList:this.expiringGifts,isExpiringGift:!0};this.setupGiftModal(r)},showPendingGiftModal:function(){var e,t,i=this.intlMessage({intlName:"gift-pro.YOUVE_GOT_GIFT"}),n=!1,o={};(this.pendingGifts.length>1&&(n=!0),n)?e=this.intlMessage({intlName:"gift-pro.LUCKY_RECIPIENT_MULTIPLE",count:this.pendingGifts.length}):(t=(o=this.pendingGifts[0]).giverNsid||o.giverName?o.giverName:this.intlMessage({intlName:"gift-pro.ANONYMOUS"}),e=this.intlMessage({intlName:"gift-pro.LUCKY_RECIPIENT_ACTIVATE_NOW",giverName:t,duration:this.convertDurationToString[o.giftType]}));var r={modalTitle:i,modalText:e,hasMultiple:n,gift:o,cookieName:"dismiss_pending_gift_modal_name",giftList:this.pendingGifts,isExpiringGift:!1};this.setupGiftModal(r)},setupGiftModal:function(t){var i,o=this,r=this.templates("pending-gift-modal")({modalTitle:t.modalTitle,modalText:t.modalText,hasMultiple:t.hasMultiple});return(i=new e.Views.FluidModal({appContext:o.appContext,noScroll:!0,dismissOnOverlayClick:!1,showActionButton:!1,actionButtonIsDangerous:!1,showCancelButton:!1,maxHeight:!1,htmlMessage:r,showBodyLines:!0,showHeader:!1,showCancelX:!1,buttonFlavorText:this.intlMessage({intlName:"gift-pro.DO_LATER"}),classList:"pending-gift-pro-modal"})).show(),i.on("activated",(function(){var r=i.get("container").one(".activate-button"),a=i.get("container").one(".decline-button"),s=i.get("container").one(".view-gifts-button"),l=i.get("container").one(".flavor-text"),c=i.get("container").one(".error-text");r&&r.on("click",(function(d){r.setAttribute("disabled"),a&&a.setAttribute("disabled"),s&&s.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var h=o.get("viewer").getValue("isPro"),p=[];p.push({gift_id:t.gift.giftId,status:o.STATUS_ACCEPTED}),o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(p)}).then((function(d){0===d.gift_update_fail_count?(i.close(),h?e.config.win.location.reload():o.showHelloProModal(),n.sendGiftPurchaseEvent({step:"gift_accepted",recipientNsid:o.get("viewer").id,gifterNsid:t.gift.giverNsid,duration:o.modalParams.gift.giftType,giftId:t.gift.giftId})):(c.addClass("error-occurred"),r.removeAttribute("disabled"),a&&a.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto"))})).catch((function(e){c.addClass("error-occurred"),r.removeAttribute("disabled"),a&&a.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto")}))})),a&&a.on("click",(function(d){a.setAttribute("disabled"),r&&r.setAttribute("disabled"),s&&s.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var h=[];h.push({gift_id:t.gift.giftId,status:o.STATUS_REJECTED}),o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(h)}).then((function(d){0===d.gift_update_fail_count?(i.close(),e.config.win.location.reload(),n.sendGiftPurchaseEvent({step:"gift_rejected",recipientNsid:o.get("viewer").id,gifterNsid:t.gift.giverNsid,duration:o.modalParams.gift.giftType,giftId:t.gift.giftId})):(c.addClass("error-occurred"),a.removeAttribute("disabled"),r&&r.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto"))})).catch((function(e){c.addClass("error-occurred"),a.removeAttribute("disabled"),r&&r.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto")}))})),s&&s.on("click",(function(n){s.setAttribute("disabled"),r&&r.setAttribute("disabled"),a&&a.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var c=t.isExpiringGift||!1,d=t.giftList.map((e=>({gift_id:e.gift_id,status:o.STATUS_MUTED})));o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(d)}).then((function(n){if("ok"!==n.stat||c){var r=new Date;r.setTime(r.getTime()+864e5),o.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals[t.cookieName],1,{expires:r,path:"/"})}i.close(),o.appContext.flapp.navigate("/account")}))})),l&&l.on("click",(function(n){i.close();var r=t.isExpiringGift||!1,a=t.giftList.map((e=>({gift_id:e.gift_id,status:o.STATUS_MUTED})));o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(a)}).then((function(i){if("ok"!==i.stat||r){var n=new Date;n.setTime(n.getTime()+864e5),o.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals[t.cookieName],1,{expires:n,path:"/"})}}))}))})),e.Promise.resolve()},clearKeyboardFocus:function(e){this.get("container").all(".has-keyboard-focus").removeClass("has-keyboard-focus"),this.get("container").all(".nav-menu a[aria-expanded=true]").setAttribute("aria-expanded","false")},toggleAriaExpanded:function(e){e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},enterSubmenu:function(e){if(40===e.keyCode){e.preventDefault();var t=e.target.next("ul");t&&t.hasClass("has-keyboard-focus")&&t.one(":first-child").one(":first-child").focus()}},toggleSubmenu:function(e){var t=e.keyCode;if(13===t||32===t){e.preventDefault();var i=e.target.next("ul");i&&(i.hasClass("has-keyboard-focus")?this.clearKeyboardFocus():(i.addClass("has-keyboard-focus"),e.target.setAttribute("aria-expanded","true")))}},goToSubmenuHeading:function(e,t){var i;(t||27===e.keyCode)&&(t||this.clearKeyboardFocus(),e.target.hasClass("gn-submenu")?i=e.target.previous("a"):e.target.ancestor("ul.gn-submenu")&&(i=e.target.ancestor("ul.gn-submenu").previous("a")),i&&i.focus())},keyboardNavigation:function(e){var t=e.keyCode,i=9===t&&e.shiftKey,n=9===t&&!e.shiftKey;e.target.hasClass("gn-title")?(i=(37===t||i)&&e.target.ancestor("li").previous("li"),n=(39===t||n)&&!!e.target.ancestor("li").next("li"),i?(this.clearKeyboardFocus(),this.focusOnPreviousItem(e)):!n||e.target.next("ul")&&e.target.next("ul").hasClass("has-keyboard-focus")||(this.clearKeyboardFocus(),this.focusOnNextItem(e))):38===t||i?this.focusOnPreviousItem(e):(40===t||n)&&this.focusOnNextItem(e)},focusOnPreviousItem:function(e){e.preventDefault();var t=e.target.ancestor("li").previous("li:not(.divider)");t?t.one(":first-child").focus():e.target.ancestor("ul.gn-submenu")&&this.goToSubmenuHeading(e,!0)},focusOnNextItem:function(e){e.preventDefault();var t=e.target.ancestor("li").next("li:not(.divider)");t&&t.one(":first-child").focus()},signUpAndUpload:function(t){var i,n=e.url("/upload/"),o=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_TITLE"});t.halt(),e.rapidTracker.beacon(this.name,"uploadButtonClick"),(i=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:o,beaconPrefix:"upload"})).on("signUpClick",(function(t){e.SigninHelper._redirectToSignUp("upload",{postLoginUrl:n})})),i.on("signInClick",(function(t){e.SigninHelper._redirectToSignin("upload",{postLoginUrl:n})})),i.show()},executeSearch:function(e){var t,i=this.get("container").one("#gn-search-field").getDOMNode();t=this.searchUrl.createNewSearch(i.value).getURL(),e.halt(),this.appContext.flapp.navigate(t)},setElementStates:function(e){var t=this.appContext.getViewer(),i=e.isSOHP&&!t.signedIn,n=e.isProPage,o={you_link:!1,you_menu:!1,contacts_menu:!1,groups_menu:!1,explore_menu:!1,weekly_flickr:!1,get_pro_link:!0,upload_icon:!1,account_menu:!1,search_bar:!1,signup_link:!1,signin_link:!1,right_side_signup:!0,vr_link:!0,sidebar_signin_link:!1};return i?(o.search_bar=!0,o.signin_link=!0,o.signup_link=!0,o.get_pro_link=!1):n?(o.you_menu=!1,o.explore_menu=!1,o.upload_icon=!1,o.search_bar=!1,o.account_menu=!0,o.get_pro_link=!1):t.signedIn?(o.you_menu=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.account_menu=!0):(o.signup_link=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.signin_link=!0),this.get("viewer")&&this.get("viewer").getValue("isPro")&&(o.stats=!0,o.get_pro_link=!1),"en-us"===this.appContext.lang.toLowerCase()&&(o.weekly_flickr=!0),n||i||(o.prints_menu=!0,o.print_shop_link=this.appContext.flipper.isFlipped("enable-prints-discovery-page")),o.events_link=!0,o.weekly_flickr=!1,o.vr_link=!1,this.isSOHP||t.signedIn||(o.sidebar_signin_link=!0),o},isExpiringPartnerAccount:function(){var e=this.get("viewer").getValue("expiringPartner");return this.appContext.flipper.isFlipped("enable-partner-account-banner")&&e&&-1===["embedr-route","browser-upgrade-interstitial-route","products-marketplace-eol-route","products-account-payouts-route","error-route"].indexOf(this.appContext.routeConfig.module)},handleToastActionClick:function(t){var i=t&&t.clickEvent?t.clickEvent.target.getAttribute("href"):null;i?e.config.win.location.href=i:this.toastSubview.dismiss()},setProRedirectCookie:function(){var t=new Date;t.setTime(t.getTime()+60*e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_hours*60*1e3),this.appContext.setCookie({cookieName:e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_name,cookieValue:1,expires:t,path:"/"})},showOverLimitToast:function(){this.toastSubview&&this.appContext.flipper.isFlipped("enable-upload-limit-messages")&&e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext)&&(this.toastSubview.setup({htmlContent:this.templates("upload-limit-message")({title:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_HEAD_FINAL"}),description:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_COPY_FINAL",limitCount:e.config.flickr.account.photo_limit.toLocaleString(this.appContext.lang,{maximumFractionDigits:0})}),primaryActionText:this.intlMessage({intlName:"common.GET_PRO"}),secondaryActionText:this.intlMessage({intlName:"common.DISMISS"})}),classList:["urgent"]}),this.toastSubview.on("primaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.on("secondaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.show())},handlePrintClick:function(){"en-us"===this.appContext.lang.toLowerCase()?this.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?this.showPrintSelector():this.showIntroToPrintsModal():this.showEnglishPrintWarningModal()},showPrintSelector:function(){var t=this,i=this.intlMessage({intlName:"prints.CHOOSE_PHOTO_TO_GET_PRINTS"}),n=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],o=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],r=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"}],a={appContext:this.appContext,searchable:{yours:!0,contacts:!1,everyone:!1,marketplace:!1}};this.printSelector=new e.Views["photo-selector-view"](a),this.printSelectorModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!1,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:"",navBarView:new e.Views["fluid-modal-nav-bar-view"]({appContext:this.appContext,links:n,enableSearch:!0,breakpointConfig:[{maxWidth:700,links:o,enableSearch:!1},{maxWidth:500,links:r,enableSearch:!1}]}),actionButtonLabel:this.intlMessage({intlName:"prints.BUY_PRINTS"}),actionButtonDisabled:!0,subview:this.printSelector,width:Math.round(.8*Math.max(1280,e.config.win.innerWidth)),height:Math.round(e.config.win.innerHeight-60),fullWindow:!0,classList:"photo-selector",buttonFlavorText:i,flexLayout:!0}),this.printSelectorModal.show(),this.printSelectorModal.registerEventHandler(e.on("photoSelector:selected",(function(e){t.printSelectorModal.enableActionButton(),t.printSelectorModal.setFlavorText(i)}))),this.printSelectorModal.registerEventHandler(e.on("photoSelector:unselected",(function(e){t.printSelectorModal.disableActionButton()}))),this.printSelectorModal.on("actionClick",this.handleBuyPrintClick.bind(t))},handleBuyPrintClick:function(){var t,i=this,n=this.printSelector.get("selected");e.config.win.location.href;this.printSelectorModal.disableActionButton(!0),this.appContext.getModel("photo-models",n).then((function(e){return t=e,i.appContext.getModel("person-relationship-models",t.getValue("owner").getValue("nsid"))})).then((function(n){return i.photoPrintsHelper.canPrintPhoto(t,n)?i.photoPrintsHelper.registerPrint(t,e.config.win.location.href):e.Promise.reject({message:"Error: Can’t print photo."})})).then((function(t){e.config.win.location.href=t.redirectURL})).catch((function(e){i.printSelectorModal.enableActionButton(),i.printSelectorModal.setFlavorText(e.message||i.intlMessage({intlName:"prints.SOMETHING_WRONG_PREPARING_PRINT"}),!0)}))},showEnglishPrintWarningModal:function(t){new e.Views.FluidModal({appContext:this.appContext,subview:new e.Views["confirmation-dialog-view"]({appContext:this.appContext,title:this.intlMessage({intlName:"prints.ENGLISH_LANGUAGE_AHEAD"}),htmlMessage:this.intlMessage({intlName:"prints.ORDERING_IS_ENGLISH_ONLY"}),confirmButtonText:this.intlMessage({intlName:"prints.CONTINUE_IN_ENGLISH"}),cancelButtonText:"en-us"===this.appContext.lang.toLowerCase()?this.intlMessage({intlName:"common.GO_BACK_BUTTON"}):this.intlMessage({intlName:"common.CANCEL"}),onConfirm:()=>{setTimeout((()=>{this.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?this.showPrintSelector():this.showIntroToPrintsModal()}),0)}}),hasSubviewConfigRefactor:!0}).show()},handleDrawerPageMouseDown:function(e){var t=e.target;t.ancestor(".mobile-nav-drawer",!0)||t.ancestor(".mobile-nav-toggle",!0)||this.hideMobileNavDrawer()},handleDrawerItemClick:function(e){this.hideMobileNavDrawer()},showMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.addClass("drawer-open"),this.navDrawerShown=!0,this.navDrawer.addClass("shown"),e.fire("globalNav:navDrawerOpen"),clearTimeout(this.navDrawerOverlayHideTimeout),this.navDrawerOverlay&&(this.navDrawerOverlay.addClass("displayed"),setTimeout((function(){t.navDrawerOverlay.addClass("shown")}),10)),this.drawerPageClickHandler||setTimeout((function(){t.drawerPageClickHandler=e.on(["mousedown","touchstart"],t.handleDrawerPageMouseDown.bind(t)),t.registerEventHandler(t.drawerPageClickHandler)}),10)},hideMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.removeClass("drawer-open"),this.navDrawerShown=!1,this.navDrawer.removeClass("shown"),e.fire("globalNav:navDrawerClosed"),this.navDrawerOverlay&&(this.navDrawerOverlay.removeClass("shown"),this.navDrawerOverlayHideTimeout=setTimeout((function(){t.navDrawerOverlay.removeClass("displayed")}),500)),this.drawerPageClickHandler&&(this.detachRegisteredEvent(this.drawerPageClickHandler),this.drawerPageClickHandler=void 0)},prepareOrderConfirmationModal:function(){var t,i=this,n=e.QueryString.parse(e.config.win.location.search.replace("?",""));e.config.win.location.href;this.photoPrintsHelper.isPrintFeatureEnabled()&&n&&void 0!==n.OrderID&&(t=n.OrderID,this.photoPrintsHelper.fetchOrder(t).then((function(e){i.showOrderConfirmationModal({orderId:e.orderId,orderUrl:e.orderUrl,email:e.email})})).catch((function(e){i.showOrderConfirmationModal({})})))},showOrderConfirmationModal:function(t){var i=this,n=this.templates("print-order-confirmation")({orderNum:t.orderId,orderUrl:t.orderUrl,email:t.email,helpUrl:"https://flickrhelp.com/",feedbackUrl:"/help/forum"}),o=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,maxHeight:!1,showHeader:!1,showFooter:!1,showCancelX:!1,width:460,htmlMessage:n});o.show(),o.on("activated",(function(){i.registerEventHandler(o.get("container").one("button.accept-button").on("click",(function(){o.close()})))}))},showIntroToPrintsModal:function(){var t=this,i=this.templates("intro-to-prints")({}),n=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,dismissOnOverlayClick:!0,maxHeight:!1,showHeader:!1,showFooter:!1,width:450,contentPadding:0,showCancelX:!0,htmlMessage:i});n.show(),n.on("activated",(function(){n.get("container").one(".accept-button").on("click",(function(e){n.close()}))})),n.on("close",(function(){var i=new Date;i.setTime(i.getTime()+36e10),t.appContext.setCookie({cookieName:e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name,cookieValue:1,expires:i,path:"/"}),setTimeout((function(){t.showPrintSelector()}),0)}))},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})}),"@VERSION@",{
requires:["flickr-view","hermes-template-global-nav","hermes-template-pending-gift-modal","hermes-template-upload-limit-message","hermes-template-print-order-confirmation","hermes-template-intro-to-prints","hermes-template-pro-hello-pro","search-url","search-autosuggest-field-view","querystring-parse-simple","querystring-stringify-simple","notifications-menu-view","url-helper","person-menu-view","group-menu-view","browser-support","fluid-modal-view","signup-modal-view","signin-helper","storage-helper","partner-account-banner-view","flickr-chat-center-view","featured-toast-view","user-limits-helper","photo-selector-view","fluid-modal-nav-bar-view","banner-view","photo-prints-helper","math-helper","slim-footer-view","subscriptions-helper","url"],optionalRequires:["hermes-core"],langBundles:["global-nav","common","search","upload-blocking","prints","blurb","thanks","gift-pro","checkout","errors"]});