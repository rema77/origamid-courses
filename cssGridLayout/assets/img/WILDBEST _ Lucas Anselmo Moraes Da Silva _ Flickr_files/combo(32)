YUI.add("photo-groups-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getAllContexts"].run(t,this.appContext)}},attributes:{id:{},groups:{isCollection:!0},total:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})}),"@VERSION@",{requires:["api-helper","flickr-model-registry","flickr-promise","flickr-photos-getAllContexts-fetcher"]});YUI.add("flickr-photos-getAllContexts-fetcher",(function(e,t){"use strict";e.namespace("ModelFetchers")["flickr-photos-getAllContexts"]={run:function(o,s){var l=this;return s.flipper.isFlipped("enable-scrappy-photo-page")&&(o.scrappy=!0),e.Promise.all([s.callAPI("flickr.photos.getAllContexts",this._processParams(o),!0),s.getModelRegistry("person-models"),s.getModelRegistry("photo-contexts-models"),s.getModelRegistry("favorite-models"),s.getModelRegistry("gallery-models"),s.getModelRegistry("group-pool-models"),s.getModelRegistry("set-models"),s.getModelRegistry("photostream-models"),s.getModelRegistry("photo-groups-models"),s.getModelRegistry("photo-sets-models"),s.getModelRegistry("photo-galleries-models"),s.getModelRegistry("group-models")]).then((function(e){return l._processResponse(e,o)}),e.FetcherErrorLogger(t))},_processParams:function(t){var o;return o={photo_id:t.id,extras:e.APIHelper.request.getRebootPhotoExtras()+","+e.APIHelper.request.getRebootGroupExtras()+","+e.APIHelper.request.getRebootAlbumsListExtras(),primary_photo_extras:"url_sq, url_t, url_s, url_m, needs_interstitial"},t.scrappy&&(o.get_all_galleries=1,o.no_faves_context=1,o.per_type_limit=6,o.get_totals=1,o.sort="date-desc"),o},_processResponse:function(t,o){var s,l,r=t[0],a=t[1],p=t[2],d={},i=[],g=t[8],n=t[9],u=t[10],m=t[11];return d.faves=t[3],d.gallery=t[4],d.pool=t[5],d.set=t[6],d.stream=t[7],e.Object.each(d,(function(t,o){r[o]&&e.Array.each(r[o],(function(o){e.APIHelper.response.addContextToRegistry(o,t,a,m),i.push(t.proxy(o.id))}))})),p.exists(o.id)||(s=p.add({id:o.id,totalGroups:r.totals&&r.totals.groups,totalSets:r.totals&&r.totals.sets,totalGalleries:r.totals&&r.totals.galleries}),p.setValue(o.id,"contexts",i)),g.addOrUpdate({id:o.id,total:r.totals&&r.totals.groups,groups:p.getContextsOfType(o.id,"group-pool-models")}),(l=p.getContextsOfType(o.id,"set-models")).forEach((function(e){e.setValue("totalCount",parseInt(e.getValue("photoCount"),10)+parseInt(e.getValue("videoCount"),10))})),n.addOrUpdate({id:o.id,total:r.totals&&r.totals.sets,sets:l}),u.addOrUpdate({id:o.id,total:r.totals&&r.totals.galleries,galleries:p.getContextsOfType(o.id,"gallery-models")}),s}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-contexts-models","favorite-models","gallery-models","group-pool-models","photostream-models","set-models","photo-groups-models","photo-sets-models","photo-galleries-models","group-models"]});YUI.add("photo-contexts-models",(function(e){function t(e){t.superclass.constructor.call(this,e),this.getMorePromises={"group-pool-models":{},"set-models":{},"gallery-models":{}},this.continuationKeys={"group-pool-models":{},"set-models":{},"gallery-models":{}}}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return this.appContext.flipper.isFlipped("enable-scrappy-photo-page")?e.ModelFetchers["flickr-photos-getAllContexts"].run(t,this.appContext):e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)}},getMoreContextsOfType:function(t,r,o){var s,n,i,l,a,p,u,c=this,g="-1",d=e.APIHelper.request.getRebootPhotoExtras();switch(r){case"group-pool-models":s="flickr.photos.getGroups",i="groups.group",d+=","+e.APIHelper.request.getRebootGroupExtras();break;case"set-models":s="flickr.photos.getSets",i="sets.set";break;case"gallery-models":s="flickr.photos.getGalleries",i="galleries.gallery"}return s?this.exists(t)?(l=this.continuationKeys[r][t]||"0")===g?e.Promise.resolve({type:r,newContexts:[],loadedAll:!0}):(n={photo_id:t,extras:d,primary_photo_extras:"url_sq, url_t, url_s, url_m",continuation:l,per_page:o},p=t+"_"+l,(u=this.getMorePromises[r][p])?u:(this.getMorePromises[r][p]=new e.FlickrPromise({apiResponse:this.appContext.callAPI(s,n,!0),contextRegistry:this.appContext.getModelRegistry(r),personRegistry:this.appContext.getModelRegistry("person-models")}).then((function(o){var s,n,l,u=[],d=o.apiResponse,f=o.contextRegistry,h=o.personRegistry;return(n=i.split(".").reduce((function(t,r){return e.Lang.isObject(t)?t[r]:void 0}),d))&&(e.Array.each(n,(function(t){e.APIHelper.response.addContextToRegistry(t,f,h),u.push(f.proxy(t.id))})),u.length&&(l=c.getContextsOfType(t,r).map((function(e){return e.getValue("id")})),(u=u.filter((function(e){return-1===l.indexOf(e.getValue("id"))}))).length&&c.getValue(t,"contexts").appendToListMulti(u))),void 0===(a=d.continuation)?a=g:e.Lang.isNumber(a)&&(a+=""),s=a===g,c.continuationKeys[r][t]=a,delete c.getMorePromises[r][p],{type:r,newContexts:u,loadedAll:s}})),this.getMorePromises[r][p])):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called for an ID that isn't in the registry: "+t):e.Promise.reject("[photo-contexts-models] getMoreContextsOfType was called without an invalid type: "+r)},getContextsOfType:function(t,r){return r=e.Array(r),this.getValue(t,"contexts").getList().filter((function(e){return r.indexOf(e.registry.name)>-1}))},getContextsNotOfType:function(t,r){return r=e.Array(r),this.getValue(t,"contexts").getList().filter((function(e){return-1===r.indexOf(e.registry.name)}))},attributes:{contexts:{isCollection:!0},totalGroups:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalSets:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0},totalGalleries:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)},defaultValue:0}}})}),"@VERSION@",{requires:["api-helper","flickr-model-registry","flickr-promise","flickr-photos-getInfo-fetcher","flickr-photos-getAllContexts-fetcher"]});YUI.add("vr-overlay-view",(function(e,t){var i,o=require("hermes-core/flog")(t);i={css:{destinationContainer:"body",closeX:".close"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.photoId=e.photoId,this.nsid=e.nsid,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.immersed=!1,this},subviewConfig:{},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then((function(t){return e.set("photo",t),e.canVr().then((function(t){e.set("canVr",t)}))}))},buildContainer:function(){var e=this.get("canVr");return this.set("isActiveViewAgnostic",!0),e?(this.setContainerWithTemplate("vr-overlay"),this):this},buildErrorContainer:function(){this.setContainerHTML("")},activate:function(){var t=this;if(this.get("canVr"))return this.loadFlickvr().then((function(){var o=t.get("container");o.addClass("active"),o.one(i.css.closeX)&&t.registerEventHandler(o.one(i.css.closeX).on("click",e.bind(t.closeVr,t))),t.registerEventHandler(t.get("container").on("click",t.openVr,t)),t.isMobile||t.openVr()})).then(null,(function(e){o.error("Failed to load flickvr from CDN",{err:e})})),this},loadFlickvr:function(){return new e.Promise((function(t,i){if(window.Flickvr)return t();e.Get.js("https://combo.staticflickr.com/ap/flickvr/version.js",(function(n){return n?i():window.FlickvrVersion?void e.Get.js("https://combo.staticflickr.com/ap/flickvr/"+window.FlickvrVersion+".js",(function(e){return e?i():(o.log("flickvr loaded successfully from CDN"),t())})):i()}))}))},hasEquirectangularTag:function(){return this.appContext.getModel("photo-tags-models",this.photoId).then((function(e){var t=!1;return e.toJSON().tags.forEach((function(e){"equirectangular"===e.tagRaw.toLowerCase()&&(t=!0)})),t}))},inEquirectangularGroup:function(){return this.appContext.getModel("photo-groups-models",this.photoId).then((function(e){var t=!1;return e.toJSON().groups.forEach((function(e){"44671723@N00"===e.id&&(t=!0)})),t}))},canVr:function(){var t,i,o=this,n=!1;return o.appContext.flipper.isFlipped("enable-vr")?((t=o.get("photo"))&&(i=t.getValue("aspectRatio"))&&i>=1.99&&i<=2.01&&(n=!0),n?e.Promise.all([o.appContext.callAPI("flickr.vr.isEquirectangular",{photo_id:t.id})]).then((function(t){return e.Promise.resolve(!!t[0].is_equirectangular)})):e.Promise.resolve(!1)):e.Promise.resolve(!1)},onParentViewEvent:function(e,t){if(t&&t[0])switch(t[0]){case"vrIconClicked":this.openVr();break;case"vKeyPressed":this.toggleVr()}},toggleVr:function(){this.immersed?this.closeVr():this.openVr()},openVr:function(t){if(this.immersed||t&&t.target.hasClass("close"))this.vr.controls&&this.vr.controls.autoRotate&&(this.vr.controls.autoRotate=!1);else{var i,o,n=this,r=this.get("photo").getLargestSize(),s=this.templates("flickr-balls")({}),a=new Image;t&&t.halt(),(o=e.Node.create("<div></div>")).addClass("vr-loading-layer"),o.addClass("fluid"),o.append(s),n.get("container").append(o),i=r.displayUrl,a.crossOrigin="anonymous",a.onload=function(){n.immersed=!0,n.vr=new window.Flickvr,n.vr.initialize(i,{container:n.get("container").getDOMNode(),useContainerDimensions:!n.isMobile,enableVrHeadset:n.appContext.flipper.isFlipped("enable-vr-headset"),autoRotate:!n.isMobile}).then((function(t){e.fire("photo:entering-vr"),t.style.position="absolute",n.vr.enterVR(),n.get("container").one(".vr-loading-layer").remove(),n.get("container").addClass("immersed"),n.escHandle=n.attachKeyEvent("down:27",e.betterThrottle(n.closeVr.bind(n),100))}))},a.src=i}},closeVr:function(e){var t=this.get("container");e&&e.preventDefault(),this.vr&&this.vr.destroy(),this.escHandle&&(this.detachRegisteredEvent(this.escHandle),delete this.escHandle),this.immersed=!1,t.removeClass("immersed")},beforeDestroy:function(){this.set("lastContainer",this.get("container")),this.immersed&&this.closeVr()},destructor:function(){var e=this.get("lastContainer");e&&(e.remove(!0),this.set("lastContainer",null))}})}),"@VERSION@",{requires:["flickr-view","better-throttle","get","hermes-template-vr-overlay","hermes-template-flickr-balls"],optionalRequires:["hermes-core"],optional:["photo-models","photo-tags-models","photo-groups-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-lang-photo-page-scrappy",(function(e,t){e.Intl.add("hermes/photo-page-scrappy","en-US",{PAGE_TITLE:[{type:1,value:"title"},{type:0,value:" | Flickr"}],BACK_TO:[{type:0,value:"Back to "},{type:1,value:"entryType"}],COULDNT_UPDATE_SETTINGS:[{type:0,value:"We couldnâ€™t update your settings"}],ADULT_CONTENT:[{type:0,value:"Adult Content"}],MATURE_AUDIENCES:[{type:0,value:"This content is for mature audiences only."}],USER_DISCRETION:[{type:0,value:"User discretion is advised."}],SHOW_ME_THIS_CONTENT_TYPE:[{type:0,value:"Show Me This Content Type From Now On"}],CHANGE_SAFE_SEARCH_IN_SETTINGS:[{type:0,value:'You can always change <a href="/account/prefs/safesearch/?from=privacy"  data-track="photoWellSafeSearchClick">SafeSearch settings</a> in your account preferences.'}],SIGNED_IN_FOR_CONTENT:[{type:0,value:"You must be signed in to see this content."}],VIDEO_COMING_SOON:[{type:0,value:"Video support coming soon"}],FIND_OUT_MORE_AD:[{type:0,value:"Find out more at "},{type:1,value:"brand"}],SHARE_THIS_PHOTO:[{type:0,value:"Share this photo"}],DOWNLOAD_THIS_VIDEO:[{type:0,value:"Download this video"}],DOWNLOAD_THIS_PHOTO:[{type:0,value:"Download this photo"}],VIEW_ALL_SIZES:[{type:0,value:"View all sizes"}],DOWNLOAD_PHOTO:[{type:0,value:"Download photo"}],SOME_RIGHTS_RESERVED:[{type:0,value:"Some rights reserved"}],DOWNLOAD:[{type:0,value:"Download"}],ERROR_LOADING_CONTEXT:[{type:0,value:"Error loading context"}],ADD_TITLE:[{type:0,value:"Add title"}],ADD_DESCRIPTION:[{type:0,value:"Add description"}],TITLE_DESCRIPTION_FAILURE:[{type:0,value:"We couldnâ€™t change the Title and Description at this time."}],VIEW_PREVIOUS_COMMENT:[{type:0,value:"View previous comment"}],VIEW_MORE_PREVIOUS_COMMENTS:[{type:0,value:"View "},{type:1,value:"count"},{type:0,value:" previous comments"}],EMPTY_COMMENT_ERROR:[{type:0,value:"An empty comment box? That wonâ€™t work!"}],COMMENT_RATE_LIMIT_ERROR:[{type:0,value:"Slow down, partner! To protect the Flickr community against spam and spammy behavior we place a few restrictions on commenting."}],COMMENT_POST_ERROR:[{type:0,value:"We couldnâ€™t post your comment."}],MORE_COMMENTS_ERROR:[{type:0,value:"We couldnâ€™t get more comments."}],COMMENT_PERMALINK_ERROR:[{type:0,value:"We were unable to find the specified comment on the photo."}],DELETE_COMMENT:[{type:0,value:"Delete Comment"}],COMMENT_DELETE_CONFIRMATION:[{type:0,value:"Are you sure you want to delete this comment?"}],COMMENT_DELETE_ERROR:[{type:0,value:"We couldnâ€™t delete your comment."}],COMMENT_LOADING_ERROR:[{type:0,value:"Error loading comments"}],COMMENT:[{type:0,value:"Comment"}],SHOW_MORE_COMMENTS:[{type:1,value:"count"},{type:0,value:" more"}],REPLY:[{type:0,value:"Reply"}],PERMALINK:[{type:0,value:"Permalink"}],SINGLE_FAVER:[{type:0,value:'<a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAlias"},{type:0,value:'/">'},{type:1,value:"displayName"},{type:0,value:"</a> faved this"}],DOUBLE_FAVER:[{type:0,value:'<a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAliasOne"},{type:0,value:'/">'},{type:1,value:"displayNameOne"},{type:0,value:'</a> and <a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAliasTwo"},{type:0,value:'/">'},{type:1,value:"displayNameTwo"},{type:0,value:"</a> faved this"}],TRIPLE_FAVER:[{type:0,value:'<a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAliasOne"},{type:0,value:'/">'},{type:1,value:"displayNameOne"},{type:0,value:'</a>, <a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAliasTwo"},{type:0,value:'/">'},{type:1,value:"displayNameTwo"},{type:0,value:'</a>, and <a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAliasThree"},{type:0,value:'/">'},{type:1,value:"displayNameThree"},{type:0,value:"</a> faved this"}],MULTI_FAVER:[{type:0,value:'<a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAliasOne"},{type:0,value:'/">'},{type:1,value:"displayNameOne"},{type:0,value:'</a>, <a class="faved-by-person-link" href="/photos/'},{type:1,value:"pathAliasTwo"},{type:0,value:'/">'},{type:1,value:"displayNameTwo"},{type:0,value:'</a> and <a class="remaining-faved-by" href="#">'},{type:1,value:"count"},{type:0,value:" more people</a> faved this"}],RELATIONSHIP_FRIEND_ERROR:[{type:0,value:"There was a problem setting your friend relationship."}],RELATIONSHIP_FAMILY_ERROR:[{type:0,value:"There was a problem setting your family relationship."}],HIDE_EXIF:[{type:0,value:"Hide EXIF"}],SHOW_EXIF:[{type:0,value:"Show EXIF"}],EDIT_LOCATION:[{type:0,value:"Edit Location"}],EDIT_LOCATION_ORGANIZR:[{type:0,value:"Weâ€™re hard at work redesigning our brand new photo experience. For now, you can Edit Location in Organizr."}],SAVE_LOCATION:[{type:0,value:"Save location"}],APERTURE:[{type:0,value:"Aperture"}],FOCAL_LENGTH:[{type:0,value:"Focal length"}],EXPOSURE_TIME:[{type:0,value:"Exposure time"}],FLASH_AUTO_FIRED:[{type:0,value:"Flash (auto, fired)"}],FLASH_AUTO_NO_FIRE:[{type:0,value:"Flash (auto, did not fire)"}],FLASH_ON_FIRED:[{type:0,value:"Flash (on, fired)"}],FLASH_ON_NO_FIRE:[{type:0,value:"Flash (on, did not fire)"}],FLASH_OFF:[{type:0,value:"Flash (off, did not fire)"}],FLASH_SIMPLE_ON:[{type:0,value:"On"}],FLASH_SIMPLE_OFF:[{type:0,value:"Off"}],POWERED_BY:[{type:0,value:"POWERED BY"}],FOURSQUARE:[{type:0,value:"FOURSQUARE"}],ADD_PHOTO_TO_MAP:[{type:0,value:"Add this photo to your map"}],SINGULAR_FAVE:[{type:0,value:"fave"}],PLURAL_FAVE:[{type:0,value:"faves"}],SINGULAR_VIEW:[{type:0,value:"view"}],PLURAL_VIEW:[{type:0,value:"views"}],SINGULAR_COMMENT:[{type:0,value:"comment"}],PLURAL_COMMENT:[{type:0,value:"comments"}],LICENSE_ERROR:[{type:0,value:"There was a problem changing your photoâ€™s license"}],ALL_RIGHTS_RESERVED:[{type:0,value:"All rights reserved"}],NO_RESTRICTIONS:[{type:0,value:"No known copyright restrictions"}],PUBLIC_DOMAIN:[{type:0,value:"Public domain"}],USA_GOV_WORK:[{type:0,value:"United States government work"}],SAFETY_CHANGE_ERROR:[{type:0,value:"There was an error while changing your photoâ€™s safety level"}],PRIVACY_CHANGE_ERROR:[{type:0,value:"There was a problem changing your photoâ€™s privacy"}],COMMENT_PERM_CHANGE_ERROR:[{type:0,value:"There was an error while changing your photoâ€™s commenting permission"}],FLAG_PHOTO:[{type:0,value:"Flag Photo"}],MARK_FOR_REVIEW:[{type:0,value:"Mark for review"}],ADDITIONAL_INFO:[{type:0,value:"Additional info"}],VIEWING_THIS_PHOTO:[{type:0,value:"Viewing this photo"}],PRIVACY_UPDATE_ERROR:[{type:0,value:"There was an error while updating the privacy. Please try again."}],META_PERMS_UPDATE_ERROR:[{type:0,value:"There was an error while updating add meta permission. Please try again."}],ADD_META_TO_THIS_PHOTO:[{type:0,value:"Add tags and people to this photo"}],COMMENT_PERMS_UPDATE_ERROR:[{type:0,value:"There was an error while updating commenting permission. Please try again."}],COMMENTING_ON_THIS_PHOTO:[{type:0,value:"Commenting on this photo"}],SAFETY_UPDATE_ERROR:[{type:0,value:"There was an error while updating the safety level. Please try again."}],SAFETY_LEVEL_OF_PHOTO:[{type:0,value:"Safety level of this photo"}],FLAG_ERROR:[{type:0,value:"There was an error trying to flag this photo. Please try again."}],PROVIDE_FEEDBACK:[{type:0,value:"Provide feedback on the new photo page"}],ERROR_DELETING_AUTOTAG:[{type:0,value:"Error deleting Autotag"}],AUTOTAGS:[{type:0,value:"Autotags"}],CONTACT_LIST_ERROR:[{type:0,value:"An error occurred while trying to fetch your contact list. Please try again."}],FAILED_TO_REMOVE_PERSON:[{type:0,value:"Failed to remove that person from the photo at this time."}],PERSON_CANNOT_BE_TAGGED:[{type:0,value:"This person cannot be tagged."}],PEOPLE_IN_PHOTO:[{type:0,value:"People in photo"}],ADD_PEOPLE:[{type:0,value:"Add people"}],ADD_PERSON:[{type:0,value:"Add a person"}],ERROR_REMOVING_FROM_GROUP:[{type:0,value:"There was a problem removing this photo from the group"}],ERROR_ACCEPTING_INVITATION:[{type:0,value:"There was a problem accepting the group invitation"}],SEARCH_GROUPS:[{type:0,value:"Search groups"}],PHOTO_NOT_IN_GROUPS:[{type:0,value:"This photo is currently not in any groups"}],ADD_TO_GROUP:[{type:0,value:"Add to group"}],INVITE_TO_GROUP:[{type:0,value:"Invite to group"}],ONE_GROUP_INVITATION:[{type:0,value:"You have 1 group invitation"}],N_GROUP_INVITATIONS:[{type:0,value:"You have "},{type:1,value:"count"},{type:0,value:" group invitations"}],VIEW_MORE_GROUPS:[{type:0,value:"View more groups"}],ERROR_REMOVING_FROM_ALBUM:[{type:0,value:"There was a problem removing this photo from the album"}],WARNING_REMOVE_LAST_PHOTO_FROM_ALBUM:[{type:0,value:"Youâ€™re about to remove the last photo from an album, which will also delete the album."}],REMOVE_PHOTO_AND_ALBUM:[{type:0,value:"Remove photo and delete album"}],ADD_PHOTO_TO_ALBUM:[{type:0,value:"Add this photo to an album"}],SEARCH_ALBUMS:[{type:0,value:"Search albums"}],ADD_TO_ALBUM:[{type:0,value:"Add to album"}],PHOTO_NOT_IN_ALBUMS:[{type:0,value:"This photo is currently not in any albums"}],VIEW_MORE_ALBUMS:[{type:0,value:"View more albums"}],PHOTO_IN_ONE_ALBUM:[{type:0,value:"This photo is in 1 album"}],PHOTO_IN_N_ALBUMS:[{type:0,value:"This photo is in "},{type:1,value:"count"},{type:0,value:" albums"}],INVITE_PENDING:[{type:0,value:"Invite pending"}],CANCEL_INVITE:[{type:0,value:"Cancel invite"}],ACCEPT_INVITE:[{type:0,value:"Accept invite"}],ONE_ITEM:[{type:0,value:"1 item"}],N_ITEMS:[{type:1,value:"count"},{type:0,value:" items"}],ERROR_REMOVING_FROM_GALLERY:[{type:0,value:"There was a problem removing this photo from the gallery"}],SEARCH_GALLERIES:[{type:0,value:"Search galleries"}],ADD_TO_GALLERY:[{type:0,value:"Add to gallery"}],PHOTO_NOT_IN_GALLERIES:[{type:0,value:"This photo is currently not in any galleries"}],VIEW_MORE_GALLERIES:[{type:0,value:"View more galleries"}],PHOTO_IN_ONE_GALLERY:[{type:0,value:"This photo is in 1 gallery"}],PHOTO_IN_N_GALLERIES:[{type:0,value:"This photo is in "},{type:1,value:"count"},{type:0,value:" galleries"}],DELETE_PHOTO:[{type:0,value:"Delete Photo"}],PERMANTENTLY_DELETE:[{type:0,value:"Do you want to permanently delete this photo?"}],EDIT_PHOTO:[{type:0,value:"Edit photo"}],NO_VIDEO_ROTATION:[{type:0,value:"Videos cannot be rotated"}],ROTATE:[{type:0,value:"Rotate"}],NO_VIDEO_REPLACE:[{type:0,value:"Videos cannot be replaced"}],REPLACE:[{type:0,value:"Replace"}],PHOTO_NAVIGATION:[{type:0,value:"Photo navigation"}],THUMBNAIL_NAVIGATION:[{type:0,value:"Thumbnail navigation"}],ZOOM:[{type:0,value:"Zoom"}],VIEW_IN_LIGHTBOX:[{type:0,value:"View in light box"}],BACK_TO_CONTEXT:[{type:0,value:"Back to context"}],ADD_TAG:[{type:0,value:"Add tag"}],GO_TO_ORGANIZER:[{type:0,value:"Go to Organizr"}],ALBUM:[{type:0,value:"album"}],ALBUMS:[{type:0,value:"albums"}],ERROR_LOADING_ALBUMS:[{type:0,value:"There was a problem loading your albums"}],ERROR_ADDING_PHOTO_TO_ALBUM:[{type:0,value:"There was a problem adding this photo to the album"}],ERROR_REMOVING_PHOTO_FROM_ALBUM:[{type:0,value:"There was a problem removing this photo from the album"}],ERROR_LOADING_GROUPS:[{type:0,value:"There was a problem loading the groups you can add photos to"}],ERROR_ADDING_TO_GROUP:[{type:0,value:"There was a problem adding this photo to the group"}],ERROR_ADDING_TO_GROUP_NOT_OWNER:[{type:0,value:"Sorry, the photo couldnâ€™t be added to the group because you donâ€™t own the photo."}],ERROR_ADDING_TO_GROUP_NOT_MEMBER:[{type:0,value:"Sorry, the photo couldnâ€™t be added to the group. You are not a member of the group."}],ERROR_ADDING_TO_GROUP_ALREADY_IN_POOL:[{type:0,value:"The photo is already in that group pool."}],ERROR_ADDING_TO_GROUP_MAX_POOLS:[{type:0,value:"Sorry, the photo couldnâ€™t be added to the group because it is already in the maximum number of group pools."}],ERROR_ADDING_TO_GROUP_MAX_PHOTOS_FROM_USER:[{type:0,value:"Sorry, the photo couldnâ€™t be added to the group. You have already added the maximum number of photos to the pool."}],ERROR_ADDING_TO_GROUP_ADDED_TO_QUEUE:[{type:0,value:"Your photo has been added to the pending queue for the group."}],ERROR_ADDING_TO_GROUP_ALREADY_IN_QUEUE:[{type:0,value:"Your photo is already in the pending queue for the group."}],ERROR_ADDING_TO_GROUP_INVALID_CONTENT:[{type:0,value:"Sorry, the photo couldnâ€™t be added to the group. For more information, check the group requirements for media type, content type, safety level, and geo location."}],ERROR_ADDING_TO_GROUP_MAX_IN_POOL:[{type:0,value:"Sorry, the photo couldnâ€™t be added to the group. The group has the maximum number of photos allowed in a pool."}],ERROR_INVITING_TO_GROUP:[{type:0,value:"There was a problem inviting this photo to the group"}],ERROR_CANCELING_GROUP_INVITIATON:[{type:0,value:"There was a problem canceling this photoâ€™s invitation to the group"}],NO_MATCHES:[{type:0,value:"No matches"}],CREATE_NEW:[{type:0,value:"Create new"}],ERROR_LOADING_GROUP_INVITATIONS:[{type:0,value:"There was a problem loading this photoâ€™s group invitations"}],NO_GROUP_INVITATIONS:[{type:0,value:"No pending group invitations"}],PENDING_INVITATIONS_FOR_PHOTO:[{type:0,value:"Pending invitations for this photo"}],LOADING_INVITATIONS:[{type:0,value:"Loading invitations"}],ERROR_LOADING_GALLERIES:[{type:0,value:"There was a problem loading your galleries"}],ERROR_ADDING_TO_GALLERY:[{type:0,value:"There was a problem adding this photo to the gallery"}],ERROR_PHOTO_NOT_ALLOWED_IN_GALLERY:[{type:0,value:"The owner of this photo does not allow the photo to be added to your gallery"}],ERROR_CREATING_GALLERY:[{type:0,value:"There was a problem creating your new gallery"}],DATE_TAKEN_FORMAT:[{type:0,value:"The taken date must be in the MM/DD/YYYY hh:mm:ss format."}],DATE_POSTED_FUTURE:[{type:0,value:"The posted date cannot be in the future."}],DATE_UPLOADED_FUTURE:[{type:0,value:"The uploaded date cannot be in the future."}],DATE_POSTED_FLICKR_JOIN:[{type:0,value:"Posted date must be after you joined Flickr."}],DATE_UPLOADED_FLICKR_JOIN:[{type:0,value:"Uploaded date must be after you joined Flickr."}],ERROR_SAVING_DATE:[{type:0,value:"Error saving dates"}],DATE_INVALID:[{type:0,value:"One or more dates are invalid"}],EDIT_DATES:[{type:0,value:"Edit Dates"}],DATE_TAKEN_ON:[{type:0,value:"Date Taken On"}],DATE_POSTED_ON:[{type:0,value:"Date Posted On"}],DATE_UPLOADED_ON:[{type:0,value:"Date Uploaded On"}],TAKEN_CIRCA:[{type:0,value:"Taken circa "},{type:1,value:"intlDate"}],TAKEN_SOMETIME_IN:[{type:0,value:"Taken sometime in "},{type:1,value:"intlDate"}],TAKEN_IN:[{type:0,value:"Taken in "},{type:1,value:"intlDate"}],TAKEN_ON:[{type:0,value:"Taken on "},{type:3,value:"intlDate",style:"long"}],UPLOADED_ON:[{type:0,value:"Uploaded on "},{type:1,value:"intlDate"}],SOMETHING_WENT_WRONG:[{type:0,value:"Something went wrong."}],REFRESH_BROWSER:[{type:0,value:"Please refresh your browser and try again."}],TWITTER_NOT_FOUND:[{type:0,value:"Twitter account not found on posting"}],TUMBLR_NOT_FOUND:[{type:0,value:"Tumblr account not found on posting"}],LINK:[{type:0,value:"Link"}],LINK_TO_VIDEO:[{type:0,value:"Link to this video:"}],LINK_TO_PHOTO:[{type:0,value:"Link to this photo:"}],NO_LINKS_FOR_RESTRICTED_VIDEO:[{type:0,value:"Links are not available for restricted videos"}],PRIVATE_VIDEO_SHARE:[{type:0,value:"This is a private video, do you still want to share it?"}],NO_LINKS_FOR_RESTRICTED_PHOTO:[{type:0,value:"Links are not available for restricted photos"}],PRIVATE_PHOTO_SHARE:[{type:0,value:"This is a private photo, do you still want to share it?"}],SHARING_RESTRICTED_VIDEO:[{type:0,value:"Sharing is restricted for this video"}],SHARING_RESTRICTED_PHOTO:[{type:0,value:"Sharing is restricted for this photo"}],EMBED:[{type:0,value:"Embed"}],PUBLIC_TO_SHARE:[{type:0,value:"Please share this photo publicly to view embed code"}],SIZE:[{type:0,value:"Size:"}],TITLE_AND_OWNER_AT_START:[{type:0,value:"Display title and owner at start"}],SHARE_NOW:[{type:0,value:"Share now!"}],SHARE_PHOTO:[{type:0,value:"Share Photo"}],SHARE_ON_TWITTER:[{type:0,value:"Share on Twitter"}],AUTHORIZE_FOR_TWITTER:[{type:0,value:"please authorize Flickr to post on Twitter"}],SHARE_ON_TUMBLR:[{type:0,value:"Share on Tumblr"}],PUBLISH_NOW:[{type:0,value:"Publish now"}],ADD_TO_QUEUE:[{type:0,value:"Add to queue"}],SAVE_AS_DRAFT:[{type:0,value:"Save as draft"}],AUTHORIZE_FOR_TUMBLR:[{type:0,value:"please authorize Flickr to post on Tumblr"}],SHARE_VIA_MAIL:[{type:0,value:"Share via mail"}],SCREEN_NAME_OR_EMAIL:[{type:0,value:"Screen name or email"}],SQUARE:[{type:0,value:"Square"}],SMALL:[{type:0,value:"Small"}],MEDIUM:[{type:0,value:"Medium"}],LARGE:[{type:0,value:"Large"}],ORIGINAL:[{type:0,value:"Original"}],DUPLICATE_TAG:[{type:0,value:"Duplicate Tag"}],INVALID_TAG:[{type:0,value:"Invalid Tag"}],MAXIMUM_TAG_LIMIT:[{type:0,value:"Maximum tag limit (76) reached"}],MAX_TAG_LIMIT:[{type:0,value:"Maximum tag limit (75) reached"}],ERROR_ADDING_TAG:[{type:0,value:"Error adding tag"}],ERROR_DELETING_TAG:[{type:0,value:"Error deleting tag"}],TAGS:[{type:0,value:"Tags"}],ADD_TAGS:[{type:0,value:"Add tags"}],ADD_A_TAG:[{type:0,value:"Add a tag"}],PHOTO_IN_ONE_GROUP:[{type:0,value:"This photo is in 1 group"}],PHOTO_IN_MANY_GROUPS:[{type:0,value:"This photo is in "},{type:2,value:"count",style:null},{type:0,value:" groups"}],PHOTO_IN_NO_GROUPS:[{type:0,value:"This photo is not in any groups"}],ADD_A_COMMENT:[{type:0,value:"Add a comment"}],COMMENT_TUTORIAL:[{type:0,value:"press Enter to post and Shift+Enter for newline"}],SIGNED_IN_TO_POST_A_COMMENT:[{type:0,value:"You must be signed in to post a comment"}],SHARE:[{type:0,value:"Share"}],CODE:[{type:0,value:"Code"}],INCLUDE_A_MESSAGE:[{type:0,value:"Include a message"}],FOR_MORE_INFORMATION_SAFESEARCH:[{type:0,value:'For more information please read <a href="//www.flickr.com/help/photos/?search=flag#145">this FAQ</a>.'}],FLAG_CONFIRMATION_SAFE_WITHIN:[{type:0,value:'This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'}],FLAG_CONFIRMATION_SAFE_OUTSIDE:[{type:0,value:'This photo is marked as <a href="//www.flickr.com/help/filters/#258">safe</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'}],FLAG_CONFIRMATION_MODERATE_WITHIN:[{type:0,value:'This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'}],FLAG_CONFIRMATION_MODERATE_OUTSIDE:[{type:0,value:'This photo is marked as <a href="//www.flickr.com/help/filters/#258">moderate</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'}],FLAG_CONFIRMATION_RESTRICTED_WITHIN:[{type:0,value:'This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls within your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'}],FLAG_CONFIRMATION_RESTRICTED_OUTSIDE:[{type:0,value:'This photo is marked as <a href="//www.flickr.com/help/filters/#258">restricted</a> and falls outside your <a href="//www.flickr.com/account/prefs/safesearch/">SafeSearch settings</a>.'}],PRIVATE_PHOTO:[{type:0,value:"Private photo"}],PHOTO_UNFIT_FOR_YOUR_EYES:[{type:0,value:"Photo is unfit for your eyes. Have a kitten: (^._.^)ï¾‰"}],NO_PHOTO_WITH_THAT_ID:[{type:0,value:"No photo found with id "},{type:1,value:"photoId"}],NO_MEMBERS_FOUND:[{type:0,value:"No members found"}],TAKEN_ON_INTL:[{type:0,value:"Taken on "},{type:3,value:"intlDate",style:"long"}],UPLOADED_ON_INTL:[{type:0,value:"Uploaded on "},{type:3,value:"intlDate",style:"long"}],TAKEN_IN_MONTH:[{type:0,value:"Taken in "},{type:3,value:"intlDate",style:"monthYear"}],VIEW_IN_LIGHTBOX_SHORTCUT:[{type:0,value:"View in light box"}],ZOOM_MAX_MESSAGE:[{type:0,value:"Whoa there, tiger! This photo is already at maximum size."}],CLICK_TO_FAVE_PHOTO:[{type:0,value:"Click here to fave this photo"}],CLICK_TO_FAVE_VIDEO:[{type:0,value:"Click here to fave this video"}],BACK_TO_ACTIVITY_FEED:[{type:0,value:"Back to activity feed"}],BACK_TO_PHOTOSTREAM:[{type:0,value:"Back to photostream"}],BACK_TO_SHARED_PHOTOS:[{type:0,value:"Back to shared photos"}],BACK_TO_ALBUM:[{type:0,value:"Back to album"}],BACK_TO_CONTACTS_LIST:[{type:0,value:"Back to contacts list"}],BACK_TO_FAVORITES:[{type:0,value:"Back to favorites"}],BACK_TO_GALLERY:[{type:0,value:"Back to gallery"}],BACK_TO_PROFILE:[{type:0,value:"Back to profile"}],BACK_TO_EXPLORE:[{type:0,value:"Back to explore"}],BACK_TO_COMMONS:[{type:0,value:"Back to commons"}],BACK_TO_GROUP:[{type:0,value:"Back to group"}],BACK_TO_GROUPS:[{type:0,value:"Back to groups"}],BACK_TO_MAP:[{type:0,value:"Back to map"}],BACK_TO_SEARCH:[{type:0,value:"Back to search"}],BACK_TO_TAG:[{type:0,value:"Back to tag"}],BACK_TO_PRINT_SHOP:[{type:0,value:"Back to the print shop"}],ERROR_ADDING_PHOTOS_TO_ALBUM:[{type:0,value:"There was a problem adding these photos to the album"}],ERROR_REMOVING_PHOTOS_FROM_ALBUM:[{type:0,value:"There was a problem removing these photos from the album"}],ERROR_CREATING_ALBUM:[{type:0,value:"There was a problem creating your new album"}],STRICTER_PRIVACY_CHANGE_DIALOG_TITLE:[{type:0,value:"Changing to a stricter privacy level"}],STRICTER_PRIVACY_CHANGE_DIALOG_MESSAGE:[{type:0,value:"Changing a photo to a stricter privacy level will remove any favorites that have accumulated. It will also change the URL of the photo."}],TAGS_HELPER_TEXT:[{type:0,value:"Tags are keywords that make photos easier to find. Add as many as you like, and Flickrâ€™s friendly robots will try to help out by adding some for you."}],TAGS_HELP_TEXT:[{type:0,value:"Tags are keywords that make photos easier to find in Flickr search. The ones you add will show up in dark gray. Flickrâ€™s friendly robots will try to help out by adding some for you; these will appear with just a gray outline."}],PRIVATE_TAGS_OWNER_HELPER_TEXT:[{type:0,value:"This private tag is only visible to you and your friends and family who are allowed to see this photo."}],PRIVATE_TAGS_FRIENDS_FAMILY_HELPER_TEXT:[{type:0,value:"This private tag is only visible to you because you are a friend or family of the photoâ€™s owner."}],CREATE_WALLART_WITH_PHOTO:[{type:0,value:"Create wall art with this photo"}],ERROR_ROTATING_PHOTO:[{type:0,value:"There was a problem rotating this photo, please close and retry."}],ROTATE_PHOTO:[{type:0,value:"Rotate photo"}],ERROR_REPLACING_PHOTO:[{type:0,value:"There was a problem replacing this photo, please close and retry."}],REPLACE_PHOTO:[{type:0,value:"Replace photo"}],PERMANENTLY_REPLACE:[{type:0,value:'Permanently replace this photo ("'},{type:1,value:"photoTitle"},{type:0,value:'" by '},{type:1,value:"username"},{type:0,value:") with <em>"},{type:1,value:"fileName"},{type:0,value:"</em>?"}],REPLACE_WARNING:[{type:0,value:"Replacing a photo canâ€™t be undone. Choose a file to replace this photo with."}],REPLACE_UPLOADING:[{type:0,value:"Uploading <em>"},{type:1,value:"fileName"},{type:0,value:"</em>..."}],ERROR_DELETING_PHOTO:[{type:0,value:"There was a problem deleting this photo, please close and retry."}],SHOW_MORE_STATS:[{type:0,value:"Show more stats"}],SIGNUP_AND_DOWNLOAD_TITLE:[{type:0,value:"You found a photo to download!"}],SIGNUP_AND_DOWNLOAD_VIDEO_TITLE:[{type:0,value:"You found a video to download!"}],SIGNUP_AND_DOWNLOAD_MESSAGE:[{type:0,value:"Join Flickr to access billions of photos."}],SIGNUP_AND_COMMENT_TITLE:[{type:0,value:"Comment on this photo!"}],SIGNUP_AND_COMMENT_MESSAGE:[{type:0,value:"Join Flickr to leave a comment on this photo."}],IMMERSIFY:[{type:0,value:"Immersify"}],SIGNUP_FOOTER_MESSAGE:[{type:0,value:"Join Flickr to explore world class photos"}],TIMEOUT_FAILURE:[{type:0,value:"Weâ€™re having some trouble displaying this photo at the moment. Please try again."}],BUY:[{type:0,value:"Buy"}],ADD_A_NOTE:[{type:0,value:"Add a note"}],CONFIRM_NOTE_DELETION:[{type:0,value:"Are you sure you want to permanently delete this note?"}],VIEWING_PRIVACY:[{type:0,value:"Viewing privacy"}],ALLOW_COMMENTING:[{type:0,value:"Allow commenting"}],ALLOW_TAGS_NOTES_PEOPLE:[{type:0,value:"Allow tags, notes, and people tags"}],SAFETY_LEVEL:[{type:0,value:"Safety level"}],SET_SAFETY_LEVEL:[{type:0,value:"Set safety level"}],KEYBOARD_SHORTCUTS:[{type:0,value:"Keyboard shortcuts"}],EDITOR_UPGRADE:[{type:0,value:"Photo Editor Upgrade"}],EDITOR_UPGRADE_MESSAGE:[{type:0,value:"The edit photo feature on the Flickr photo page is currently disabled pending an upgrade.<br><br>Very shortly, youâ€™ll have access to a more stable, more feature rich photo editor to complement your Flickr experience!<br><br>Sorry for the inconvenience of this unexpected upgrade, but weâ€™re confident it will be worth the wait."}],ERROR_REPLACING_PHOTO_FILE_TYPE:[{type:0,value:"Error replacing photo.  Filetype was unrecognized, please try again with a different photo."}],EDITING_DISABLED:[{type:0,value:"Editing is disabled right now"}],ENTER_TO_EDIT_TITLE_DESC:[{type:0,value:"Press enter to edit title or description."}],BACK_TO_PHOTOSTREAM_EDIT:[{type:0,value:"Back to photostream edit"}],ALLOW_PRINTS_ON_PHOTO:[{type:0,value:"Permission to buy prints"}],AUTO_MODERATION_MESSAGE:[{type:0,value:'The Flickr Moderation Bot ðŸ¤– changed the safety level of this photo. <a class="learn-link" href="'},{type:1,value:"learnUrl"},{type:0,value:'">Learn more</a>.'}],GROUPS_COUNT:[{type:0,value:"Groups ("},{type:1,value:"count"},{type:0,value:")"}],GALLERIES_COUNT:[{type:0,value:"Galleries ("},{type:1,value:"count"},{type:0,value:")"}],ALBUMS_COUNT:[{type:0,value:"Albums ("},{type:1,value:"count"},{type:0,value:")"}],SET_CONTENT_TYPE:[{type:0,value:"Set content type"}],CONTENT_TYPE:[{type:0,value:"Content type"}],SHOW_LICENSE_HISTORY_CTA:[{type:0,value:"License History"}],LICENSE_HISTORY_DATE:[{type:0,value:"Note: There is no license history before "},{type:3,value:"firstLicenseDate",style:"long"}],OLD_LICENSE:[{type:0,value:"Old License"}],NEW_LICENSE:[{type:0,value:"New License"}],ORIGINAL_LICENSE:[{type:0,value:"Original License"}],LICENSE_DATE_OLD_NEW:[{type:3,value:"dateChange",style:"long"}],SEPARATE_TAGS_WITH_SPACE:[{type:0,value:"Separate tags with a space"}],EDIT_TAGS:[{type:0,value:"Edit tags"}],PRESS_ENTER_ADD_TAGS:[{type:0,value:'Press "Enter" to add tags'}],TAG_TIP:[{type:0,value:"Tip: Put multiple words inside double quotes to create a single tag"}],MANAGE_TAGS:[{type:0,value:"Manage tags"}],MANAGE_CONTACTS:[{type:0,value:"Manage contacts"}],EDIT_PEOPLE:[{type:0,value:"Edit people"}],TYPE_A_NAME:[{type:0,value:"Type a name"}],YOU_CANNOT_ADD_PEOPLE_PHOTO:[{type:0,value:"You cannot add people to this photo"}],YOU_CANNOT_ADD_PEOPLE_VIDEO:[{type:0,value:"You cannot add people to this video"}],YOU_CANNOT_ADD_TAGS_PHOTO:[{type:0,value:"You cannot add tags to this photo"}],YOU_CANNOT_ADD_TAGS_VIDEO:[{type:0,value:"You cannot add tags to this video"}],TAG_LIMIT_REACHED:[{type:0,value:"Tag limit reached"}],REACHED_MAX_PEOPLE_TAGS:[{type:0,value:"You can tag up to 50 people in a photo or video. Please remove existing tags in order to add new ones."}],ADD_DATE_TAKEN:[{type:0,value:"Add date taken"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-zoom-modal",(function(l,n){var e=l.Template.Handlebars.revive({1:function(l,n,e,r,a){var o,t=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<img src="'+l.escapeExpression("function"==typeof(o=null!=(o=t(e,"smallSrc")||(null!=n?t(n,"smallSrc"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"smallSrc",hash:{},data:a,loc:{start:{line:3,column:28},end:{line:3,column:40}}}):o)+'" class="zoom-small">'},3:function(l,n,e,r,a){var o,t=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<img src="'+l.escapeExpression("function"==typeof(o=null!=(o=t(e,"largeSrc")||(null!=n?t(n,"largeSrc"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"largeSrc",hash:{},data:a,loc:{start:{line:4,column:28},end:{line:4,column:40}}}):o)+'" class="zoom-large">'},5:function(l,n,e,r,a){var o,t=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<img src="'+l.escapeExpression("function"==typeof(o=null!=(o=t(e,"xLargeSrc")||(null!=n?t(n,"xLargeSrc"):n))?o:l.hooks.helperMissing)?o.call(null!=n?n:l.nullContext||{},{name:"xLargeSrc",hash:{},data:a,loc:{start:{line:5,column:29},end:{line:5,column:42}}}):o)+'" class="zoom-xlarge">'},compiler:[8,">= 4.3.0"],main:function(l,n,e,r,a){var o,t=null!=n?n:l.nullContext||{},c=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="zoom-modal hidden">\n\t<div class="zoom-photo-container">\n\t\t'+(null!=(o=c(e,"if").call(t,null!=n?c(n,"smallSrc"):n,{name:"if",hash:{},fn:l.program(1,a,0),inverse:l.noop,data:a,loc:{start:{line:3,column:2},end:{line:3,column:68}}}))?o:"")+"\n\t\t"+(null!=(o=c(e,"if").call(t,null!=n?c(n,"largeSrc"):n,{name:"if",hash:{},fn:l.program(3,a,0),inverse:l.noop,data:a,loc:{start:{line:4,column:2},end:{line:4,column:68}}}))?o:"")+"\n\t\t"+(null!=(o=c(e,"if").call(t,null!=n?c(n,"xLargeSrc"):n,{name:"if",hash:{},fn:l.program(5,a,0),inverse:l.noop,data:a,loc:{start:{line:5,column:2},end:{line:5,column:71}}}))?o:"")+'\n\t\t<span class="facade-of-protection-zoom"></span>\n\t</div>\n</div>\n'},useData:!0}),r={};l.Array.each([],(function(n){var e=l.Template.get("hermes/"+n);e&&(r[n]=e)})),l.Template.register("hermes/zoom-modal",(function(n,a){return(a=a||{}).partials=a.partials?l.merge(r,a.partials):r,e(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("animation-manager",(function(n){n.AnimationManager=(function(){var i,e,a;function t(){e&&(a.forEach((function(n,i){n()})),n.config.win.requestAnimationFrame(t))}function o(i){return a.push(i),e||(e=!0,n.config.win.requestAnimationFrame(t)),{detach:function(){a.splice(a.indexOf(i),1),a.length||(e=!1)}}}return i||(e=!1,a=[],YUI.Env.isServer||n.config.win.requestAnimationFrame||(function(){var i,e,a=["webkit","moz"],t=0;for(e=0;e<a.length&&!n.config.win.requestAnimationFrame;++e)i=a[e],n.config.win.requestAnimationFrame=n.config.win[i+"RequestAnimationFrame"],n.config.win.cancelAnimationFrame=n.config.win[i+"CancelAnimationFrame"]||n.config.win[i+"CancelRequestAnimationFrame"];n.config.win.requestAnimationFrame&&n.config.win.cancelAnimationFrame||(n.config.win.requestAnimationFrame=function(n){var i=Date.now(),e=Math.max(t+16,i);return setTimeout((function(){n(t=e)}),e-i)},n.config.win.cancelAnimationFrame=clearTimeout)})(),i={subscribe:o}),i})()}),"@VERSION@",{requires:[]});YUI.add("zoom-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,forceGPU:null,slowMoMode:!1,sizes:{},supportsMultiLevelZooming:!1,currentZoomLevel:null,currentZoomRegion:{},initializer:function(o){return this.photoId=o.photoId,this.disableIfSmall=!!o.disableIfSmall,YUI.Env.isServer||(e.config.win.location.search.indexOf("gpu=on")>-1?this.forceGPU=!0:e.config.win.location.search.indexOf("gpu=off")>-1&&(this.forceGPU=!1),this.currentZoomLevel=0),this},loadState:function(){var e=this;return this.appContext.getModel("photo-models",e.photoId).then((function(o){e.set("photo",o)}))},buildContainer:function(){return this.setContainerHTML(""),this},activate:function(){var o=this,t=o.getZoomKeyScope();return this.get("photo").getValue("needsInterstitial")||(this.parentViewContainer=this.get("container").ancestor(".view"),o.registerEventHandler(o.get("container").on("click",(function(e){e.preventDefault(),o.setCursorCoordsFromEvent(e),o.detectSlowMoMode(e),o.zoomIn(o.cursorCoords)}))),o.registerEventHandler(e.on("photo:zoom",(function(t){o.detectSlowMoMode({shiftKey:t.shift}),t.x&&t.y?(o.cursorCoords=[t.x-e.config.win.pageXOffset,t.y-e.config.win.pageYOffset],o.zoomIn(o.cursorCoords)):o.zoomIn()}))),o.attachKeyEvent("down:90",e.betterThrottle((function(t){t.preventDefault(),o.detectSlowMoMode(t),o.canZoomIn()?o.zoomIn():o.zoomOut(),e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"keyboard",label:"zoom"})}),100),"*"),o.attachKeyEvent("down:27",e.betterThrottle((function(e){e.preventDefault(),o.detectSlowMoMode(e),o.zoomOut()}),100),t),o.attachKeyEvent("down:37,38,39,40",e.betterThrottle((function(e){var t=[o.currentZoomRegion.left,o.currentZoomRegion.top],i=200;switch(e.preventDefault(),e.button){case 37:t[0]+=i;break;case 38:t[1]+=i;break;case 39:t[0]-=i;break;case 40:t[1]-=i}o.panZoomNode(t)}),16),t),o.registerEventHandler(o.appContext.flapp.before("activeViewChange",(function(t){e.fire("flickr:removeKeyEventScope",o.getZoomKeyScope()),o.detachRegisteredEvents(),o.detachEventHandlers(),o.cleanUp()})))),this},zoomIn:function(o){var t,i,n,r,s,a,h,d,l,g=this,c=this.getZoomPixelRatio(),u=this.getRegionForNode(this.get("container"),!0),m=this.maxMsgNode;if(this.sizes=this.getSizes(),this.sizes.xlarge&&this.sizes.xlarge.url?this.supportsMultiLevelZooming=!0:this.supportsMultiLevelZooming=!1,this.supportsMultiLevelZooming?0===this.currentZoomLevel?n=this.sizes.large:1===this.currentZoomLevel&&(n=this.sizes.xlarge):n=this.sizes.large,r=this.isImageReadyToDisplay(this.sizes.medium.url),s=this.isImageReadyToDisplay(this.sizes.large.url),this.supportsMultiLevelZooming&&(a=this.isImageReadyToDisplay(this.sizes.xlarge.url)),this.supportsMultiLevelZooming&&1===this.currentZoomLevel&&this.panningAnimationHandle.detach(),this.disableIfSmall&&u.width>=this.sizes.large.width)return m||(m=this.maxMsgNode=e.Node.create('<div class="zoom-max-message">'+g.intlMessage({intlName:"photo-page-scrappy.ZOOM_MAX_MESSAGE"})+"</div>")),this.get("container").contains(m)||(m.addClass("hidden"),this.get("container").append(m)),e.soon((function(){m&&m.inDoc()&&(m.removeClass("hidden"),this.maxMsgNodeHidingTimer&&(clearTimeout(this.maxMsgNodeHidingTimer),delete this.maxMsgNodeHidingTimer),this.maxMsgNodeHidingTimer=setTimeout((function(){m&&m.inDoc()&&m.addClass("hidden")}),3e3))})),void this.resetSlowMoMode();e.fire("flickr:setKeyEventScope",this.getZoomKeyScope()),this.zoomingIn=!0,this.panningAnimationHandle=e.AnimationManager.subscribe((function(){var t,i,n=g.getDeteriorationRateForEasing(),r={x:0,y:0},s={x:0,y:0},a={x:0,y:0};g.pendingCoords&&(r.x=parseInt(g.pendingCoords[0],10),r.y=parseInt(g.pendingCoords[1],10),g.currentCoords?(s.x=g.currentCoords[0],s.y=g.currentCoords[1]):(t=g.getZoomPanCoordsForCursor(o),i=g.constrainPanCoords(t),s.x=parseInt(i[0],10),s.y=parseInt(i[1],10)),r.x<s.x?a.x=s.x-Math.abs(r.x-s.x)*n:a.x=s.x+Math.abs(r.x-s.x)*n,r.y<s.y?a.y=s.y-Math.abs(r.y-s.y)*n:a.y=s.y+Math.abs(r.y-s.y)*n,a.x=parseInt(a.x,10),a.y=parseInt(a.y,10),a.x===s.x&&(r.x<s.x?a.x=s.x-1:r.x>s.x&&(a.x=s.x+1)),a.y===s.y&&(r.y<s.y?a.y=s.y-1:r.y>s.y&&(a.y=s.y+1)),a.x===r.x&&a.y===r.y||((!0===g.forceGPU||e.config.win.devicePixelRatio>1)&&!1!==g.forceGPU?g.zoomPhotoContainerNode.setStyle("transform","translate3d("+a.x+"px, "+a.y+"px, 0)"):g.zoomPhotoContainerNode.setStyle("transform","translate("+a.x+"px, "+a.y+"px)")),g.currentCoords=[a.x,a.y],a.x===r.x&&a.y===r.y&&delete g.pendingCoords)})),this.zoomNode?(this.zoomingOut=!1,(t=this.zoomNode).removeClass("hiding"),this.detachEventHandlers()):t=this.zoomNode=e.Node.create(this.templates("zoom-modal")({smallSrc:r?this.sizes.medium.url:"",largeSrc:s?this.sizes.large.url:"",xLargeSrc:a?this.sizes.xlarge.url:""})),i=this.zoomPhotoContainerNode=t.one(".zoom-photo-container"),this.zoomImageFullWidth=n.width/c,this.zoomImageFullHeight=n.height/c,o||(g.cursorCoords=o=[this.appContext.viewportData.viewport.width/2,this.appContext.viewportData.viewport.height/2]),h=this.getZoomPanCoordsForCursor(o),h=this.constrainPanCoords(h),d={left:h[0],top:h[1],width:this.zoomImageFullWidth,height:this.zoomImageFullHeight},0===g.currentZoomLevel?(i.setStyle("transition","none"),this.resizeZoomNode(u,!1)):this.resizeZoomNode(this.getRegionForNode(i),!1),t.on("click",(function(e){g.zoomingIn||(e.preventDefault(),g.detectSlowMoMode(e),g.canZoomIn()?(g.setCursorCoordsFromEvent(e),g.zoomIn(g.cursorCoords)):g.zoomOut())})),e.one("body").append(t),i.setStyle("width",d.width),i.setStyle("height",d.height),e.soon((function(){var o;g.zoomingIn&&(t.removeClass("hidden"),i.setStyle("transition",""),"ontouchstart"in document&&e.use("event-touch",(function(){g.touchHandlers=[],g.touchHandlers.push(e.on("touchstart",(function(e){e.changedTouches.length&&1===e.changedTouches.length&&(g.touching=[e.changedTouches[0].pageX,e.changedTouches[0].pageY])}))),g.touchHandlers.push(e.on("touchmove",(function(e){var o,t,i=e.pageX,n=e.pageY;g.touching&&e.changedTouches.length&&1===e.changedTouches.length&&(i=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY,e.preventDefault(),o=i-g.touching[0],t=n-g.touching[1],g.touching=[i,n],g.panZoomNode([g.currentZoomRegion.left+o,g.currentZoomRegion.top+t]))}))),g.touchHandlers.push(e.on("touchend",(function(e){delete g.touching})))})),t.on("mousemove",g.zoomMouseMoveHandler.bind(g)),g.mouseWheelHandler=(o=g.zoomScrollWheelHandler.bind(g),l="onwheel"in document.createElement("div")?"wheel":"mousewheel",g.zoomNode.getDOMNode().addEventListener(l,o,!1),{detach:function(){g.zoomNode.getDOMNode().removeEventListener(l,o,!1)}}),g.parentViewContainer.addClass("zoomed"),g.resizeZoomNode(d,!0).then((function(){g.zoomingIn&&(g.zoomingIn=!1,g.zoomedIn=!0,i.removeClass("zoom-level-"+g.currentZoomLevel),g.currentZoomLevel+=1,i.addClass("zoom-level-"+g.currentZoomLevel),g.zoomNode.toggleClass("max-zoom-level",!g.canZoomIn()),g.resetSlowMoMode(),g.panZoomNodeToCurrentCoords(),s||i.append('<img src="'+g.sizes.large.url+'" class="zoom-large">'),g.supportsMultiLevelZooming&&!a&&i.append('<img src="'+g.sizes.xlarge.url+'" class="zoom-xlarge">'))})))}))},zoomOut:function(){var o=this,t=this.zoomNode;e.fire("flickr:removeKeyEventScope",this.getZoomKeyScope()),this.detachEventHandlers(),this.resizeZoomNode(this.getRegionForNode(this.get("container"),!0),!0),t.addClass("hiding"),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!0,setTimeout((function(){o.zoomingOut&&t&&t._node&&(o.parentViewContainer.removeClass("zoomed"),t.removeClass("hiding"),t.addClass("hidden"),o.resetSlowMoMode(),setTimeout((function(){o.zoomingOut&&(o.cleanUp(),o.zoomingOut=!1,o.currentZoomLevel=0)}),200))}),this.getZoomTransitionTime()),delete this.pendingCoords,delete this.currentCoords},resizeZoomNode:function(o,t){var i,n,r=this,s=e.config.win.performance&&e.config.win.performance.now;return t?new e.Promise((function(t,a){r.isAnimatingZoom=!0,i=s?e.config.win.performance.now():Date.now(),n=r.currentZoomRegion,e.config.win.requestAnimationFrame((function a(h){var d=(function(a){var h,d=((s?a:Date.now())-i)/r.getZoomTransitionTime();return d>=1?(h=o,r.isAnimatingZoom=!1,e.soon(t)):h={left:n.left+(o.left-n.left)*d,top:n.top+(o.top-n.top)*d,width:n.width+(o.width-n.width)*d,height:n.height+(o.height-n.height)*d},h})(h);(r.zoomingIn||r.zoomingOut)&&(r.resizeZoomNode(d,!1),d!==o&&e.config.win.requestAnimationFrame(a))}))})):(this.currentZoomRegion=o,this.zoomPhotoContainerNode&&this.zoomPhotoContainerNode.setStyle("transform","translate("+o.left+"px, "+o.top+"px) scale("+o.width/this.zoomImageFullWidth+")"),e.Promise.resolve())},zoomMouseMoveHandler:function(e){this.setCursorCoordsFromEvent(e),this.isAnimatingZoom||this.panZoomNodeToCurrentCoords()},zoomScrollWheelHandler:function(e){e.preventDefault();var o=e.wheelDeltaX,t=e.wheelDeltaY;void 0===o&&(o=-e.deltaX||0),void 0===t&&(t=-e.deltaY||0),this.panZoomNode([this.currentZoomRegion.left+o,this.currentZoomRegion.top+t])},getSizes:function(){var e=this.parentViewContainer.one(".main-photo"),o=this.getLargerSize(e.getAttribute("src")),t=this.getLargestSize();return{medium:{url:e.getAttribute("src"),width:parseInt(e.getAttribute("width"),10),height:parseInt(e.getAttribute("height"),10)},large:o,xlarge:o.url===t.url?null:t}},getLargerSize:function(o){var t,i,n,r=0,s=0;return this.appContext.flipper.isFlipped("enable-two-step-zoom")?(o=o.replace(/^https?:/i,""),"o"===(t=this.get("photo").getValue("ascendingSizes"))[t.length-1].key&&t.pop(),e.Array.each(t,(function(e,t){e.url===o&&(r=t),"k"===e.key&&(s=t)})),(i=t[r+1])?(n=i,t[s]&&i.width<t[s].width&&(n=t[s])):n=t[t.length-1],n):this.getLargestSize()},getLargestSize:function(){return this.get("photo").getLargestSize()},getDeteriorationRateForEasing:function(){return.2},getZoomPixelRatio:function(){if(!this.appContext.flipper.isFlipped("enable-two-step-zoom"))return 1;var e,o=this.parentViewContainer.one(".main-photo");return o&&(o=o.getDOMNode()).naturalWidth&&(e=o.naturalWidth/parseInt(o.getAttribute("width"),10))<window.devicePixelRatio?e:window.devicePixelRatio?window.devicePixelRatio:1},getZoomEdgeMargin:function(){return 100},getZoomPanCoordsForCursor:function(e){if(e){var o=this.getZoomEdgeMargin(),t=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],i=[e[0]/t[0],e[1]/t[1]],n=[this.zoomImageFullWidth,this.zoomImageFullHeight],r=[n[0]+2*o,n[1]+2*o];return[i[0]*(t[0]-r[0]),i[1]*(t[1]-r[1])]}},getRegionForNode:function(o,t){var i={left:o.getX()-e.config.win.pageXOffset,top:o.getY()-e.config.win.pageYOffset,width:parseInt(o.getStyle("width"),10),height:parseInt(o.getStyle("height"),10)};return t&&(i.left-=this.getZoomEdgeMargin(),i.top-=this.getZoomEdgeMargin()),i},getZoomTransitionTime:function(){return 200*(this.slowMoMode?10:1)},getZoomKeyScope:function(){return this.name+this._yuid},canZoomIn:function(){return 0===this.currentZoomLevel||this.supportsMultiLevelZooming&&1===this.currentZoomLevel},setCursorCoordsFromEvent:function(o){return this.cursorCoords=[o.pageX-e.config.win.pageXOffset,o.pageY-e.config.win.pageYOffset],this.cursorCoords},panZoomNodeToCurrentCoords:function(){if(this.zoomedIn){var e=this.getZoomPanCoordsForCursor(this.cursorCoords);e&&this.panZoomNode(e)}},panZoomNode:function(e){this.currentZoomRegion.left===e[0]&&this.currentZoomRegion.top===e[1]||(e=this.constrainPanCoords(e),this.currentZoomRegion.left=e[0],this.currentZoomRegion.top=e[1],this.pendingCoords=e)},constrainPanCoords:function(e){var o,t,i=this.getZoomEdgeMargin(),n=[this.appContext.viewportData.getWidth(),this.appContext.viewportData.getHeight()],r=[this.zoomImageFullWidth,this.zoomImageFullHeight],s=[r[0]+2*i,r[1]+2*i];return 0,o=n[0]-r[0]-2*i,0,t=n[1]-r[1]-2*i,e[0]>0?e[0]=0:e[0]<o&&(e[0]=o),e[1]>0?e[1]=0:e[1]<t&&(e[1]=t),r[0]<n[0]&&(e[0]=.5*(n[0]-s[0])),r[1]<n[1]&&(e[1]=.5*(n[1]-s[1])),e},detectSlowMoMode:function(e){e.shiftKey&&(document.getSelection().removeAllRanges(),this.slowMoMode=!0)},resetSlowMoMode:function(){this.slowMoMode=!1},isImageReadyToDisplay:function(e){var o;return!!e&&((o=new Image).src=e,o.complete||o.naturalWidth)},detachEventHandlers:function(){this.zoomNode&&(this.zoomNode.detachAll("mousemove"),this.mouseWheelHandler&&this.mouseWheelHandler.detach(),this.touchHandlers&&(this.touchHandlers.forEach((function(e){e.detach()})),delete this.touchHandlers))},cleanUp:function(){this.zoomNode&&(this.zoomNode.remove(!0),this.zoomedIn=!1,this.zoomingIn=!1,this.zoomingOut=!1,delete this.zoomNode,delete this.zoomPhotoContainerNode,delete this.pendingCoords,delete this.currentCoords,this.panningAnimationHandle.detach())}})}),"@VERSION@",{requires:["flickr-view","better-throttle","flickr-promise","hermes-template-zoom-modal","animation-manager"],optional:["photo-models"],langBundles:["photo-page-scrappy"]});