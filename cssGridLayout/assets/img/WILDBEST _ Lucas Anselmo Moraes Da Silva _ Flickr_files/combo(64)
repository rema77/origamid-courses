YUI.add("hermes-template-photo-card-engagement",(function(n,e){var t=n.Template.Handlebars.revive({1:function(n,e,t,l,a){return" theme-overlay"},3:function(n,e,t,l,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(t,"outlet")||e&&o(e,"outlet")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=e?o(e,"like-engagement-item-view"):e,{name:"outlet",hash:{},data:a,loc:{start:{line:5,column:2},end:{line:5,column:38}}}))+"\n"},5:function(n,e,t,l,a){var o,r=null!=e?e:n.nullContext||{},u=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<span role="button" class="engagement-item fave '+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"isFaved"):o,{name:"if",hash:{},fn:n.program(6,a,0),inverse:n.noop,data:a,loc:{start:{line:7,column:50},end:{line:7,column:99}}}))?o:"")+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"canFave"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(8,a,0),data:a,loc:{start:{line:7,column:99},end:{line:7,column:155}}}))?o:"")+'" tabindex="0">\n\t\t\t<span class="engagement-icon">\n\t\t\t\t<i class="animated-fave-star"></i>\n\t\t\t</span>\n\t\t\t<span class="engagement-count'+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"faveCount"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(10,a,0),data:a,loc:{start:{line:11,column:32},end:{line:11,column:83}}}))?o:"")+'">\n\t\t\t\t'+(null!=(o=u(t,"if").call(r,null!=(o=null!=(o=null!=e?u(e,"photoItem"):e)?u(o,"engagement"):o)?u(o,"faveCount"):o,{name:"if",hash:{},fn:n.program(12,a,0),inverse:n.noop,data:a,loc:{start:{line:12,column:4},end:{line:12,column:96}}}))?o:"")+"\n\t\t\t</span>\n\t\t</span>\n"},6:function(n,e,t,l,a){return" faved"},8:function(n,e,t,l,a){return" can-not-fave"},10:function(n,e,t,l,a){return" empty"},12:function(n,e,t,l,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return n.escapeExpression((r(t,"formatNumber")||e&&r(e,"formatNumber")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=(o=null!=(o=null!=e?r(e,"photoItem"):e)?r(o,"engagement"):o)?r(o,"faveCount"):o,{name:"formatNumber",hash:{},data:a,loc:{start:{line:12,column:42},end:{line:12,column:89}}}))},14:function(n,e,t,l,a){var o,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return n.escapeExpression((r(t,"formatNumber")||e&&r(e,"formatNumber")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=(o=null!=(o=null!=e?r(e,"photoItem"):e)?r(o,"engagement"):o)?r(o,"commentCount"):o,{name:"formatNumber",hash:{},data:a,loc:{start:{line:22,column:44},end:{line:22,column:94}}}))},16:function(n,e,t,l,a){return'\t\t<span role="button" class="engagement-item curate" tabindex="0">\n\t\t\t<span class="engagement-icon">\n\t\t\t\t<svg class="icon icon-curate"><use xlink:href="#icon-curate"></use></svg>\n\t\t\t</span>\n\t\t</span>\n'},18:function(n,e,t,l,a){var o=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t"+n.escapeExpression((o(t,"outlet")||e&&o(e,"outlet")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=e?o(e,"fluid-share-photo-view"):e,{name:"outlet",hash:{},data:a,loc:{start:{line:33,column:2},end:{line:33,column:35}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(n,e,t,l,a){var o,r=null!=e?e:n.nullContext||{},u=n.hooks.helperMissing,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<div class="photo-card-engagement\n\t'+(null!=(o=(i(t,"ifCond")||e&&i(e,"ifCond")||u).call(r,null!=e?i(e,"theme"):e,"===","overlay",{name:"ifCond",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:2,column:1},end:{line:2,column:59}}}))?o:"")+'">\n\n'+(null!=(o=(i(t,"isFlipped")||e&&i(e,"isFlipped")||u).call(r,"enable-likes",{name:"isFlipped",hash:{},fn:n.program(3,a,0),inverse:n.program(5,a,0),data:a,loc:{start:{line:4,column:1},end:{line:15,column:15}}}))?o:"")+'\t\n\t<span role="button" class="engagement-item comment" tabindex="0">\n\t\t<span class="engagement-icon">\n\t\t\t<svg class="icon icon-comment_hollow"><use xlink:href="#icon-comment_hollow"></use></svg>\n\t\t</span>\n\t\t<span class="engagement-count'+(null!=(o=i(t,"if").call(r,null!=(o=null!=(o=null!=e?i(e,"photoItem"):e)?i(o,"engagement"):o)?i(o,"commentCount"):o,{name:"if",hash:{},fn:n.noop,inverse:n.program(10,a,0),data:a,loc:{start:{line:21,column:31},end:{line:21,column:85}}}))?o:"")+'">\n\t\t\t'+(null!=(o=i(t,"if").call(r,null!=(o=null!=(o=null!=e?i(e,"photoItem"):e)?i(o,"engagement"):o)?i(o,"commentCount"):o,{name:"if",hash:{},fn:n.program(14,a,0),inverse:n.noop,data:a,loc:{start:{line:22,column:3},end:{line:22,column:101}}}))?o:"")+"\n\t\t</span>\n\t</span>\n"+(null!=(o=i(t,"if").call(r,null!=e?i(e,"displayCurate"):e,{name:"if",hash:{},fn:n.program(16,a,0),inverse:n.noop,data:a,loc:{start:{line:25,column:1},end:{line:31,column:8}}}))?o:"")+(null!=(o=i(t,"if").call(r,null!=e?i(e,"displayShare"):e,{name:"if",hash:{},fn:n.program(18,a,0),inverse:n.noop,data:a,loc:{start:{line:32,column:1},end:{line:34,column:8}}}))?o:"")+"</div>\n"},useData:!0}),l={};n.Array.each([],(function(e){var t=n.Template.get("hermes/"+e);t&&(l[e]=t)})),n.Template.register("hermes/photo-card-engagement",(function(e,a){return(a=a||{}).partials=a.partials?n.merge(l,a.partials):l,t(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-add-to-stuff-view",(function(t,n){var l=t.Template.Handlebars.revive({1:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t<li role="button" class="tab-item album-tab selected" data-tab="album" tabindex="0">\n\t\t\t\t\t<span>'+t.escapeExpression((o(l,"intlMessage")||n&&o(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlName:"common.ALBUMS"},data:a,loc:{start:{line:7,column:11},end:{line:7,column:51}}}))+"</span>\n\t\t\t\t</li>\n"},3:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t<li role="button" class="tab-item gallery-tab" data-tab="gallery" tabindex="0">\n\t\t\t\t\t<span>'+t.escapeExpression((o(l,"intlMessage")||n&&o(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlName:"common.GALLERIES"},data:a,loc:{start:{line:12,column:11},end:{line:12,column:54}}}))+"</span>\n\t\t\t\t</li>\n"},5:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t<li role="button" class="tab-item group-tab" data-tab="group" tabindex="0">\n\t\t\t\t\t<span>'+t.escapeExpression((o(l,"intlMessage")||n&&o(n,"intlMessage")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},{name:"intlMessage",hash:{intlName:"common.GROUPS"},data:a,loc:{start:{line:17,column:11},end:{line:17,column:51}}}))+"</span>\n\t\t\t\t</li>\n"},7:function(t,n,l,e,a){var o=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,i=t.escapeExpression,r=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t<div class="tab-container selected" data-tab="album">\n\t\t\t\t'+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"album-selection-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:27,column:4},end:{line:27,column:35}}}))+"\n\t\t\t\t"+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"album-creation-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:28,column:4},end:{line:28,column:34}}}))+"\n\t\t\t</div>\n"},9:function(t,n,l,e,a){var o=null!=n?n:t.nullContext||{},s=t.hooks.helperMissing,i=t.escapeExpression,r=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t<div class="tab-container" data-tab="gallery">\n\t\t\t\t'+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"gallery-selection-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:34,column:4},end:{line:34,column:37}}}))+"\n\t\t\t\t"+i((r(l,"outlet")||n&&r(n,"outlet")||s).call(o,null!=n?r(n,"gallery-creation-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:35,column:4},end:{line:35,column:36}}}))+"\n\t\t\t</div>\n"},11:function(t,n,l,e,a){var o,s=null!=n?n:t.nullContext||{},i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t<div class="tab-container" data-tab="group">\n\t\t\t\t'+t.escapeExpression((i(l,"outlet")||n&&i(n,"outlet")||t.hooks.helperMissing).call(s,null!=n?i(n,"group-selection-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:41,column:4},end:{line:41,column:35}}}))+"\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"inlineGroupCreation"):n,{name:"if",hash:{},fn:t.program(12,a,0),inverse:t.noop,data:a,loc:{start:{line:42,column:4},end:{line:44,column:11}}}))?o:"")+"\t\t\t</div>\n"},12:function(t,n,l,e,a){var o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return"\t\t\t\t\t"+t.escapeExpression((o(l,"outlet")||n&&o(n,"outlet")||t.hooks.helperMissing).call(null!=n?n:t.nullContext||{},null!=n?o(n,"group-creation-view"):n,{name:"outlet",hash:{},data:a,loc:{start:{line:43,column:5},end:{line:43,column:35}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(t,n,l,e,a){var o,s=null!=n?n:t.nullContext||{},i=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<div class="add-to-stuff-container" tabindex="-1">\n\t<div class="nav">\n\t\t<div class="list-label">'+t.escapeExpression((i(l,"intlMessage")||n&&i(n,"intlMessage")||t.hooks.helperMissing).call(s,{name:"intlMessage",hash:{intlName:"add-to-stuff.ADD_TO_LABEL"},data:a,loc:{start:{line:3,column:26},end:{line:3,column:78}}}))+"</div>\n\t\t<ul>\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showAlbums"):n,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:5,column:3},end:{line:9,column:10}}}))?o:"")+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGalleries"):n,{name:"if",hash:{},fn:t.program(3,a,0),inverse:t.noop,data:a,loc:{start:{line:10,column:3},end:{line:14,column:10}}}))?o:"")+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGroups"):n,{name:"if",hash:{},fn:t.program(5,a,0),inverse:t.noop,data:a,loc:{start:{line:15,column:3},end:{line:19,column:10}}}))?o:"")+'\t\t</ul>\n\t\t<svg class="close-x-button"><use xlink:href="#icon-close"></use></svg>\n\t</div>\n\t<div class="tab-content-container">\n\n'+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showAlbums"):n,{name:"if",hash:{},fn:t.program(7,a,0),inverse:t.noop,data:a,loc:{start:{line:25,column:2},end:{line:30,column:9}}}))?o:"")+"\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGalleries"):n,{name:"if",hash:{},fn:t.program(9,a,0),inverse:t.noop,data:a,loc:{start:{line:32,column:2},end:{line:37,column:9}}}))?o:"")+"\n"+(null!=(o=i(l,"if").call(s,null!=n?i(n,"showGroups"):n,{name:"if",hash:{},fn:t.program(11,a,0),inverse:t.noop,data:a,loc:{start:{line:39,column:2},end:{line:46,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),e={};t.Array.each([],(function(n){var l=t.Template.get("hermes/"+n);l&&(e[n]=l)})),t.Template.register("hermes/add-to-stuff-view",(function(n,a){return(a=a||{}).partials=a.partials?t.merge(e,a.partials):e,l(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("add-to-stuff-view",(function(e){e.namespace("Views")[this.name]=e.Base.create("add-to-stuff-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this.params=e,this.params.showAlbums=!1!==this.params.showAlbums,this.params.showGalleries=!1!==this.params.showGalleries,this.params.showGroups=!1!==this.params.showGroups,this.params.initialTab=this.params.initialTab||"album",this.initialTab=this.params.initialTab,this.params.inlineGroupCreation=this.params.inlineGroupCreation||!1,this.params.inlineAlbumCreation=void 0===this.params.inlineAlbumCreation||this.params.inlineAlbumCreation,this.params.inlineGalleryCreation=void 0===this.params.inlineGalleryCreation||this.params.inlineGalleryCreation,this.modalSizeConfig=this.params.modalSizeConfig||null,this.params.inlineCreation={album:this.params.inlineAlbumCreation,gallery:this.params.inlineGalleryCreation,group:this.params.inlineGroupCreation},this.currentTabName="",this},subviewConfig:{"album-selection-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-selection-view"]},"gallery-selection-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-selection-view"]},"group-selection-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-selection-view"]},"album-creation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-creation-view","hidden"]},"gallery-creation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-creation-view","hidden"]},"group-creation-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!1,additionalViewClasses:["stuff-creation-view","hidden"]}},buildContainer:function(){return this.setContainerWithTemplate("add-to-stuff-view",{showAlbums:this.params.showAlbums,showGalleries:this.params.showGalleries,showGroups:this.params.showGroups,inlineGroupCreation:this.params.inlineGroupCreation}),this},activate:function(){var e=this,t=this.get("container");return this.nav=t.one(".nav"),this.firstTab=t.one(".tab-item"),["album","gallery","group"].forEach((function(t){e.subviews[t+"-selection-view"].on("showCreate",(function(){e.showCreate(t)})),e.setupCreationEvents(e.subviews[t+"-creation-view"])})),this.registerEventHandler(this.nav.one("ul").on(["click","key"],this.handleNavClick.bind(this),"down:13")),this.registerEventHandler(this.nav.one(".close-x-button").on("click",this.handleCloseClick.bind(this))),this.switchTabs(this.initialTab),this.registerEventHandler(t.on("keydown",this.handleKeyPress.bind(this))),this.registerEventHandler(t.delegate("focus",this.handleFocus.bind(this))),this},showCreate:function(e){if(this.params.inlineCreation[e])if(this.subviews[e+"-selection-view"].get("container").addClass("hidden"),this.subviews[e+"-creation-view"].get("container").removeClass("hidden"),this.nav.hide(),this.subviews[e+"-creation-view"].focusInitial(),this.modalSizeConfig){const{creationConfig:e}=this.modalSizeConfig;if(!e)return;this.fire("updateConfig",{config:e})}else this.fire("contentSizeChanged");else this.showCreateModal(e)},showCreateModal:function(t){let i=new e.CurationHelper(this.appContext,{view:this});i.showCreationModal({viewName:t+"-creation-view",overlayClassList:"over-droparound-under-modal",customConfig:{photoId:this.params.photoId,inlineCreation:this.params.inlineCreation[t]}}),this.setupCreationEvents(i.creationView)},setupCreationEvents:function(e){var t=this,i=e.curationType;e.on("cancel",(function(){t.params.inlineCreation[i]&&t.hideCreate(i)})),e.on("readyToClose",(function(){t.params.inlineCreation[i]&&t.fire("readyToClose")})),e.on("created",(function(e){t.params.inlineCreation[i]&&t.hideCreate(i),t.params.dismissOnCreate?t.fire("readyToClose"):e.curation&&t.subviews[i+"-selection-view"].reload()})),e.on("contentSizeChanged",(function(e){t.fire("contentSizeChanged")}))},hideCreate:function(e){if(this.subviews[e+"-selection-view"].get("container").removeClass("hidden"),this.subviews[e+"-creation-view"].get("container").addClass("hidden"),this.nav.show(),this.subviews[e+"-selection-view"].focusInitial(),this.modalSizeConfig){const{selectionConfig:e}=this.modalSizeConfig;if(!e)return;this.fire("updateConfig",{config:e})}else this.fire("contentSizeChanged")},handleNavClick:function(e){var t;e.stopPropagation(),e.preventDefault(),e.target&&(t=e.target.ancestor("li",!0))&&this.switchTabs(t.get("dataset").tab)},switchTabs:function(e){var t=this,i=this.nav.one(".tab-item.selected"),n=this.nav.one(".tab-item[data-tab="+e+"]"),a=i?i.get("dataset").tab:null,s=this.get("container").one(".tab-content-container"),r=s.one(".tab-container[data-tab="+a+"]"),o=s.one(".tab-container[data-tab="+e+"]"),l=o.one(".stuff-selection-search");this.currentTabName=e,i&&(i.removeClass("selected"),r.removeClass("selected")),n.addClass("selected"),o.addClass("selected"),setTimeout((function(){t.fire("contentSizeChanged")}),0),setTimeout((function(){l.focus()}),10)},handleCloseClick:function(e){this.fire("readyToClose")},handleKeyPress:function(t){var i=t.keyCode,n=t.shiftKey,a=this.get("container").one(".tab-container.selected"),s=a.one(".done-button")||a.one(".create-button");9===i&&(n&&this.focusedItem===this.firstTab?(t.preventDefault(),s.focus()):n||this.focusedItem!==s||(t.preventDefault(),this.firstTab.focus())),e.fire("addToStuff:keyPressed",{curationType:this.currentTabName,evt:t})},handleFocus:function(e){this.focusedItem=e.target},onSubviewEvent:function(e,t){"readyToClose"===t[0].eventName&&this.fire("readyToClose")}},{ATTRS:{dismissOnCreate:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnCreateAlbum:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnCreateGallery:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnCreateGroup:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelect:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelectAlbum:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelectGallery:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},dismissOnSelectGroup:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},inlineGroupCreation:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}},useLargeLayout:{value:!1,validator:function(t,i){return e.AttributeHelpers.validateBoolean(t)},setter:function(t,i){return e.AttributeHelpers.coerceBoolean(t)}}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-add-to-stuff-view"],langBundles:["common","more-menu-view","add-to-stuff"]});YUI.add("hermes-lang-more-menu-view",(function(e,t){e.Intl.add("hermes/more-menu-view","en-US",{ADD_TO_ALBUM:[{type:0,value:"Add to album"}],ADD_TO_SET:[{type:0,value:"Add to set"}],ADD_TO_GROUP:[{type:0,value:"Add to group"}],INVITE_TO_GROUP:[{type:0,value:"Invite to group"}],ADD_TO_GALLERY:[{type:0,value:"Add to Gallery"}],ADD_TO_REMOVE_FROM_ALBUM:[{type:0,value:"Add to / remove from album"}],ADD_TO_REMOVE_FROM_SET:[{type:0,value:"Add to / remove from set"}],ADD_TO_REMOVE_FROM_GALLERY:[{type:0,value:"Add to / remove from gallery"}],ADD_TO_REMOVE_FROM_GROUP:[{type:0,value:"Add to / remove from group"}],INVITE_TO_REMOVE_FROM_GROUP:[{type:0,value:"Invite to / remove from group"}],FLAG_PHOTO:[{type:0,value:"Flag this Photo?"}],FLAG:[{type:0,value:"Flag photo"}],MARK_FOR_REVIEW:[{type:0,value:"Mark for review"}],PHOTO_HAS_BEEN_FLAGGED:[{type:0,value:"This photo has been flagged"}],PROBLEM_FLAGGING:[{type:0,value:"There was a problem flagging this photo"}],ADD_PHOTO_TO_GROUP:[{type:0,value:"Add this photo to a group"}],INVITE_PHOTO_TO_GROUP:[{type:0,value:"Invite this photo to a group"}],ADD_PHOTO_TO_GALLERY:[{type:0,value:"Add this photo to a gallery"}],ADD_PHOTO_TO_ALBUM:[{type:0,value:"Add photo to an album"}],ADD_PHOTO_TO_SET:[{type:0,value:"Add photo to a set"}],NO_GROUPS:[{type:0,value:'You’re not in any groups! <a href="//www.flickr.com/groups">Why not join one</a>?'}],NO_GROUPS2:[{type:0,value:'You’re not in any groups! <a href="'},{type:1,value:"url"},{type:0,value:'">Why not join one</a>?'}],NO_GROUPS_ADMIN:[{type:0,value:'You’re not an admin of any groups! <a href="//www.flickr.com/groups_create.gne">Why not create one</a>?'}],NO_GROUPS_ADMIN2:[{type:0,value:'You’re not an admin of any groups! <a href="'},{type:1,value:"url"},{type:0,value:'">Why not create one</a>?'}],NO_GALLERIES:[{type:0,value:"No galleries"}],NO_ALBUMS:[{type:0,value:"No albums"}],NO_SETS:[{type:0,value:"No sets"}],LOADING_GROUPS:[{type:0,value:"Loading groups..."}],LOADING_GALLERIES:[{type:0,value:"Loading galleries..."}],LOADING_ALBUMS:[{type:0,value:"Loading albums..."}],LOADING_SETS:[{type:0,value:"Loading sets..."}],SEARCH_GROUPS_PLACEHOLDER:[{type:0,value:"search groups"}],SEARCH_GALLERIES_PLACEHOLDER:[{type:0,value:"search galleries"}],SEARCH_ALBUMS_PLACEHOLDER:[{type:0,value:"search albums"}],SEARCH_SETS_PLACEHOLDER:[{type:0,value:"search sets"}],GALLERY_TITLE_PLACEHOLDER:[{type:0,value:"gallery title (required)"}],GALLERY_DESCRIPTION_PLACEHOLDER:[{type:0,value:"gallery description"}],ALBUM_TITLE_PLACEHOLDER:[{type:0,value:"Album title"}],SET_TITLE_PLACEHOLDER:[{type:0,value:"Set title"}],DESCRIPTION_PLACEHOLDER:[{type:0,value:"Description (optional)"}],CREATE_NEW_GALLERY:[{type:0,value:"Create a new gallery"}],CREATE_NEW_ALBUM:[{type:0,value:"Create new album"}],CREATE_NEW_SET:[{type:0,value:"Create new set"}],CREATE_GALLERY:[{type:0,value:"Create gallery"}],CREATE_SET:[{type:0,value:"Create set"}],CREATE_ALBUM:[{type:0,value:"Create album"}],BACK_TO_GALLERIES:[{type:0,value:"Back to current galleries"}],BACK_TO_ALBUMS:[{type:0,value:"Back to current albums"}],BACK_TO_SETS:[{type:0,value:"Back to current sets"}],GROUP_PRIVACY_WARNING:[{type:0,value:"This photo is private. If you add it to a group, the members of that group will be able to view, comment on, tag and add notes to it."}],DONT_SHOW_ME_AGAIN:[{type:0,value:"Don’t show me this message again"}],DELETE_PHOTO:[{type:0,value:"Delete Photo"}],PERMANENTLY_DELETE_PHOTO:[{type:0,value:"Permanently Delete This Photo"}],PROBLEM_DELETING:[{type:0,value:"There was a problem deleting this photo"}],ADD_LOCATION:[{type:0,value:"Add Location"}],ADD_PEOPLE:[{type:0,value:"Add people"}],DOWNLOAD_ALL_SIZES:[{type:0,value:"Download / All sizes"}],EDIT_DATES:[{type:0,value:"Edit dates"}],EDIT_TITLE_TAGS_DATES:[{type:0,value:"Edit title, tags, and dates"}],ROTATE:[{type:0,value:"Rotate"}],REPLACE:[{type:0,value:"Replace"}],VIDEOS_NO_EDIT_IN_AVIARY:[{type:0,value:"Videos cannot be edited in Aviary"}],EDIT_IN_AVIARY:[{type:0,value:"Edit in Aviary"}],COMMENTING:[{type:0,value:"Commenting"}],REPORT_ABUSE:[{type:0,value:"Report abuse"}],FEEDBACK:[{type:0,value:"Feedback"}],PEOPLE_TAGGING:[{type:0,value:"People tagging!"}],OPEN_IN_ORGANIZER:[{type:0,value:"Open In Organizr"}],MORE_ACTIONS:[{type:0,value:"More Actions"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-add-to-stuff",(function(e,t){e.Intl.add("hermes/add-to-stuff","en-US",{ADD_TO_LABEL:[{type:0,value:"Add to:"}],NO_RESULTS:[{type:0,value:"No results :("}],NO_GROUPS:[{type:0,value:"No groups"}],DONT_ADMIN_ANY_GROUPS:[{type:0,value:"You don’t admin any groups."}],LEARN_TO_RUN_GROUP:[{type:0,value:"Learn how to run a group"}],HAVENT_JOINED_ANY_GROUPS:[{type:0,value:"You haven’t joined any groups."}],DISCOVER_GROUPS:[{type:0,value:"Discover groups"}],PENDING_APPROVAL:[{type:0,value:"Pending approval"}],CURATIONS_CREATE_NEW_GROUP:[{type:0,value:"Create new group"}],CURATIONS_CREATE_A_NEW_GROUP:[{type:0,value:"Create a new group"}],CURATIONS_CREATE_NEW_ALBUM:[{type:0,value:"Create new album"}],CURATIONS_CREATE_A_NEW_ALBUM:[{type:0,value:"Create a new album"}],CURATIONS_CREATE_NEW_GALLERY:[{type:0,value:"Create new gallery"}],CURATIONS_CREATE_A_NEW_GALLERY:[{type:0,value:"Create a new gallery"}],ABOUT_YOUR_GROUP:[{type:0,value:"About your group"}],COULDNT_ADD_TO_GROUP:[{type:0,value:"Couldn’t add to group."}],COULDNT_ACCEPT_GROUP_INVITE:[{type:0,value:"Couldn’t accept invitation to group."}],COULDNT_INVITE_TO_GROUP:[{type:0,value:"Couldn’t invite to group."}],COULDNT_CANCEL_GROUP_INVITE:[{type:0,value:"Couldn’t cancel group invitation."}],COULDNT_REMOVE_FROM_GROUP:[{type:0,value:"Couldn’t remove from group"}],APPROVE:[{type:0,value:"Approve"}],CURATIONS_ALBUM_NAME:[{type:0,value:"Album name"}],CURATIONS_GALLERY_NAME:[{type:0,value:"Gallery name"}],CURATIONS_DESCRIPTION_OPTIONAL:[{type:0,value:"Description (optional)"}],PLEASE_ENTER_GROUP_NAME:[{type:0,value:"Please enter a group name."}],PLEASE_ENTER_ALBUM_NAME:[{type:0,value:"Please enter an album name."}],PLEASE_ENTER_GALLERY_NAME:[{type:0,value:"Please enter a gallery name."}],COULDNT_SAVE_GROUP:[{type:0,value:"Couldn’t save group. Please try again."}],COULDNT_SAVE_ALBUM:[{type:0,value:"Couldn’t save album. Please try again."}],COULDNT_SAVE_GALLERY:[{type:0,value:"Couldn’t save gallery. Please try again."}],GROUP_PRIVATE_PHOTO_WARNING:[{type:0,value:"This photo is private. If you add it to a group, the members of that group will be able to view, comment on, tag, and add notes to it."}],CONFIRM_GROUP_PRIVATE_PHOTO_ADD:[{type:0,value:"Ok, add to groups anyway"}],DONT_SHOW_MESSAGE_AGAIN:[{type:0,value:"Don’t show me this message again"}],COULDNT_ADD_TO_GROUP_TOO_MANY:[{type:0,value:"Photo in maximum number of groups"}],COULDNT_ADD_TO_GROUP_TOO_MANY_NON_PRO:[{type:0,value:"Photo in maximum number of groups for non-pro account"}],YOU_ALREADY_ADDED_MAXIMUM_TO_GROUP:[{type:0,value:"You have already added the maximum number of photos to this group"}],COULDNT_ADD_PHOTO:[{type:0,value:"Oh no! We couldn’t add the "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photo"}]},video:{value:[{type:0,value:"video"}]},other:{value:[{type:0,value:"photo"}]}}},{type:0,value:"."}],ONLY_PUBLIC_PHOTOS_ALLOWED:[{type:0,value:"Oops! Only public "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photos"}]},video:{value:[{type:0,value:"videos"}]},other:{value:[{type:0,value:"photos"}]}}},{type:0,value:" are allowed."}],GALLERY_FULL:[{type:0,value:"Oops! This gallery is full."}],ONLY_SAFE_PHOTOS_ALLOWED:[{type:0,value:"Uh oh! Only "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photos"}]},video:{value:[{type:0,value:"videos"}]},other:{value:[{type:0,value:"photos"}]}}},{type:0,value:" marked “Safe” are allowed."}],YOUVE_BEEN_BLOCKED:[{type:0,value:"You’ve been blocked by the photo owner."}],OWNER_DOESNT_ALLOW_IN_GALLERIES:[{type:0,value:"Oh no! The "},{type:5,value:"mediaType",options:{photo:{value:[{type:0,value:"photo"}]},video:{value:[{type:0,value:"video"}]},other:{value:[{type:0,value:"photo"}]}}},{type:0,value:" owner doesn’t allow their stuff in galleries."}],GROUP_LIMIT_REACHED_PER_MONTH:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" per month."}],GROUP_LIMIT_REACHED_PER_WEEK:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" per week."}],GROUP_LIMIT_REACHED_PER_DAY:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" per day."}],GROUP_LIMIT_REACHED:[{type:0,value:"You reached the group’s posting limit of "},{type:1,value:"countString"},{type:0,value:" "},{type:6,value:"count",options:{one:{value:[{type:0,value:"item"}]},other:{value:[{type:0,value:"items"}]}},offset:0,pluralType:"cardinal"},{type:0,value:"."}],GROUP_DISABLED_POSTING:[{type:0,value:"Posting to this group is disabled."}],GROUP_ONLY_ACCEPTS_PHOTOS:[{type:0,value:"This group only accepts photos."}],GROUP_ONLY_ACCEPTS_VIDEOS:[{type:0,value:"This group only accepts videos."}],GROUP_VIDEO_STILL_PROCESSING:[{type:0,value:"This video is still being processed."}],GROUP_DOESNT_ALLOW_PHOTO_VIDEO:[{type:0,value:"This group does not allow Photo/Video content types."}],GROUP_DOESNT_ALLOW_SCREENSHOTS:[{type:0,value:"This group does not allow screenshots."}],GROUP_DOESNT_ALLOW_ART:[{type:0,value:"This group does not allow Art/Illustration content types."}],GROUP_DOESNT_ALLOW_RESTRICTED:[{type:0,value:"This group does not allow restricted content."}],GROUP_ONLY_ALLOWS_SAFE:[{type:0,value:"This group only allows safe content."}],GROUP_REQUIRES_GEOTAG:[{type:0,value:"This group only allows geotagged items."}],ALREADY_GROUP_WITH_NAME:[{type:0,value:"There is already a group with this name."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-stuff-creation-view",(function(e,n){var t=e.Template.Handlebars.revive({1:function(e,n,t,l,a){return"large"},3:function(e,n,t,l,a){return'<div class="error-message create-error hidden"></div>'},compiler:[8,">= 4.3.0"],main:function(e,n,t,l,a){var i,o,r=null!=n?n:e.nullContext||{},c=e.hooks.helperMissing,s="function",u=e.escapeExpression,d=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]};return'<div class="stuff-creation-container '+(null!=(i=d(t,"if").call(r,null!=n?d(n,"isLarge"):n,{name:"if",hash:{},fn:e.program(1,a,0),inverse:e.noop,data:a,loc:{start:{line:1,column:37},end:{line:1,column:64}}}))?i:"")+'">\n\t<header>\n\t\t<h1 class="stuff-creation-heading">'+u(typeof(o=null!=(o=d(t,"heading")||(null!=n?d(n,"heading"):n))?o:c)===s?o.call(r,{name:"heading",hash:{},data:a,loc:{start:{line:3,column:37},end:{line:3,column:48}}}):o)+'</h1>\n\t\t<svg class="close-x-button"><use xlink:href="#icon-close"></use></svg>\n\t</header>\n\t<div class="input-item title-input-item">\n\t\t<input class="input-field stuff-creation-title" type="text" placeholder="'+u(typeof(o=null!=(o=d(t,"placeholderTitle")||(null!=n?d(n,"placeholderTitle"):n))?o:c)===s?o.call(r,{name:"placeholderTitle",hash:{},data:a,loc:{start:{line:7,column:75},end:{line:7,column:95}}}):o)+'">\n\t\t<div class="error-message title-error"></div>\n\t</div>\n\t<textarea class="input-field stuff-creation-description" placeholder="'+u(typeof(o=null!=(o=d(t,"placeholderDescription")||(null!=n?d(n,"placeholderDescription"):n))?o:c)===s?o.call(r,{name:"placeholderDescription",hash:{},data:a,loc:{start:{line:10,column:71},end:{line:10,column:97}}}):o)+'"></textarea>\n\t<div class="create-footer">\n\t\t'+(null!=(i=d(t,"if").call(r,null!=n?d(n,"isLarge"):n,{name:"if",hash:{},fn:e.noop,inverse:e.program(3,a,0),data:a,loc:{start:{line:12,column:2},end:{line:12,column:77}}}))?i:"")+'\n\t\t<div class="buttons">\n\t\t\t'+(null!=(i=d(t,"if").call(r,null!=n?d(n,"isLarge"):n,{name:"if",hash:{},fn:e.program(3,a,0),inverse:e.noop,data:a,loc:{start:{line:14,column:3},end:{line:14,column:78}}}))?i:"")+'\n\t\t\t<button class="alt button mini button-cancel">'+u(typeof(o=null!=(o=d(t,"cancelText")||(null!=n?d(n,"cancelText"):n))?o:c)===s?o.call(r,{name:"cancelText",hash:{},data:a,loc:{start:{line:15,column:49},end:{line:15,column:63}}}):o)+'</button>\n\t\t\t<button class="button mini button-action">'+u(typeof(o=null!=(o=d(t,"actionText")||(null!=n?d(n,"actionText"):n))?o:c)===s?o.call(r,{name:"actionText",hash:{},data:a,loc:{start:{line:16,column:45},end:{line:16,column:59}}}):o)+"</button>\n\t\t</div>\n\t</div>\n</div>\n"},useData:!0}),l={};e.Array.each([],(function(n){var t=e.Template.get("hermes/"+n);t&&(l[n]=t)})),e.Template.register("hermes/stuff-creation-view",(function(n,a){return(a=a||{}).partials=a.partials?e.merge(l,a.partials):l,t(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("stuff-creation-view",(function(t,e){t.namespace("Views")[this.name]=t.Base.create("stuff-creation-view",t.FlickrView,[],{initializer:function(t){return this.params=t,this.heading=t.heading,this.placeholderTitle=t.placeholderTitle,this.placeholderDescription=t.placeholderDescription,this.cancelText=t.cancelText,this.actionText=t.actionText,this.inlineCreation=t.inlineCreation,this},buildContainer:function(){return this.setContainerWithTemplate("stuff-creation-view",{heading:this.heading,placeholderTitle:this.placeholderTitle,placeholderDescription:this.placeholderDescription,cancelText:this.cancelText,actionText:this.actionText,isLarge:this.params.useLargeLayout}),this},activate:function(){return this.isCreating=!1,this},showError:function(t,e,i){i&&t.set("text",i),e?t.removeClass("hidden"):t.addClass("hidden")},showTitleError:function(t,e){this.titleItemNode.toggleClass("error",t),e&&this.titleErrorNode.set("text",e)},destructor:function(){this.closeTimer&&clearTimeout(this.closeTimer)},resetView:function(){this.buildContainer(),this.activate()},createCuration:function(){var e=this;return this.isCreating?t.Promise.reject():(this.isCreating=!0,this.actionButton.setAttribute("disabled"),this.createNewAndAddPhoto().then((function(t){return e.isCreating=!1,e.actionButton.removeAttribute("disabled"),t})).catch((function(t){throw e.isCreating=!1,e.actionButton.removeAttribute("disabled"),t})))},focusInitial:function(){}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-stuff-creation-view"]});YUI.add("album-creation-view",(function(e,t){var o=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("album-creation-view",e.Views["stuff-creation-view"],[],{langBundles:this.details.langBundles,initializer:function(e){return e.heading=this.intlMessage({intlName:"add-to-stuff.CURATIONS_CREATE_A_NEW_ALBUM"}),e.placeholderTitle=this.intlMessage({intlName:"add-to-stuff.CURATIONS_ALBUM_NAME"}),e.placeholderDescription=this.intlMessage({intlName:"add-to-stuff.CURATIONS_DESCRIPTION_OPTIONAL"}),e.cancelText=this.intlMessage({intlName:"common.CANCEL"}),e.actionText=this.intlMessage({intlName:"global-nav.CREATE"}),this.photoId=e.photoId,this.dismissOnCreate=e.dismissOnCreateAlbum,this.curationType="album",this.photoIds=e.photoIds,this.titleError=this.intlMessage({intlName:"add-to-stuff.PLEASE_ENTER_ALBUM_NAME"}),this.createError=this.intlMessage({intlName:"add-to-stuff.COULDNT_SAVE_ALBUM"}),this.constructor.superclass.initializer.call(this,e)},activate:function(){var e=this.get("container");this.titleItemNode=e.one(".input-item.title-input-item"),this.titleErrorNode=e.one(".error-message.title-error"),this.createErrorNode=e.one(".error-message.create-error"),this.titleNode=e.one(".stuff-creation-title"),this.descriptionNode=e.one(".stuff-creation-description"),this.cancelButton=e.one(".button-cancel"),this.actionButton=e.one(".button-action"),this.closeButton=e.one(".close-x-button"),this.setupEvents(),this.constructor.superclass.activate.call(this,this.params)},setupEvents:function(){var e=this;this.get("container");this.registerEventHandler(this.titleNode.on("keyup",(function(){e.titleNode.get("value")&&e.showTitleError(!1)}))),this.registerEventHandler(this.cancelButton.on("click",(function(){e.fire("cancel"),e.resetView()}))),this.registerEventHandler(this.closeButton.on("click",(function(){e.fire("readyToClose")}))),this.registerEventHandler(this.actionButton.on("click",(function(){e.createCuration()})))},createNewAndAddPhoto:function(){var t,i=this,s=!!this.photoIds,n=this.titleNode.get("value"),r=this.descriptionNode.get("value");return n?(t={photoID:s?this.photoIds[0]:this.photoId,title:n,description:r,isMultiplePhotos:s,numberOfPhotosSelected:i.params.numberOfPhotosSelected,numberOfVideosSelected:i.params.numberOfVideosSelected},this.appContext.getModelRegistry("set-models").then((function(e){return i.albumsModel=e,e.remote.create(t,i.appContext)})).then((function(e){return s&&i.photoIds.slice(1).length>0?i.addPhotos(e.getValue("id"),i.photoIds).then((function(){return e})):e})).then((function(t){if(i.titleNode.set("value",""),i.descriptionNode.set("value",""),i.fire("created",{type:i.curationType,curation:t}),e.Snowplough){var o={id:t.id,photoIds:i.photoIds},s=e.Snowplough.getAlbumContext(o);e.Snowplough.sendStructuredEvent({category:"album",action:"created"},s)}return i.params.inlineCreation?i.resetView():i.fire("readyToClose"),t})).catch((function(e){throw o.error("Error handling photo addition after album creation",{err:e}),e}))):(i.showTitleError(!0,i.titleError),e.Promise.reject({message:i.titleError}))},addPhotos:function(t,o){for(var i=this,s=[],n=[],r=0;r<o.length;r+=500)s.push(o.slice(r,r+500<o.length?r+500:o.length));return s.forEach((function(e,o){n.push(i.albumsModel.remote.addPhoto({photoID:e.join(","),isMultiplePhotos:!0,photosSelectedIds:i.params.photosSelectedIds,videosSelectedIds:i.params.videosSelectedIds,numberOfPhotosSelected:i.params.numberOfPhotosSelected,numberOfVideosSelected:i.params.numberOfVideosSelected,setID:t,updateItemCounts:0===o},this.appContext))})),e.Promise.all(n).then((function(e){return e&&e[0]?e[0].setModel:null}))},focusInitial:function(){this.titleNode&&this.titleNode.focus()}})}),"@VERSION@",{requires:["flickr-view","stuff-creation-view"],optionalRequires:["hermes-core"],optional:["set-models"],langBundles:["more-menu-view","common","global-nav","add-to-stuff"]});