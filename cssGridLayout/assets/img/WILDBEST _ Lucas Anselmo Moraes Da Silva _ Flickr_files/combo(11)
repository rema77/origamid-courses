YUI.add("flickr-photos-getHtmlMeta-fetcher",(function(e,t){"use strict";e.namespace("ModelFetchers")["flickr-photos-getHtmlMeta"]={run:function(o,r){var s={photo_id:o.id},a=this;return e.Promise.all([r.callAPI("flickr.photos.getHtmlMeta",s),r.getModelRegistry("photo-head-meta-models")]).then((function(e){return a._processResponse(e,o)}),e.FetcherErrorLogger(t))},_processResponse:function(t,o){var r,s=t[0],a=t[1];s&&s.HTMLMETA&&(r=e.APIHelper.response.parsePhotoMeta(s),a.addOrUpdate(r))}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-head-meta-models"]});YUI.add("photo-head-meta-models",(function(t){function e(t){e.superclass.constructor.call(this,t)}t.Models[this.name]=e,t.extend(e,t.FlickrModelRegistry,{name:this.name,remote:{read:function(e){return t.ModelFetchers["flickr-photos-getHtmlMeta"].run(e,this.appContext)}},getFieldsForDisplay:function(t){var e={},r=this;return["title","noindexfollow","keywords","og:title","og:description","og:type","og:url","og:image","og:image:width","og:image:height","flickr_photos:by","flickr_photos:camera","flickr_photos:sets","flickr_photos:groups","flickr_photos:galleries","twitter:card","twitter:player","twitter:player:width","twitter:player:height","twitter:image","twitter:description","twitter:app:url:iphone","twitter:app:url:ipad","twitter:app:url:googleplay","twitter:creator","pinterest"].forEach((function(i){var o=r.getValue(t,i);void 0!==o&&(e[i]=o)})),e},attributes:{"og:title":{setter:function(t){return t&&t.replace?t.replace(/"/g,"&quot;"):t}},noindexfollow:{setter:function(t){return t&&t.replace?t.replace(/"/g,"&quot;"):t}},keywords:{setter:function(t){return t&&t.replace?t.replace(/"/g,"&quot;"):t}},title:{setter:function(t){return t&&t.replace?t.replace(/"/g,"&quot;"):t}},"og:description":{setter:function(t){return t&&t.replace?t.replace(/"/g,"&quot;"):t}},"og:type":{},"og:url":{},"og:image":{},"og:image:width":{},"og:image:height":{},"flickr_photos:by":{},"flickr_photos:camera":{},"flickr_photos:sets":{},"flickr_photos:groups":{},"flickr_photos:galleries":{},"twitter:card":{},"twitter:player":{},"twitter:player:width":{},"twitter:player:height":{},"twitter:image":{},"twitter:description":{setter:function(t){return t&&t.replace?t.replace(/"/g,"&quot;"):t}},"twitter:app:url:iphone":{},"twitter:app:url:ipad":{},"twitter:app:url:googleplay":{},"twitter:creator":{},pinterest:{setter:function(t){return t}}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-promise","flickr-photos-getHtmlMeta-fetcher","flickr-photos-getInfo-fetcher","attribute-helpers"]});YUI.add("photo-notes-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-photos-getInfo"].run(t,this.appContext)}},attributes:{notes:{isCollection:!0}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-photos-getInfo-fetcher"]});YUI.add("flickr-photos-addNotes-creator",(function(o,t){"use strict";o.namespace("ModelCreators")["flickr-photos-addNotes"]={run:function(e,r){var n=this;return o.Promise.all([r.callAPI("flickr.photos.notes.add",this._processParams(e)),r.getModelRegistry("photo-notes-models"),r.getModelRegistry("note-models")]).then((function(o){return n._processResponse(o,e)}),o.FetcherErrorLogger(t))},_processParams:function(o){return{photo_id:o.photoId,note_x:o.left,note_y:o.top,note_w:o.width,note_h:o.height,note_text:o.text}},_processResponse:function(o,t){var e,r=o[0],n=o[1],s=o[2];return s.addOrUpdate({id:r.note.id,left:r.note.x,top:r.note.y,width:r.note.w,height:r.note.h,text:r.note.content,author:r.note.author,authorName:r.note.authorname,authorRealName:r.note.authorrealname,authorIsPro:r.note.authorispro,authorProBadge:r.note.authorProBadge,authorIsDeleted:r.note.authorisdeleted}),e=s.proxy(r.note.id),n.exists(t.photoId)?n.getValue(t.photoId,"notes").appendToList(e):n.add({id:t.photoId,notes:[e]}),e}}}),"@VERSION@",{requires:["flickr-promise"],optional:["photo-notes-models","note-models"]});YUI.add("flickr-photos-editNote-updater",(function(e,t){"use strict";e.namespace("ModelUpdaters")["flickr-photos-editNote"]={run:function(o,n){var s=this;return e.Promise.all([n.callAPI("flickr.photos.notes.edit",this._processParams(o)),n.getModelRegistry("photo-notes-models"),n.getModelRegistry("note-models")]).then((function(e){return s._processResponse(e,o)}),e.FetcherErrorLogger(t))},_processParams:function(e){return{note_id:e.noteId,note_x:e.noteX,note_y:e.noteY,note_w:e.noteW,note_h:e.noteH,note_text:e.noteText}},_processResponse:function(e,t){var o,n=e[0],s=e[1];return(o=e[2].proxy(n.note.id)).setValues({left:n.note.x,top:n.note.y,width:n.note.w,height:n.note.h,text:n.note.content}),s.getValue(n.note.photoId,"notes").getFromListByID(n.note.id).setValues({left:n.note.x,top:n.note.y,width:n.note.w,height:n.note.h,text:n.note.content}),o}}}),"@VERSION@",{requires:["flickr-promise"],optional:["photo-notes-models","note-models"]});YUI.add("flickr-photos-deleteNote-deletor",(function(e,o){"use strict";e.namespace("ModelDeletors")["flickr-photos-deleteNote"]={run:function(t,r){var l={note_id:t};return r.callAPI("flickr.photos.notes.delete",l).then(null,e.FetcherErrorLogger(o))}}}),"@VERSION@",{requires:["flickr-promise"],optional:[]});YUI.add("note-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{create:function(t){return e.ModelCreators["flickr-photos-addNotes"].run(t,this.appContext)},update:function(t,r){var n;return n={noteId:t,noteX:this.getValue(t,"left"),noteY:this.getValue(t,"top"),noteW:this.getValue(t,"width"),noteH:this.getValue(t,"height"),noteText:this.getValue(t,"text")},e.ModelUpdaters["flickr-photos-editNote"].run(n,this.appContext)},delete:function(t){return e.ModelDeletors["flickr-photos-deleteNote"].run(t,this.appContext)}},attributes:{author:{setter:function(e){return e}},authorName:{setter:function(e){return e}},authorRealName:{setter:function(e){return e}},authorIsPro:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},authorProBadge:{defaultValue:"standard",setter:function(t){return e.AttributeHelpers.coerceString(t)}},authorIsDeleted:{defaultValue:!1,setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},left:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},top:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},width:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},height:{validator:function(t){return e.AttributeHelpers.validateInteger(t)},setter:function(t){return e.AttributeHelpers.coerceInteger(t)}},text:{setter:function(e){return e}}}})}),"@VERSION@",{requires:["flickr-model-registry","flickr-photos-addNotes-creator","flickr-photos-editNote-updater","flickr-photos-deleteNote-deletor","attribute-helpers"]});YUI.add("flickr-photos-deleteAutotags-deletor",(function(e,t){"use strict";e.namespace("ModelDeletors")["flickr-photos-deleteAutotags"]={run:function(o,r){return r.callAPI("flickr.photos.deleteAutotags",o).then(null,e.FetcherErrorLogger(t))}}}),"@VERSION@",{requires:["flickr-promise"],optional:[]});