YUI.add("hermes-template-photo-opt-out",(function(e,t){var n=e.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(e,t,n,l,r){var a,o=null!=t?t:e.nullContext||{},u=e.hooks.helperMissing,i="function",p=e.escapeExpression,s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form action="//'+p(typeof(a=null!=(a=s(n,"host")||(null!=t?s(t,"host"):t))?a:u)===i?a.call(o,{name:"host",hash:{},data:r,loc:{start:{line:1,column:16},end:{line:1,column:24}}}):a)+'/help/optin" method="post">\n\t<input type="hidden" name="photo_opt" value="0">\n\t<input type="hidden" name="redirect_url" value="'+p(typeof(a=null!=(a=s(n,"redirect-url")||(null!=t?s(t,"redirect-url"):t))?a:u)===i?a.call(o,{name:"redirect-url",hash:{},data:r,loc:{start:{line:3,column:49},end:{line:3,column:65}}}):a)+'">\n\t<input type="submit" class="ui-button" value="Go back to the old experience">\n</form>'},useData:!0}),l={};e.Array.each([],(function(t){var n=e.Template.get("hermes/"+t);n&&(l[t]=n)})),e.Template.register("hermes/photo-opt-out",(function(t,r){return(r=r||{}).partials=r.partials?e.merge(l,r.partials):l,n(t,r)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-photo-well-media",(function(n,l){var t=n.Template.Handlebars.revive({1:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t<div class="restricted-interstitial">\n\t\t<div class="restricted-interstitial-message">\n\t\t\t<h2>'+n.escapeExpression((s(t,"intlMessage")||l&&s(l,"intlMessage")||n.hooks.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:a,loc:{start:{line:4,column:7},end:{line:4,column:66}}}))+"</h2>\n"+(null!=(o=s(t,"if").call(i,null!=l?s(l,"isSignedIn"):l,{name:"if",hash:{},fn:n.program(2,a,0),inverse:n.program(5,a,0),data:a,loc:{start:{line:5,column:3},end:{line:14,column:10}}}))?o:"")+"\t\t</div>\n\t</div>\n"},2:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t<p>"+c((r(t,"intlMessage")||l&&r(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:a,loc:{start:{line:6,column:7},end:{line:6,column:69}}}))+"<br />"+c((r(t,"intlMessage")||l&&r(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:a,loc:{start:{line:6,column:75},end:{line:6,column:136}}}))+"</p>\n\n"+(null!=(o=r(t,"unless").call(i,null!=l?r(l,"isMinor"):l,{name:"unless",hash:{},fn:n.program(3,a,0),inverse:n.noop,data:a,loc:{start:{line:8,column:4},end:{line:11,column:15}}}))?o:"")},3:function(n,l,t,e,a){var o=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,s=n.escapeExpression,c=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t\t<p><button class='ui-button'><span>"+s((c(t,"intlMessage")||l&&c(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:a,loc:{start:{line:9,column:40},end:{line:9,column:111}}}))+"</span></button></p>\n\t\t\t\t\t<p>"+s((c(t,"intlHTMLMessage")||l&&c(l,"intlHTMLMessage")||i).call(o,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:a,loc:{start:{line:10,column:8},end:{line:10,column:88}}}))+"</p>\n"},5:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,c=n.escapeExpression,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\t\t\t\t<p>"+c((r(t,"intlMessage")||l&&r(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:a,loc:{start:{line:13,column:7},end:{line:13,column:74}}}))+' <a href="//'+c("function"==typeof(o=null!=(o=r(t,"host")||(null!=l?r(l,"host"):l))?o:s)?o.call(i,{name:"host",hash:{},data:a,loc:{start:{line:13,column:86},end:{line:13,column:94}}}):o)+'/signin/" data-track="photoWellSignInClick">'+c((r(t,"intlMessage")||l&&r(l,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:a,loc:{start:{line:13,column:138},end:{line:13,column:179}}}))+"</a></p>\n"},7:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return"\n"+(null!=(o=s(t,"if").call(i,null!=l?s(l,"isVideo"):l,{name:"if",hash:{},fn:n.program(8,a,0),inverse:n.program(10,a,0),data:a,loc:{start:{line:19,column:2},end:{line:36,column:9}}}))?o:"")+(null!=(o=s(t,"if").call(i,null!=l?s(l,"isAd"):l,{name:"if",hash:{},fn:n.program(13,a,0),inverse:n.noop,data:a,loc:{start:{line:37,column:1},end:{line:40,column:8}}}))?o:"")},8:function(n,l,t,e,a){var o,i=null!=l?l:n.nullContext||{},s=n.hooks.helperMissing,c="function",r=n.escapeExpression,u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<div class="videoplayer main-photo" style="width:'+r(typeof(o=null!=(o=u(t,"width")||(null!=l?u(l,"width"):l))?o:s)===c?o.call(i,{name:"width",hash:{},data:a,loc:{start:{line:20,column:52},end:{line:20,column:61}}}):o)+"px; height:"+r(typeof(o=null!=(o=u(t,"height")||(null!=l?u(l,"height"):l))?o:s)===c?o.call(i,{name:"height",hash:{},data:a,loc:{start:{line:20,column:72},end:{line:20,column:82}}}):o)+'px;"><video id="video_1" poster="'+r(typeof(o=null!=(o=u(t,"src")||(null!=l?u(l,"src"):l))?o:s)===c?o.call(i,{name:"src",hash:{},data:a,loc:{start:{line:20,column:115},end:{line:20,column:122}}}):o)+'" class="video-js vjs-big-play-centered inherit-size"></video></div>\n'},10:function(n,l,t,e,a){var o,i,s=null!=l?l:n.nullContext||{},c=n.hooks.helperMissing,r=n.escapeExpression,u="function",h=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\n\t\t\t<div class="facade-of-protection-neue '+(null!=(o=h(t,"if").call(s,null!=l?h(l,"is-video"):l,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:23,column:41},end:{line:23,column:72}}}))?o:"")+'">\n\t\t\t\t'+r((h(t,"outlet")||l&&h(l,"outlet")||c).call(s,null!=l?h(l,"zoom-view"):l,{name:"outlet",hash:{},data:a,loc:{start:{line:24,column:4},end:{line:24,column:24}}}))+'\n\t\t\t</div>\n\n\t\t\t<img width="'+r(typeof(i=null!=(i=h(t,"width")||(null!=l?h(l,"width"):l))?i:c)===u?i.call(s,{name:"width",hash:{},data:a,loc:{start:{line:27,column:15},end:{line:27,column:24}}}):i)+'" height="'+r(typeof(i=null!=(i=h(t,"height")||(null!=l?h(l,"height"):l))?i:c)===u?i.call(s,{name:"height",hash:{},data:a,loc:{start:{line:27,column:34},end:{line:27,column:44}}}):i)+'" src="'+r(typeof(i=null!=(i=h(t,"src")||(null!=l?h(l,"src"):l))?i:c)===u?i.call(s,{name:"src",hash:{},data:a,loc:{start:{line:27,column:51},end:{line:27,column:58}}}):i)+'" class="low-res-photo" alt="'+r(typeof(i=null!=(i=h(t,"imgAltText")||(null!=l?h(l,"imgAltText"):l))?i:c)===u?i.call(s,{name:"imgAltText",hash:{},data:a,loc:{start:{line:27,column:87},end:{line:27,column:101}}}):i)+'">\n\t\t\t<img width="'+r(typeof(i=null!=(i=h(t,"width")||(null!=l?h(l,"width"):l))?i:c)===u?i.call(s,{name:"width",hash:{},data:a,loc:{start:{line:28,column:15},end:{line:28,column:24}}}):i)+'" height="'+r(typeof(i=null!=(i=h(t,"height")||(null!=l?h(l,"height"):l))?i:c)===u?i.call(s,{name:"height",hash:{},data:a,loc:{start:{line:28,column:34},end:{line:28,column:44}}}):i)+'" src="'+r(typeof(i=null!=(i=h(t,"highResSrc")||(null!=l?h(l,"highResSrc"):l))?i:c)===u?i.call(s,{name:"highResSrc",hash:{},data:a,loc:{start:{line:28,column:51},end:{line:28,column:65}}}):i)+'" class="main-photo is-hidden" alt="'+r(typeof(i=null!=(i=h(t,"imgAltText")||(null!=l?h(l,"imgAltText"):l))?i:c)===u?i.call(s,{name:"imgAltText",hash:{},data:a,loc:{start:{line:28,column:101},end:{line:28,column:115}}}):i)+'">\n\t\t\t<script nonce="'+r(typeof(i=null!=(i=h(t,"cspNonce")||(null!=l?h(l,"cspNonce"):l))?i:c)===u?i.call(s,{name:"cspNonce",hash:{},data:a,loc:{start:{line:29,column:18},end:{line:29,column:30}}}):i)+"\">\n\t\t\tvar img = document.querySelector('.photo-well-media-view img.main-photo');\n\t\t\timg.onload = function () { registerFirstPhoto(img); };\n\t\t\t<\/script>\n\t\t\t<noscript>\n\t\t\t\t<img width=\""+r(typeof(i=null!=(i=h(t,"width")||(null!=l?h(l,"width"):l))?i:c)===u?i.call(s,{name:"width",hash:{},data:a,loc:{start:{line:34,column:16},end:{line:34,column:25}}}):i)+'" height="'+r(typeof(i=null!=(i=h(t,"height")||(null!=l?h(l,"height"):l))?i:c)===u?i.call(s,{name:"height",hash:{},data:a,loc:{start:{line:34,column:35},end:{line:34,column:45}}}):i)+'" src="'+r(typeof(i=null!=(i=h(t,"highResSrc")||(null!=l?h(l,"highResSrc"):l))?i:c)===u?i.call(s,{name:"highResSrc",hash:{},data:a,loc:{start:{line:34,column:52},end:{line:34,column:66}}}):i)+'" class="main-photo" alt="'+r(typeof(i=null!=(i=h(t,"imgAltText")||(null!=l?h(l,"imgAltText"):l))?i:c)===u?i.call(s,{name:"imgAltText",hash:{},data:a,loc:{start:{line:34,column:92},end:{line:34,column:106}}}):i)+'">\n\t\t\t</noscript>\n'},11:function(n,l,t,e,a){return"is-video"},13:function(n,l,t,e,a){var o,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<span class="ad-info">'+n.escapeExpression((i(t,"intlHTMLMessage")||l&&i(l,"intlHTMLMessage")||n.hooks.helperMissing).call(null!=l?l:n.nullContext||{},{name:"intlHTMLMessage",hash:{brand:null!=(o=null!=l?i(l,"ad"):l)?i(o,"brand"):o,intlName:"photo-page-scrappy.FIND_OUT_MORE_AD"},data:a,loc:{start:{line:38,column:25},end:{line:38,column:106}}}))+"</span>\n\t\t</a>\n"},compiler:[8,">= 4.3.0"],main:function(n,l,t,e,a){var o,i=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=i(t,"if").call(null!=l?l:n.nullContext||{},null!=l?i(l,"needsInterstitial"):l,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.program(7,a,0),data:a,loc:{start:{line:1,column:0},end:{line:41,column:7}}}))?o:""},useData:!0}),e={};n.Array.each([],(function(l){var t=n.Template.get("hermes/"+l);t&&(e[l]=t)})),n.Template.register("hermes/photo-well-media",(function(l,a){return(a=a||{}).partials=a.partials?n.merge(e,a.partials):e,t(l,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-well-media-view",(function(e,t){var i,o=require("hermes-core/flog")(t);i={photo:{render:function(){var t,i,o=this,n=this.get("photo"),s=new Date,a="";return o.preloadImage&&(o.preloadImage.onload=null),t=this.getPhotoForDisplay(),i=this.getPhotoForDisplay({includeSizes:["sq","q","t","s","n"]}),n.getValue("owner")&&(a=""===n.getValue("title").trim()?this.intlMessage({intlName:"common.UNTITLED"}):n.getValue("title"),a+=" | "+this.intlMessage({intlName:"common.BY_USER",user:n.getValue("owner").getValue("username")})),this.setContainerWithTemplate("photo-well-media",{width:t.width,height:t.height,src:i.url,highResSrc:t.url,imgAltText:a,needsInterstitial:n.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isVideo:n.getValue("isVideo"),isMinor:this.appContext.getViewer().isMinor,isAd:this.isAd}),this.fire("subviewViewEvent",t),YUI.Env.isServer?(this.serverWidth=t.width,this.serverHeight=t.height):n.getValue("needsInterstitial")||(o.preloadImage=new Image,o.preloadImage.onload=function(){if(!this.onloadFired&&o.isActiveAndInDOM()){this.onloadFired=!0;var i,n="photoPageShowedSize",a="ø";try{(i=/(?:_([a-z]))?\.jpg/.exec(t.url))&&i[1]&&(a=i[1])}catch(e){}finally{n+=String(a).toUpperCase()}e.rapidTracker.beacon(this.name,n);var r,h=o.get("container").one(".low-res-photo"),l=o.get("container").one(".main-photo");new Date-s<100?(l.removeClass("is-hidden").show(),h.hide()):(l.setStyles({position:"absolute",left:0,top:0,opacity:0}),l.removeClass("is-hidden"),r=function(){l.removeAttribute("style"),h.hide()},e.UA.ie?r():e.use("transition",(function(e){l.transition({duration:.25,opacity:1},r)})))}},o.preloadImage.src=t.url,o.preloadImage.complete&&o.preloadImage.onload()),this}},video:{render:function(){var e=this.get("photo"),t=this.getPhotoForDisplay({excludeSizes:[]}),i=t.url;return this.appContext.flipper.isFlipped("disable-video-playback")&&(i="/images/en-us/video-unavailable/m.png"),!this.player||e.getValue("isVideoPending")||e.getValue("isVideoFailed")?(this.setContainerWithTemplate("photo-well-media",{width:t.width,height:t.height,src:i,needsInterstitial:e.getValue("needsInterstitial"),isVideo:e.getValue("isVideo"),isSignedIn:this.appContext.getViewer().signedIn,"zoom-view":""}),this.fire("subviewViewEvent",t),this):(e.getValue("isVideoPending")||e.getValue("isVideoFailed")||(this.player.dimension?(this.player.dimension("width",t.width),this.player.dimension("height",t.height)):this.player.resize(t.width,t.height)),this)}},ad:{render:function(){return this}}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,subviewConfig:{"zoom-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disableIfSmall:!0}},initializer:function(e){return this.photoId=e.photoId,this.isAd=!!e.ad,this.ad=e.ad,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){var t=this;return this.appContext.getModel("photo-models",t.photoId).then((function(i){if(t.set("photo",i),i.getValue("isVideo"))return new e.Promise((function(t,i){e.use("flickr-video-player",(function(){t()}))}))}))},buildContainer:function(){return YUI.Env.isServer||this.set("clientRendered",!0),this.isAd?i.ad.render.call(this):i[this.get("photo").getValue("isVideo")?"video":"photo"].render.call(this),this},handleInterstitialDismissButtonClick:function(t){var i=this,n=this.get("personPreferences"),s=this.get("photo"),a=s.getValue("safetyLevel");e.rapidTracker.beacon(this.name,"restrictedContentInterstitialClick"),n.setValue("safeSearch",a),n.registry.remoteUpdate(i.appContext.auth.user.nsid).then((function(e){s.registry.attributeSearch({needsInterstitial:!0}).forEach((function(e){s.registry.getValue(e,"safetyLevel")<=n.getValue("safeSearch")&&s.registry.setValue(e,"needsInterstitial",!1)})),i.buildContainer()}),(function(e){o.error({err:e}),i.onError(i.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))}))},activate:function(){var t,i=this,o=i.get("photo"),n=this.getPhotoForDisplay(),s=this.get("container").one(".main-photo");return!o.getValue("isVideo")||o.getValue("isVideoPending")||o.getValue("isVideoFailed")||(i.player=new e.FlickrVideoPlayer({container:i.get("container").one(".videoplayer"),model:o,appContext:i.appContext,videoNode:e.one("#video_1")?e.one("#video_1")._node:null,autoplay:!0,loop:!0,controlBar:{fullscreenToggle:!1}}),i.player.init().then((function(){})),i.on("destroy",(function(){i.player&&(i.player.destroy(),i.player=null)}))),o.getValue("needsInterstitial")||(e.use("global-events",(function(e){i.registerEventHandler(e.globalEvents.subscribe("window:resize",(function(e){i.set("canvasSizeIsDirty",!0),i.buildContainer()})))})),this.registerEventHandler(e.on("flickr:photo-media-well-update",(function(e){i.set("canvasSizeIsDirty",!0),i.buildContainer()}))),!this.isAd&&(!i.get("clientRendered")||s&&n.width!==Number(s.getAttribute("width"))||s&&n.height!==Number(s.getAttribute("height")))&&i.buildContainer()),this.registerEventHandler(e.on("flickr:display-note-box",(function(o){t=e.Node.create('<div class="note-box"></div>'),i.get("container").one(".main-photo").getXY(),i.get("container").append(t),t.setStyles({top:o.noteBoxTop+i.get("container").one(".main-photo").getDOMNode().offsetTop,left:o.noteBoxLeft,width:o.noteBoxWidth,height:o.noteBoxHeight})}))),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",i.appContext.auth.user.nsid).then((function(e){i.set("personPreferences",e),o.getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&i.registerEventHandler(i.get("container").one(".restricted-interstitial-message button").on("click",i.handleInterstitialDismissButtonClick,i))})),this},onError:function(t){new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:this.intlMessage({intlName:"common.ERROR"}),actionButtonLabel:this.intlMessage({intlName:"common.OK"}),htmlMessage:t}).show()},getPhotoForDisplay:function(e){var t,i,o=this.getCanvasSize(),n=this.getPixelRatio(),s=this.get("photo").getSizeToFit(o,e);return t=Math.min(o.height/n,s.height),i=Math.min(o.width/n,s.width/s.height*t),t=Math.min(t,s.height/s.width*i),{width:Math.round(i),height:Math.round(t),url:s.url,pixelRatio:s.width/i}},getCanvasSize:function(){var e,t,i=this.getPixelRatio();return this.get("canvasSizeIsDirty")?YUI.Env.isServer||(t=this.get("container").ancestor())&&(e=t.get("region")).width>0&&e.height>0&&(this.set("canvasSizeIsDirty",!1),this.set("cachedCanvasSize",e),this.appContext.setCookie({remove:!0,cookieName:"photoPW",path:"/photos/",cookieValue:e.width}),this.appContext.setCookie({remove:!0,cookieName:"photoPH",path:"/photos/",cookieValue:e.height}),this.appContext.setCookie({remove:!0,cookieName:"density",path:"/photos/",cookieValue:i})):e=this.get("cachedCanvasSize"),e||(e={top:0,left:0,bottom:500,right:500,width:parseInt(this.appContext.getCookie("photoPW"),10)||500,height:parseInt(this.appContext.getCookie("photoPH"),10)||500}),e.height*=i,e.width*=i,e},getPixelRatio:function(){return this.appContext.getViewer().getPixelRatio()}},{ATTRS:{canvasSizeIsDirty:{value:!0,setter:function(e){return!!e}},cachedCanvasSize:{getter:function(t){return e.merge(t)},setter:function(t){return e.merge(t)}}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-well-media","moment","zoom-view"],optionalRequires:["hermes-core"],optional:["photo-models"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-head-meta",(function(e,n){var a=e.Template.Handlebars.revive({1:function(e,n,a,t,l){return'name="'},3:function(e,n,a,t,l){return'property="'},5:function(e,n,a,t,l){return'description="'+e.escapeExpression(e.lambda(n,n))+'"'},compiler:[8,">= 4.3.0"],main:function(e,n,a,t,l){var r,o,i,m=null!=n?n:e.nullContext||{},s=e.hooks.helperMissing,c="function",u=e.escapeExpression,p=e.lookupProperty||function(e,n){if(Object.prototype.hasOwnProperty.call(e,n))return e[n]},d="<meta "+(null!=(r=p(a,"if").call(m,null!=n?p(n,"isName"):n,{name:"if",hash:{},fn:e.program(1,l,0),inverse:e.program(3,l,0),data:l,loc:{start:{line:1,column:6},end:{line:1,column:51}}}))?r:"")+u(typeof(o=null!=(o=p(a,"metaName")||(null!=n?p(n,"metaName"):n))?o:s)===c?o.call(m,{name:"metaName",hash:{},data:l,loc:{start:{line:1,column:51},end:{line:1,column:63}}}):o)+'" content="'+u((p(a,"renderMetaInfo")||n&&p(n,"renderMetaInfo")||s).call(m,null!=n?p(n,"metaValue"):n,{name:"renderMetaInfo",hash:{},data:l,loc:{start:{line:1,column:74},end:{line:1,column:102}}}))+'" ';return o=null!=(o=p(a,"metaDescription")||(null!=n?p(n,"metaDescription"):n))?o:s,i={name:"metaDescription",hash:{},fn:e.program(5,l,0),inverse:e.noop,data:l,loc:{start:{line:1,column:104},end:{line:1,column:163}}},r=typeof o===c?o.call(m,i):o,p(a,"metaDescription")||(r=e.hooks.blockHelperMissing.call(n,r,i)),null!=r&&(d+=r),d+' data-dynamic="true">\n'},useData:!0}),t={};e.Array.each([],(function(n){var a=e.Template.get("hermes/"+n);a&&(t[n]=a)})),e.Template.register("hermes/head-meta",(function(n,l){return(l=l||{}).partials=l.partials?e.merge(t,l.partials):t,a(n,l)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-head-link",(function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,o,t){var a,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'id="'+n.escapeExpression("function"==typeof(a=null!=(a=r(l,"id")||(null!=e?r(e,"id"):e))?a:n.hooks.helperMissing)?a.call(null!=e?e:n.nullContext||{},{name:"id",hash:{},data:t,loc:{start:{line:1,column:20},end:{line:1,column:26}}}):a)+'"'},3:function(n,e,l,o,t){var a,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'rev="'+n.escapeExpression("function"==typeof(a=null!=(a=r(l,"rev")||(null!=e?r(e,"rev"):e))?a:n.hooks.helperMissing)?a.call(null!=e?e:n.nullContext||{},{name:"rev",hash:{},data:t,loc:{start:{line:1,column:51},end:{line:1,column:58}}}):a)+'"'},5:function(n,e,l,o,t){var a,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'rel="'+n.escapeExpression("function"==typeof(a=null!=(a=r(l,"rel")||(null!=e?r(e,"rel"):e))?a:n.hooks.helperMissing)?a.call(null!=e?e:n.nullContext||{},{name:"rel",hash:{},data:t,loc:{start:{line:1,column:83},end:{line:1,column:90}}}):a)+'"'},7:function(n,e,l,o,t){var a,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'type="'+n.escapeExpression("function"==typeof(a=null!=(a=r(l,"type")||(null!=e?r(e,"type"):e))?a:n.hooks.helperMissing)?a.call(null!=e?e:n.nullContext||{},{name:"type",hash:{},data:t,loc:{start:{line:1,column:117},end:{line:1,column:125}}}):a)+'"'},9:function(n,e,l,o,t){var a,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'media="'+n.escapeExpression("function"==typeof(a=null!=(a=r(l,"media")||(null!=e?r(e,"media"):e))?a:n.hooks.helperMissing)?a.call(null!=e?e:n.nullContext||{},{name:"media",hash:{},data:t,loc:{start:{line:1,column:154},end:{line:1,column:163}}}):a)+'"'},11:function(n,e,l,o,t){var a,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'href="'+n.escapeExpression("function"==typeof(a=null!=(a=r(l,"href")||(null!=e?r(e,"href"):e))?a:n.hooks.helperMissing)?a.call(null!=e?e:n.nullContext||{},{name:"href",hash:{},data:t,loc:{start:{line:1,column:190},end:{line:1,column:198}}}):a)+'"'},13:function(n,e,l,o,t){var a=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'data-dynamic-added-by="'+n.escapeExpression((a(l,"obfuscateInternals")||e&&a(e,"obfuscateInternals")||n.hooks.helperMissing).call(null!=e?e:n.nullContext||{},null!=e?a(e,"addedBy"):e,{name:"obfuscateInternals",hash:{},data:t,loc:{start:{line:1,column:245},end:{line:1,column:275}}}))+'"'},compiler:[8,">= 4.3.0"],main:function(n,e,l,o,t){var a,r=null!=e?e:n.nullContext||{},u=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"<link "+(null!=(a=u(l,"if").call(r,null!=e?u(e,"id"):e,{name:"if",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:6},end:{line:1,column:34}}}))?a:"")+" "+(null!=(a=u(l,"if").call(r,null!=e?u(e,"rev"):e,{name:"if",hash:{},fn:n.program(3,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:35},end:{line:1,column:66}}}))?a:"")+" "+(null!=(a=u(l,"if").call(r,null!=e?u(e,"rel"):e,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:67},end:{line:1,column:98}}}))?a:"")+" "+(null!=(a=u(l,"if").call(r,null!=e?u(e,"type"):e,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:99},end:{line:1,column:133}}}))?a:"")+" "+(null!=(a=u(l,"if").call(r,null!=e?u(e,"media"):e,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:134},end:{line:1,column:171}}}))?a:"")+" "+(null!=(a=u(l,"if").call(r,null!=e?u(e,"href"):e,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:172},end:{line:1,column:206}}}))?a:"")+" "+(null!=(a=u(l,"if").call(r,null!=e?u(e,"addedBy"):e,{name:"if",hash:{},fn:n.program(13,t,0),inverse:n.noop,data:t,loc:{start:{line:1,column:207},end:{line:1,column:283}}}))?a:"")+' data-dynamic="true" />'},useData:!0}),o={};n.Array.each([],(function(e){var l=n.Template.get("hermes/"+e);l&&(o[e]=l)})),n.Template.register("hermes/head-link",(function(e,t){return(t=t||{}).partials=t.partials?n.merge(o,t.partials):o,l(e,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-head-breadcrumb",(function(t,l){var n=t.Template.Handlebars.revive({1:function(t,l,n,a,e){var o,i=null!=l?l:t.nullContext||{},r=t.hooks.helperMissing,s="function",c=t.escapeExpression,p=t.lookupProperty||function(t,l){if(Object.prototype.hasOwnProperty.call(t,l))return t[l]};return'<script type="application/ld+json">\n\t[{\n\t\t"@context": "http://schema.org",\n\t\t"@type": "BreadcrumbList",\n\t\t"itemListElement": [\n\t\t\t{\n\t\t\t\t"@type": "ListItem",\n\t\t\t\t"position": 1,\n\t\t\t\t"item": {\n\t\t\t\t\t"@id": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:e,loc:{start:{line:11,column:43},end:{line:11,column:62}}}):o)+'",\n\t\t\t\t\t"name": "'+c(typeof(o=null!=(o=p(n,"displayName")||(null!=l?p(l,"displayName"):l))?o:r)===s?o.call(i,{name:"displayName",hash:{},data:e,loc:{start:{line:12,column:14},end:{line:12,column:29}}}):o)+'",\n\t\t\t\t\t"image": "https:'+c(typeof(o=null!=(o=p(n,"avatarUrl")||(null!=l?p(l,"avatarUrl"):l))?o:r)===s?o.call(i,{name:"avatarUrl",hash:{},data:e,loc:{start:{line:13,column:21},end:{line:13,column:34}}}):o)+'"\n\t\t\t\t}\n\t\t\t}, {\n\t\t\t\t"@type": "ListItem",\n\t\t\t\t"position": 2,\n\t\t\t\t"item": {\n\t\t\t\t\t"@id": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:e,loc:{start:{line:19,column:43},end:{line:19,column:62}}}):o)+"/"+c(typeof(o=null!=(o=p(n,"photoId")||(null!=l?p(l,"photoId"):l))?o:r)===s?o.call(i,{name:"photoId",hash:{},data:e,loc:{start:{line:19,column:63},end:{line:19,column:74}}}):o)+'",\n\t\t\t\t\t"name": "'+c(typeof(o=null!=(o=p(n,"title")||(null!=l?p(l,"title"):l))?o:r)===s?o.call(i,{name:"title",hash:{},data:e,loc:{start:{line:20,column:14},end:{line:20,column:23}}}):o)+'",\n\t\t\t\t\t"image": "https:'+c(typeof(o=null!=(o=p(n,"photoPreview")||(null!=l?p(l,"photoPreview"):l))?o:r)===s?o.call(i,{name:"photoPreview",hash:{},data:e,loc:{start:{line:21,column:21},end:{line:21,column:37}}}):o)+'"\n\t\t\t\t}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\t"@context": "https://schema.org/",\n\t\t"@type": "ImageObject",\n\t\t"contentUrl": "https:'+c(typeof(o=null!=(o=p(n,"photoPreview")||(null!=l?p(l,"photoPreview"):l))?o:r)===s?o.call(i,{name:"photoPreview",hash:{},data:e,loc:{start:{line:29,column:23},end:{line:29,column:39}}}):o)+'",\n\t\t"license": "'+c(typeof(o=null!=(o=p(n,"licenseUrl")||(null!=l?p(l,"licenseUrl"):l))?o:r)===s?o.call(i,{name:"licenseUrl",hash:{},data:e,loc:{start:{line:30,column:14},end:{line:30,column:28}}}):o)+'",\n\t\t"acquireLicensePage": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:e,loc:{start:{line:31,column:55},end:{line:31,column:74}}}):o)+"/"+c(typeof(o=null!=(o=p(n,"photoId")||(null!=l?p(l,"photoId"):l))?o:r)===s?o.call(i,{name:"photoId",hash:{},data:e,loc:{start:{line:31,column:75},end:{line:31,column:86}}}):o)+'",\n\t\t"author": {\n\t\t\t"@type": "Person",\n\t\t\t"name": "'+c(typeof(o=null!=(o=p(n,"displayName")||(null!=l?p(l,"displayName"):l))?o:r)===s?o.call(i,{name:"displayName",hash:{},data:e,loc:{start:{line:34,column:12},end:{line:34,column:27}}}):o)+'",\n\t\t\t"url": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:e,loc:{start:{line:35,column:41},end:{line:35,column:60}}}):o)+'",\n\t\t\t"image": "https:'+c(typeof(o=null!=(o=p(n,"avatarUrl")||(null!=l?p(l,"avatarUrl"):l))?o:r)===s?o.call(i,{name:"avatarUrl",hash:{},data:e,loc:{start:{line:36,column:19},end:{line:36,column:32}}}):o)+'"\n\t\t},\n\t\t"creator": {\n\t\t\t"@type": "Person",\n\t\t\t"name": "'+c(typeof(o=null!=(o=p(n,"displayName")||(null!=l?p(l,"displayName"):l))?o:r)===s?o.call(i,{name:"displayName",hash:{},data:e,loc:{start:{line:40,column:12},end:{line:40,column:27}}}):o)+'",\n\t\t\t"url": "https://www.flickr.com/photos/'+c(typeof(o=null!=(o=p(n,"pathAliasOrNsid")||(null!=l?p(l,"pathAliasOrNsid"):l))?o:r)===s?o.call(i,{name:"pathAliasOrNsid",hash:{},data:e,loc:{start:{line:41,column:41},end:{line:41,column:60}}}):o)+'",\n\t\t\t"image": "https:'+c(typeof(o=null!=(o=p(n,"avatarUrl")||(null!=l?p(l,"avatarUrl"):l))?o:r)===s?o.call(i,{name:"avatarUrl",hash:{},data:e,loc:{start:{line:42,column:19},end:{line:42,column:32}}}):o)+'"\n\t\t}\n\t}]\n<\/script>\n'},compiler:[8,">= 4.3.0"],main:function(t,l,n,a,e){var o,i=t.lookupProperty||function(t,l){if(Object.prototype.hasOwnProperty.call(t,l))return t[l]};return null!=(o=i(n,"if").call(null!=l?l:t.nullContext||{},null!=l?i(l,"photoPreview"):l,{name:"if",hash:{},fn:t.program(1,e,0),inverse:t.noop,data:e,loc:{start:{line:1,column:0},end:{line:46,column:7}}}))?o:""},useData:!0}),a={};t.Array.each([],(function(l){var n=t.Template.get("hermes/"+l);n&&(a[l]=n)})),t.Template.register("hermes/head-breadcrumb",(function(l,e){return(e=e||{}).partials=e.partials?t.merge(a,e.partials):a,n(l,e)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-head-meta-view",(function(e){var t=e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return this},subviewConfig:{},buildContainer:function(){return this},loadState:function(){var t=this;return e.Promise.all([t.appContext.getModel("photo-head-meta-models",t._params.photoId),t.appContext.getModel("photo-models",t._params.photoId),t.appContext.getModel("photo-privacy-models",t._params.photoId)]).then((function(e){t.set("photo-meta",e[0]),t.set("photo",e[1]),t.set("photo-privacy",e[2])}))},mapLicenseUrl:function(t){return[e.url(this.get("photo").getValue("url")),"https://creativecommons.org/licenses/by-nc-sa/2.0/","https://creativecommons.org/licenses/by-nc/2.0/","https://creativecommons.org/licenses/by-nc-nd/2.0/","https://creativecommons.org/licenses/by/2.0/","https://creativecommons.org/licenses/by-sa/2.0/","https://creativecommons.org/licenses/by-nd/2.0/","/commons/usage/","http://www.usa.gov/copyright.shtml","https://creativecommons.org/publicdomain/zero/1.0/","https://creativecommons.org/publicdomain/mark/1.0/"][t]},buildHeadContainer:function(){var t,a=this.get("photo-meta"),o=this.get("photo"),i=o.getValue("owner"),l=i.getValue("buddyicon"),m=this.get("photo-privacy"),s=e.url(),n=a.getFieldsForDisplay(),r="",p=this,h=[{id:"canonicalurl",rel:"canonical",href:s+o.getValue("url")},{rel:"alternative",type:"application/json+oembed",href:s+"/services/oembed?url="+encodeURI(s+o.getValue("url"))+"&format=json",title:o.getValue("title")},{rel:"alternative",type:"text/xml+oembed",href:s+"/services/oembed?url="+encodeURI(s+o.getValue("url"))+"&format=xml",title:o.getValue("title")}];n["al:ios:url"]||(n["al:ios:url"]="flickr://flickr.com"+o.getValue("url")),r+=this.templates("head-meta")({isName:!0,metaName:"description",metaValue:o.getValue("description")||""})+"\n";var d="noarchive";return m.getValue("isPublic")&&!m.getValue("isHidden")||(d+=", noindex"),r+=this.templates("head-meta")({isName:!0,metaName:"robots",metaValue:d}),r+=this.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:d}),this.appContext.flipper.isFlipped("enable-responsive-mobile-photo-page")&&(r+=this.templates("head-meta")({isName:!0,metaName:"viewport",metaValue:"width=device-width, viewport-fit=cover, initial-scale=1, maximum-scale=1"})),Object.keys(n).forEach((function(e){"object"==typeof n[e]&&"pinterest"===e?r+=p.templates("head-meta")({metaName:e,noPin:!0,metaValue:n[e].nopin,metaDescription:n[e].reason,isName:!0})+"\n":"og:description"===e?r+=p.templates("head-meta")({metaName:e,metaValue:n[e]})+"\n":"og:type"===e?r+=p.templates("head-meta")({metaName:e,metaValue:"article"})+"\n":"title"===e?r+=p.templates("head-meta")({isName:!0,metaName:"title",metaValue:n[e]})+"\n":"keywords"===e?r+=p.templates("head-meta")({isName:!0,metaName:e,metaValue:n[e]})+"\n":"noindexfollow"===e?n[e]&&(n[e]>0||""!==n[e])&&(r+=p.templates("head-meta")({isName:!0,metaName:"robots",metaValue:"noindex,follow"})+"\n",r+=p.templates("head-meta")({isName:!0,metaName:"googlebot",metaValue:"noindex,follow"})+"\n"):r+=p.templates("head-meta")({metaName:e,metaValue:n[e]})+"\n"})),h.forEach((function(e){e.addedBy=p.name,r+=p.templates("head-link")(e)+"\n"})),o&&(t=o.getSizeToFit({width:1024,height:1024})),r+=p.templates("head-breadcrumb")({pathAliasOrNsid:i.getValue("pathAlias")||i.getValue("id"),displayName:i.getValue("displayname"),avatarUrl:l.default,photoId:o.getValue("id"),title:o.getValue("title")||this.intlMessage({intlName:"common.UNTITLED"}),photoPreview:t?t.url:null,licenseUrl:this.mapLicenseUrl(o.getValue("license"))}),this.set("headContainer",r),YUI.Env.isServer||this.updateHead(),this}});return e.mix(t.prototype,e.Seo),t}),"@VERSION@",{requires:["flickr-view","hermes-template-head-meta","hermes-template-head-link","hermes-template-head-breadcrumb"],optional:["photo-head-meta-models","photo-route","url","seo"],langBundles:["meta","common","attribution","share-modal"]});YUI.add("hermes-lang-meta",(function(e,l){e.Intl.add("hermes/meta","en-US",{PHOTOSTREAM:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s "},{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"photo on Flickr!"}]},other:{value:[{type:7},{type:0,value:" photos on Flickr!"}]}},offset:0,pluralType:"cardinal"}],PHOTOSTREAM_NO_PHOTOS:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s photos on Flickr!"}],ALBUMS_LIST:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s "},{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"album on Flickr!"}]},other:{value:[{type:7},{type:0,value:" albums on Flickr!"}]}},offset:0,pluralType:"cardinal"}],ALBUMS_LIST_NO_ALBUMS:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s albums on Flickr!"}],FAVORITES:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s "},{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"favorites on Flickr!"}]},other:{value:[{type:7},{type:0,value:" favorites on Flickr!"}]}},offset:0,pluralType:"cardinal"}],FAVORITES_NO_PHOTOS:[{type:0,value:"Explore "},{type:1,value:"username"},{type:0,value:"’s favorites on Flickr!"}],META_DESCRIPTION_BY_USER_ON_FLICKR:[{type:0,value:"By "},{type:1,value:"username"},{type:0,value:" on Flickr"}],PHOTOSTREAM_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"username"},{type:0,value:"’s Photostream Atom feed"}],FAVORITES_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"username"},{type:0,value:"’s Favorites Atom feed"}],GROUP_POOL_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"groupName"},{type:0,value:"’s Photos Atom feed"}],GROUP_DISCUSSIONS_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"groupName"},{type:0,value:"’s Discussions Atom feed"}],ALBUM_ATOM_TITLE:[{type:0,value:"Flickr: "},{type:1,value:"username"},{type:0,value:'’s "'},{type:1,value:"albumTitle"},{type:0,value:'" Atom feed'}]})}),"@VERSION@",{requires:["intl"]});