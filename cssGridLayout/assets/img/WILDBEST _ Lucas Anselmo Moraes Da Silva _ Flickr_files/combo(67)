YUI.add("photo-page-lightbox-scrappy-view",(function(e){e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var i=this;return this.backToURL=t.backToURL,this.entryTypeIntlKey=t.entryTypeIntlKey,this.photoId=t.photoId,this.isOwner=t.isOwner,this.context=e.clone(t.context,!0),this.appContext.experiments.fullscreen.enableFullscreen(),t.realFullscreen=!0,t.isOwner=this.isOwner,this.appContext.getViewer().signedIn&&(t.signinPendingQueue=e.SigninHelper.checkPendingQueue(this.appContext)),this.appContext.getModel("photo-models",this.photoId).then((function(t){t.on("valuesChanged",(function(t){t.title&&e.one("head title").set("text",i.intlMessage({intlName:"photo-page-scrappy.PAGE_TITLE",title:t.title.newVal}))}))})),this},subviewConfig:{"photo-well-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["scrappy-photo-page-enabled","is-real-fullscreen","enable-zoom"],dealbreaker:!0},"photo-head-meta-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!0}},buildContainer:function(){var e=this.subviews["photo-well-view"].get("container");return this.setContainerWithTemplate("photo-page-lightbox",{"photo-well-view":e}),this},activate:function(){let t=this.get("container").one(".toggle");return t&&this.registerEventHandler(t.on("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"closeLightboxClick"})}))),this},closeDialog:function(t){e.config.win.location.href=this.backToURL},destructor:function(){clearTimeout(this.scrollTimeout)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-page-lightbox","signin-helper","url"],optionalRequires:["hermes-core"],optional:["photo-well-view","photo-head-meta-view"],langBundles:["common","photo-page-scrappy"]});YUI.add("photo-well-scrappy-view",(function(e,t){var i=require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return this.photoId=t.photoId,this.contextData=e.clone(t.context,!0),this.entryURL=t.backToURL,this.entryTypeIntlKey=t.entryTypeIntlKey,this.isAd=!!t.ad,this.hideBackToLink=t.hideBackToLink||!1,this.publisherUrl=t.publisherUrl,""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.numberOfPositionsToPreFetch=t.numberOfPositionsToPreFetch,this.numberOfPositionsToRefetchAt=t.numberOfPositionsToRefetchAt,this},additionalViewClasses:["centered-content"],subviewConfig:{"photo-well-media-scrappy-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"photo-notes-scrappy-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(e){return!this.appContext.flipper.isFlipped("enable-scrappy-notes")||e.ad}},"photo-engagement-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"context-slider-scrappy-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"photo-sidebar-toggle-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,neverShowOnServer:!0},"attribution-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,additionalViewClasses:["is-real-fullscreen","photo-attribution"]},"people-notes-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:!0}},loadState:function(){var t=this,o=[];return o.push(this.appContext.getModel("photo-models",this.photoId).then((function(e){if(!e)throw new Error("[photo-well-view] Invalid photoModel returned from getModel");t.set("photo",e)}))),this.contextData&&this.contextData.modelName&&this.contextData.params&&o.push(this.appContext.getModelRegistry(this.contextData.modelName).then((function(e){var o;if(e&&(o=e.attributeSearch(t.contextData.params))&&o.length&&e.exists(o[0]))return t.appContext.getModel(t.contextData.modelName,o[0]).then((function(e){e&&t.set("contextModel",e)}),(function(e){return i.error("photo not found in context. Loading photostream instead.",{err:e}),t.loadPhotostreamContext()}))})).catch((function(){return"whatever"}))),e.Promise.all(o)},buildContainer:function(){var e,t,i,o,n,a,r,s,h,l=this,u="",p=0,d=".navigate-next";return this.appContext.experiments.fullscreen.getMode()?this.subviews["attribution-view"]&&(YUI.Env.isServer||this.subviews["attribution-view"].get("container").removeClass("is-always-hidden"),"photoList-models"!==this.contextData.modelName&&"explore-models"!==this.contextData.modelName&&this.subviews["attribution-view"].get("container").addClass("is-hidden"),u=this.subviews["attribution-view"].get("container")):this.subviews["attribution-view"]&&(this.subviews["attribution-view"].get("container").addClass("is-always-hidden"),u=this.subviews["attribution-view"].get("container")),this.get("contextModel")&&this.get("contextModel").getValue("photoContextList")&&(e=this.get("contextModel").getValue("photoContextList").getList()).length>2&&e.some((function(e){return p++,e.getValue("id")===l.photoId}))&&(t=e.slice(p-2,p-1),i=e.slice(p,p+1),t&&t.length>0&&(o=l.setupNavLink(t[0],".navigate-prev","previous"),a=l.setupNavTitle(t[0])),i&&i.length>0?(n=l.setupNavLink(i[0],d,"next"),r=l.setupNavTitle(i[0])):i&&0!==i.length||!l.isAd||(n=l.setupNavLink(l.get("photo"),d,"next"),r=l.setupNavTitle(l.get("photo")))),h=(s=this.getPhotoWellHeight())-70,this.setContainerWithTemplate("photo-well-scrappy",{"photo-well-media-view":this.subviews["photo-well-media-scrappy-view"]?this.subviews["photo-well-media-scrappy-view"].get("container"):"","context-slider-view":this.subviews["context-slider-scrappy-view"]?this.subviews["context-slider-scrappy-view"].get("container"):"","is-hidden":!o&&!n,"prev-is-not-clickable":!o,"next-is-not-clickable":!n,"prev-url":o,"next-url":n,"prev-title":a,"next-title":r,"is-ad":this.isAd,"attribution-view":u,height:s,navHeight:h,entryURL:this.entryURL,backToLabel:this.intlMessage({intlName:"photo-page-scrappy."+this.entryTypeIntlKey}),enableZoom:!0,hideBackToLink:this.hideBackToLink}),this.fireSubviewResizeEvents(),YUI.Env.isServer&&(this.serverWidth=this.subviews["photo-well-media-scrappy-view"].serverWidth,this.serverHeight=this.subviews["photo-well-media-scrappy-view"].serverHeight),this},buildHeadContainer:function(){var e=this.templates("photo-page-right-size-express")({photoWidth:this.get("photo").getLargestSize().width,photoHeight:this.get("photo").getLargestSize().height});return this.set("headContainer",e),this},fireSubviewResizeEvents:function(){YUI.Env.isServer||(this.subviews["photo-well-media-scrappy-view"]&&this.subviews["photo-well-media-scrappy-view"].fire("parentViewEvent","photoWellResized"),this.subviews["photo-notes-scrappy-view"]&&this.subviews["photo-notes-scrappy-view"].fire("parentViewEvent","photoWellResized"))},setLinkAsAdFriendly:function(e){var t=e.currentTarget;t.hasClass("navigate-next")?this.appContext.adManager.setAdCouldBeShown(!0,"next",t.getAttribute("href")):this.appContext.adManager.setAdCouldBeShown(!0,"previous",t.getAttribute("href"))},animateNavigation:function(){var t=e.all(".navigate-target"),i=this.get("container"),o=i.one(".photo-sidebar-toggle-view"),n=i.one(".attribution-view"),a=1500,r=!0,s=this;a=(a-500)/2,this.appContext.experiments.fullscreen.getMode(),this.registerEventHandler(this.get("container").on("mousemove",e.betterThrottle((function(e){t&&r&&t.removeClass("is-hidden"),r&&(o&&o.removeClass("is-hidden"),n&&n.removeClass("is-hidden")),clearTimeout(s.movingTimeout),clearTimeout(s.initialTimeout),r=!0,s.movingTimeout=setTimeout((function(){n&&n.addClass("is-hidden")}),2*a)}),250))),"photoList-models"!==this.contextData.modelName&&"explore-models"!==this.contextData.modelName&&(r=!1),s.initialTimeout=setTimeout((function(){(r=!0)&&n&&n.addClass("is-hidden")}),2*a)},activate:function(){var t,o,n,a,r,s=this,h=this.contextData,l=0,u=".navigate-prev",p=".navigate-next",d="right";if(!YUI.Env.isServer){o=e.getLocation(),n=o.protocol,a=o.host,s.appContext.getModel(h.modelName,h.params).then((function(e){s.set("contextModel",e)}),(function(t){if(!t.getModelFailure&&1!==t.code||"photostream-models"===h.modelName)throw e.one(u).hide(),e.one(p).hide(),t;return s.contextData.modelName="photostream-models",s.contextData.params.id=s.get("photo").getValue("owner").getValue("nsid"),s.appContext.getModel("photostream-models",s.contextData.params).then((function(e){s.set("contextModel",e)}))})).then((function(){var t,i,o,c,g,v,m=s.get("contextModel").getValue("photoContextList"),w=m.getList();return v=s.appContext.getReferrer(),w.length>2&&w.some((function(e){return l++,e.getValue("id")===s.photoId}))&&(i=w.slice(l-2,l-1),o=w.slice(l,l+1),i&&i.length>0&&(c=s.setupNavLink(i[0],u,"previous"))&&(t=s.get("container").one(u),s.updateNavLinks(t,n,a,c),s.get("container").one(u).removeClass("no-click"),s.get("container").one(u).on("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"clickprev",label:"arrow"},e.Snowplough.getPhotoContextFromModel(s.get("photo")))}))),o&&o.length>0&&(g=s.setupNavLink(o[0],p,"next"))&&(t=s.get("container").one(p),s.updateNavLinks(t,n,a,g),s.get("container").one(p).removeClass("no-click"),s.get("container").one(p).on("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"clicknext",label:"arrow"},e.Snowplough.getPhotoContextFromModel(s.get("photo")))})),t.getAttribute("href")&&t.getAttribute("href").indexOf(v)>-1&&(d="left"))),r=e.merge(h.params,{photoId:s.photoId,numNext:s.numberOfPositionsToPreFetch,numPrev:s.numberOfPositionsToPreFetch,refetchAt:s.numberOfPositionsToRefetchAt}),h.ownerId&&(r.ownerId=h.ownerId),m.getContext(r)})).then((function(e){function t(t,i,o){var r,h,l,u,p,d,c=s.get("container").one(t),g=e&&e[i]&&e[i].length;if(c)if(g||s.isAd){if(c.removeClass("no-click"),r=s.setupNavLink(e[i][0],t,i),s.isAd)i===(l=s.appContext.adManager.origin).arrow?(c.setAttribute("href",l.url),c.removeClass("is-hidden")):(c.setAttribute("href",r),c.removeClass("is-hidden"));else if(s.updateNavLinks(c,n,a,r),o)for(h=s.subviews["photo-well-media-scrappy-view"].getCanvasSize(),d=0;d<1&&e[i][d];d++)(u=e[i][d].getSizeToFit(h))&&u.url&&((p=new Image).src=u.url,p.complete&&(p.onloadFired=!0))}else c.remove()}s.appContext.adManager.updateContext({prev:e.previous[0],current:s.get("photo"),next:e.next[0],type:s.contextData.modelName,entryURL:s.entryURL}),t(p,"next","right"===d),t(u,"previous","left"===d),s.animateNavigation(),s.isAd&&s.appContext.adManager.markAdAsSeen()}),(function(e){if(e.notInContext||99===e.code)return s.get("contextModel").setValue("photoContextList",[]),s.contextData.modelName="photostream-models",s.contextData.params.id=s.get("photo").getValue("owner").getValue("nsid"),s.activate();throw e})).then(null,(function(e){i.warn("There was a problem initializing the next/previous controls.",{err:e})})),this.attachKeyEvent("down:37,75,39,74",s.handlePrevNextKeys.bind(s)),this.get("photo").getValue("isOwner")||this.appContext.getViewCounter().queue(this.get("photo").getValue("id"),this.publisherUrl||this.appContext.getReferrer());let t=this.get("container").one(".toggle");t&&this.registerEventHandler(t.on("click",(()=>{e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"openLightboxClick"},e.Snowplough.getPhotoContextFromModel(this.get("photo")))})))}return t={":ad":s.setLinkAsAdFriendly},this.hideBackToLink||this.attachKeyEvent("down:66",(function(t){t.preventDefault(),e.rapidTracker.beacon(s.name,"backToContextKeyPress"),s.appContext.flapp.hasRoute(s.entryURL)?s.appContext.flapp.navigate(s.entryURL):e.config.win.location.href=s.entryURL})),this.registerEventHandler(e.on("resize",e.betterThrottle((function(e){s.set("canvasSizeIsDirty",!0),s.buildContainer()}),16))),this.fireSubviewResizeEvents(),this.attachEvents(t),this},getPhotoWellHeight:function(){var e,t=this.appContext.viewportData.getWidth(),i=this.appContext.viewportData.getHeight()-50,o=120,n=t/2.3+o,a=t/2.75;return e=i>t/1+o?t/1:i>n?i-o:i>a?i-o+o*(i-n)/(a-n):i,Math.max(500,Math.round(e))},getActualPhotoWellHeight:function(){return this.get("container").one(".height-controller").get("region").height},setupNavLink:function(t,o,n){var a,r,s=this.get("container").one(o);if(!this.isAd&&!t)return void s.remove();a=t;let h=this.contextData&&this.contextData.params&&this.contextData.params.contextSuffix?this.contextData.params.contextSuffix:this.get("contextModel").getValue("urlSuffix");return(r=e.URLHelper.getPhotoPage({photoId:a.getValue("id"),pathAlias:a.getValue("owner").getValue("pathAlias"),contextSuffix:h}))&&"#"!==r?r:(i.warn("Invalid next/prev URL",{url:r}),void s.remove())},setupNavTitle:function(e){var t;return e.getValue("owner")&&(t=""===e.getValue("title").trim()?this.intlMessage({intlName:"common.UNTITLED"}):e.getValue("title"),t+=" | "+this.intlMessage({intlName:"common.BY_USER",user:e.getValue("owner").getValue("username")})),t},updateNavLinks:function(e,t,i,o){e.setAttribute("href",t+"//"+i+o),e.removeClass("is-hidden")},destructor:function(){clearTimeout(this.movingTimeout),clearTimeout(this.initialTimeout),clearTimeout(this.adTimeout),this.adTimeout=null,this.movingTimeout=null,this.initialTimeout=null},handlePrevNextKeys:function(t){var o,n,a,r=this;this.adNavKeyLock||(37===t.button||75===t.button?(n=".navigate-prev",a="previous",e.rapidTracker.beacon(this.name,"prevPhotoKeyPress")):39!==t.button&&74!==t.button||(n=".navigate-next",a="next",e.rapidTracker.beacon(this.name,"nextPhotoKeyPress")),n&&r.get("container").one(n)&&(t.preventDefault(),(o=r.get("container").one(n).getAttribute("href"))&&"#"!==o&&(r.keyboardNavigation&&r.keyboardNavigation.url&&o===r.keyboardNavigation.url&&(new Date).getTime()-r.keyboardNavigation.time<50?i.log("Ignoring duplicate keyboard navigation",{url:o}):(r.keyboardNavigation={url:o,time:(new Date).getTime()},this.appContext.adManager.setAdCouldBeShown(!0,a,o),r.appContext.flapp.navigate(o),e.Snowplough.sendStructuredEvent({category:"photopageinteractions",action:"keyboard",label:a},e.Snowplough.getPhotoContextFromModel(r.get("photo")))))))},handleContextMenu:function(e){e.preventDefault(),this.fire("parentViewEvent","rightClickPhoto")},onSubviewEvent:function(t,i){if(i&&"photoWellResized"===i[0])this.fire("parentViewEvent","photoWellResized");else if(i&&"adPageTimeoutStart"===i[0]){var o=this.get("container").all(".context-slider"),n=this.get("container").all(".navigate-target");o&&n&&(o.addClass("navad-timer"),n.addClass("navad-timer")),this.adNavKeyLock=!0,this.adCountdown(e.config.flickr.moola.positions.interstitials[0].ad_timer_start_value,o,n)}},adCountdown:function(e,t,i){var o=this,n=this.get("container").one(".navad-timer-text");this.adTimeout=setTimeout((function(){var a=o.intlMessage({intlName:"common.AD_INTERSTITIAL_TIMER",adTimerStartCount:e.toString()});n.set("innerHTML",a),e>=1?(e-=1,o.adCountdown(e,t,i)):(t.removeClass("navad-timer"),i.removeClass("navad-timer"),n.set("innerHTML",""),o.adNavKeyLock=!1,clearTimeout(this.adTimeout))}),1e3)}})}),"@VERSION@",{requires:["yui-throttle","flickr-view","hermes-template-photo-well-scrappy","url-helper","better-throttle","hermes-template-photo-page-right-size-express"],optionalRequires:["hermes-core"],optional:["photo-well-media-scrappy-view","context-slider-scrappy-view","photo-engagement-view","photo-models","photo-route"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-mobile-photo-well",(function(n,e){var l=n.Template.Handlebars.revive({1:function(n,e,l,t,a){return"is-video"},3:function(n,e,l,t,a){var o,i=null!=e?e:n.nullContext||{},s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t<div class="restricted-interstitial">\n\t\t<div class="restricted-interstitial-message">\n\t\t\t<h2>'+n.escapeExpression((s(l,"intlMessage")||e&&s(e,"intlMessage")||n.hooks.helperMissing).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.ADULT_CONTENT"},data:a,loc:{start:{line:10,column:7},end:{line:10,column:66}}}))+"</h2>\n"+(null!=(o=s(l,"if").call(i,null!=e?s(e,"isSignedIn"):e,{name:"if",hash:{},fn:n.program(4,a,0),inverse:n.program(7,a,0),data:a,loc:{start:{line:11,column:3},end:{line:20,column:10}}}))?o:"")+"\t\t</div>\n\t</div>\n"},4:function(n,e,l,t,a){var o,i=null!=e?e:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression,c=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t\t<p>"+r((c(l,"intlMessage")||e&&c(e,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.MATURE_AUDIENCES"},data:a,loc:{start:{line:12,column:7},end:{line:12,column:69}}}))+"<br />"+r((c(l,"intlMessage")||e&&c(e,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.USER_DISCRETION"},data:a,loc:{start:{line:12,column:75},end:{line:12,column:136}}}))+"</p>\n\n"+(null!=(o=c(l,"unless").call(i,null!=e?c(e,"isMinor"):e,{name:"unless",hash:{},fn:n.program(5,a,0),inverse:n.noop,data:a,loc:{start:{line:14,column:4},end:{line:17,column:15}}}))?o:"")},5:function(n,e,l,t,a){var o=null!=e?e:n.nullContext||{},i=n.hooks.helperMissing,s=n.escapeExpression,r=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t\t\t<p><button class='ui-button'><span>"+s((r(l,"intlMessage")||e&&r(e,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SHOW_ME_THIS_CONTENT_TYPE"},data:a,loc:{start:{line:15,column:40},end:{line:15,column:111}}}))+"</span></button></p>\n\t\t\t\t\t<p>"+s((r(l,"intlHTMLMessage")||e&&r(e,"intlHTMLMessage")||i).call(o,{name:"intlHTMLMessage",hash:{intlName:"photo-page-scrappy.CHANGE_SAFE_SEARCH_IN_SETTINGS"},data:a,loc:{start:{line:16,column:8},end:{line:16,column:88}}}))+"</p>\n"},7:function(n,e,l,t,a){var o,i=null!=e?e:n.nullContext||{},s=n.hooks.helperMissing,r=n.escapeExpression,c=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\t\t\t\t<p>"+r((c(l,"intlMessage")||e&&c(e,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"photo-page-scrappy.SIGNED_IN_FOR_CONTENT"},data:a,loc:{start:{line:19,column:7},end:{line:19,column:74}}}))+' <a href="//'+r("function"==typeof(o=null!=(o=c(l,"host")||(null!=e?c(e,"host"):e))?o:s)?o.call(i,{name:"host",hash:{},data:a,loc:{start:{line:19,column:86},end:{line:19,column:94}}}):o)+'/signin/" data-track="photoWellSignInClick">'+r((c(l,"intlMessage")||e&&c(e,"intlMessage")||s).call(i,{name:"intlMessage",hash:{intlName:"common.SIGN_IN"},data:a,loc:{start:{line:19,column:138},end:{line:19,column:179}}}))+"</a></p>\n"},9:function(n,e,l,t,a){var o,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return"\n"+(null!=(o=i(l,"if").call(null!=e?e:n.nullContext||{},null!=e?i(e,"isVideo"):e,{name:"if",hash:{},fn:n.program(10,a,0),inverse:n.program(13,a,0),data:a,loc:{start:{line:25,column:1},end:{line:46,column:8}}}))?o:"")},10:function(n,e,l,t,a){var o,i,s=null!=e?e:n.nullContext||{},r=n.hooks.helperMissing,c="function",u=n.escapeExpression,p=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<div class="videoplayer main-image-wrapper">\n\t\t\t<video id="video_1" poster="'+u(typeof(i=null!=(i=p(l,"url")||(null!=e?p(e,"url"):e))?i:r)===c?i.call(s,{name:"url",hash:{},data:a,loc:{start:{line:27,column:31},end:{line:27,column:38}}}):i)+'" class="video-js vjs-big-play-centered inherit-size main-image" style="'+(null!=(o=p(l,"if").call(s,null!=e?p(e,"isServer"):e,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:27,column:110},end:{line:27,column:145}}}))?o:"")+" max-width: 100%; max-height: "+u(typeof(i=null!=(i=p(l,"maxHeight")||(null!=e?p(e,"maxHeight"):e))?i:r)===c?i.call(s,{name:"maxHeight",hash:{},data:a,loc:{start:{line:27,column:175},end:{line:27,column:188}}}):i)+'px;"></video>\n\t\t</div>\n'},11:function(n,e,l,t,a){return"width: 100%;"},13:function(n,e,l,t,a){var o,i,s=null!=e?e:n.nullContext||{},r=n.hooks.helperMissing,c="function",u=n.escapeExpression,p=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'\t\t<div class="main-image-wrapper" '+(null!=(o=p(l,"if").call(s,null!=e?p(e,"isServer"):e,{name:"if",hash:{},fn:n.program(14,a,0),inverse:n.noop,data:a,loc:{start:{line:30,column:34},end:{line:30,column:94}}}))?o:"")+'>\n\t\t\t<img class="main-image img" style="'+(null!=(o=p(l,"if").call(s,null!=e?p(e,"isServer"):e,{name:"if",hash:{},fn:n.program(11,a,0),inverse:n.noop,data:a,loc:{start:{line:31,column:38},end:{line:31,column:73}}}))?o:"")+' max-width: 100%;" src="'+u(typeof(i=null!=(i=p(l,"url")||(null!=e?p(e,"url"):e))?i:r)===c?i.call(s,{name:"url",hash:{},data:a,loc:{start:{line:31,column:97},end:{line:31,column:104}}}):i)+'"/>\n\t\t\t<script nonce="'+u(typeof(i=null!=(i=p(l,"cspNonce")||(null!=e?p(e,"cspNonce"):e))?i:r)===c?i.call(s,{name:"cspNonce",hash:{},data:a,loc:{start:{line:32,column:18},end:{line:32,column:30}}}):i)+'">\n\t\t\tvar img = document.querySelector(\'.mobile-photo-well-view .main-image\');\n\t\t\timg.onload = function () { registerFirstPhoto(img); };\n\t\t\t<\/script>\n\t\t</div>\n\t\t<div class="main-image-wrapper-underlay"></div>\n\t\t<script nonce="'+u(typeof(i=null!=(i=p(l,"cspNonce")||(null!=e?p(e,"cspNonce"):e))?i:r)===c?i.call(s,{name:"cspNonce",hash:{},data:a,loc:{start:{line:38,column:17},end:{line:38,column:29}}}):i)+'">\n\t\tvar windowWidth = window.innerWidth;\n\t\tvar aspect = '+u(typeof(i=null!=(i=p(l,"loadAspect")||(null!=e?p(e,"loadAspect"):e))?i:r)===c?i.call(s,{name:"loadAspect",hash:{},data:a,loc:{start:{line:40,column:15},end:{line:40,column:29}}}):i)+";\n\n\t\tif (aspect) {\n\t\t\tdocument.getElementsByClassName('main-image')[0].style.height = (windowWidth * aspect) + 'px';\n\t\t}\n\t\t<\/script>\n"},14:function(n,e,l,t,a){var o,i=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'style="max-height: '+n.escapeExpression("function"==typeof(o=null!=(o=i(l,"loadHeight")||(null!=e?i(e,"loadHeight"):e))?o:n.hooks.helperMissing)?o.call(null!=e?e:n.nullContext||{},{name:"loadHeight",hash:{},data:a,loc:{start:{line:30,column:69},end:{line:30,column:83}}}):o)+'px;"'},compiler:[8,">= 4.3.0"],main:function(n,e,l,t,a){var o,i=null!=e?e:n.nullContext||{},s=n.lookupProperty||function(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]};return'<a class="loading hide-nav-link prev-photo photo-link '+(null!=(o=s(l,"if").call(i,null!=e?s(e,"isVideo"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:1,column:54},end:{line:1,column:84}}}))?o:"")+'" href="#">\n\t<div class="arrow-overlay arrow-left">\n\t\t<svg class="tiny icon icon-nav_left prev-photo-icon"><use xlink:href="#icon-nav_left"></use></svg>\n\t</div>\n</a>\n\n'+(null!=(o=s(l,"if").call(i,null!=e?s(e,"needsInterstitial"):e,{name:"if",hash:{},fn:n.program(3,a,0),inverse:n.program(9,a,0),data:a,loc:{start:{line:7,column:0},end:{line:47,column:7}}}))?o:"")+'\n<a class="loading hide-nav-link next-photo photo-link '+(null!=(o=s(l,"if").call(i,null!=e?s(e,"isVideo"):e,{name:"if",hash:{},fn:n.program(1,a,0),inverse:n.noop,data:a,loc:{start:{line:49,column:54},end:{line:49,column:84}}}))?o:"")+'" href="#">\n\t<div class="arrow-overlay arrow-right">\n\t\t<svg class="tiny icon icon-nav_right next-photo-icon"><use xlink:href="#icon-nav_right"></use></svg>\n\t</div>\n</a>\n'},useData:!0}),t={};n.Array.each([],(function(e){var l=n.Template.get("hermes/"+e);l&&(t[e]=l)})),n.Template.register("hermes/mobile-photo-well",(function(e,a){return(a=a||{}).partials=a.partials?n.merge(t,a.partials):t,l(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("matrix-math",(function(t){t.MatrixMath={iterate:function(r,n,i,e){var u,a,l=[],f=r.length,c=r[0].length;for(u=0;u<f;u++)if(l[u]=[],c)for(a=0;a<c;a++)t.Lang.isArray(n)?l[u][a]=i.call(e,r[u][a],n[u][a]):l[u][a]=i.call(e,r[u][a],n);else t.Lang.isArray(n)?l[u]=i.call(e,r[u],n[u]):l[u]=i.call(e,r[u],n);return l},add:function(t,r){return this.iterate(t,r,(function(t,r){return t+r}),this)},subtract:function(t,r){return this.iterate(t,r,(function(t,r){return t-r}),this)},divide:function(t,r){return this.iterate(t,r,(function(t,r){return t/r}))},multiply:function(t,r){return this.iterate(t,r,(function(t,r){return t*r}))},realMultiply:function(t,r){var n,i,e,u=[],a=t.length,l=t[0].length;for(n=0;n<a;n++)for(u[n]=[],i=0;i<l;i++)for(e=0;e<l;e++)u[n][i]+=t[n][e]*r[n][i];return u},equality:function(t,r){var n=!0;if(t.length!==r.length)return!1;try{this.iterate(t,r,(function(t,r){if(t!==r)return n=!1,0}))}catch(t){n=!1}return n}}}),"@VERSION@",{requires:[],optional:[]});YUI.add("mrpinchy",(function(t){var n=/matrix3d\(([^\)]+)\)/,e=t.MatrixMath;function o(t){var n=t.length,e=0,o=0,i=0;for(i=0;i<n;i++)o+=t[i].pageY,e+=t[i].pageX;return[e/n,o/n]}function i(i){var r,a,s,u,h,f,c,m=i.node,l=i.maxScale||10,p=i.minScale||.5,g=m.one(".img"),d=g.get("offsetWidth"),b=g.get("offsetHeight"),v=g.getXY(),y=1,w=[0,0],M=0,S=[0,0],k=1,z=0,x=!1,D=0,I=0,Y=new t.EventTarget,X="transform 0.25s ease-out",B=m.getStyle("transform");function H(){m&&(m.setStyles({"-webkit-transition":"-webkit-"+X,"-moz-transition":"-moz-"+X,"-o-transition":"-o-"+X,"-ms-transition":"-ms-"+X,transition:X}),P([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,1,1]],!0),m.setStyle("transform",B)),k=1,y=1}u=i.boundingBox?i.boundingBox:[[0,0],[window.innerWidth,window.innerHeight]],m&&m.setStyles({"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-o-transform-origin":"0 0","-ms-transform-origin":"0 0","transform-origin":"0 0"}),c=m,m&&m.on("webkitTransitionEnd",(function(){c.setStyles({"-webkit-transition":"","-moz-transition":"","-o-transition":"","-ms-transition":"",transition:""})}));var T={touchstart:function(t){if(P(O()),S=o(t.touches),w=S,S,1===t.touches.length?(z=Date.now(),M&&t.preventDefault()):(z=0,t.preventDefault()),2===t.touches.length){var n=Math.abs(t.touches[0].pageX-t.touches[1].pageX),e=Math.abs(t.touches[0].pageY-t.touches[1].pageY);a=Math.sqrt(n*n+e*e)}},touchmove:function(t){S=o(t.touches),M||1!==t.touches.length?2===t.touches.length&&(z=0,t.preventDefault(),(function(t){if(2===t.touches.length){M||Y.fire("mrpinchy:startpinch"),M=1;var n=t.scale;n||(n=(function(t){if(t.touches&&t.touches.length>1){var n=Math.abs(t.touches[0].pageX-t.touches[1].pageX),e=Math.abs(t.touches[0].pageY-t.touches[1].pageY);return Math.sqrt(n*n+e*e)/a}return 1})(t)),E(n,o(t.touches))}})(t)):1!==y&&(t.preventDefault(),(function(t){var n,o,i,r,a,s={top:0,right:0,bottom:0,left:0},h={top:0,right:0,bottom:0,left:0};if(!w)return;var c=S[0]-w[0],m=S[1]-w[1];u&&(n=j(),i=[d,b],o=e.multiply(i,y),r=e.add(n,o),a=e.divide(o,2),a=e.add(a,n),n[1]<u[0][1]&&(h.top=1),n[0]<u[0][0]&&(h.left=1),r[0]>u[1][0]&&(h.right=1),r[1]>u[1][1]&&(h.bottom=1));var l=O();if(h.left||h.right||!u){var p=parseInt(l[3][0],10)+Math.round(c);p&&(l[3][0]=p)}(h.bottom||h.top||!u)&&(l[3][1]=parseInt(l[3][1],10)+Math.round(m));P(l),w=S,f=null,n[1]>u[0][1]&&h.bottom&&(s.bottom=1);r[1]<u[1][1]&&h.top&&(s.top=1);n[0]>u[0][0]&&h.right&&(s.right=1);r[0]<u[1][0]&&h.left&&(s.left=1);s.bottom&&s.right?f=e.subtract(u[0],v):s.bottom&&s.left?f=e.subtract([u[1][0],u[0][1]],[Math.round((v[0]+d)*y),v[1]]):s.top&&s.right?f=[u[0][0]-v[0],u[1][1]-(v[1]+o[1])]:s.top&&s.left?f=[u[1][0]-(v[0]+o[0]),u[1][1]-(v[1]+o[1])]:s.right?f=[u[0][0]-v[0],parseInt(l[3][1],10)+Math.round(m)]:s.left?f=[Math.round(u[1][0]-v[0]-o[0]),parseInt(l[3][1],10)+Math.round(m)]:s.bottom?f=[parseInt(l[3][0],10)+Math.round(c),Math.round(u[0][1]-v[1])]:s.top&&(f=[parseInt(l[3][0],10)+Math.round(c),u[1][1]-(v[1]+o[1])])})()),R()},touchend:function(n){var e,o;n.touches.length<1&&1!==y?(n.preventDefault(),k=y,z?(Date.now()-z<100&&(!(function(n){D++,s&&s.cancel(),Date.now()-I>180?(D=1,s=t.later(200,this,(function(){Y.fire("mrpinchy:singletap",n)}))):2===D&&(H(),D=0,Y.fire("mrpinchy:doubletap"),Y.fire("mrpinchy:reset")),I=Date.now()})(n),z=0),z=0,f&&(m.setStyles({"-webkit-transition":"-webkit-"+X,"-moz-transition":"-moz-"+X,"-o-transition":"-o-"+X,"-ms-transition":"-ms-"+X,transition:X}),N(f),R(),f=null),Y.fire("mrpinchy:endmove")):k>l?(q(l,!0),N(h.translate),y=l,k=l,m.setStyles({"-webkit-transition":"-webkit-"+X,"-moz-transition":"-moz-"+X,"-o-transition":"-o-"+X,"-ms-transition":"-ms-"+X,transition:X}),R(),h=null):k<p&&(q(p,!0),N([0,0]),y=p,k=p,m.setStyles({"-webkit-transition":"-webkit-"+X,"-moz-transition":"-moz-"+X,"-o-transition":"-o-"+X,"-ms-transition":"-ms-"+X,transition:X}),R(),Y.fire("mrpinchy:reset",k),H(),h=null),Y.fire("mrpinchy:endpinch",k),M=0,e=O(),(o=[]).push([e[0][0],e[0][1]]),o.push([e[1][0],e[1][1]]),o.push([e[3][0],e[3][1]]),m&&m.setStyle("transform","matrix( "+o.join(",")+")")):1===y&&Y.fire("mrpinchy:endpinch",1)}};function q(t,n){var e,o=O();e=n?t:k*t,o[0][0]=e,o[1][1]=e,P(o,!0),y=e}function E(t,n,o){var i,r,a,s,u,f,c,m=k*t;i=j(),r=[n[0]-i[0],n[1]-i[1]],a=[d,b],s=e.multiply(a,y),u=e.multiply(a,m),f=e.subtract(u,s),N([(c=e.multiply(e.divide(r,u),f))[0],-c[1]],!0),q(t),(m>l&&!h||m<p&&!h)&&(h={scale:t,translate:[O()[3][0],O()[3][1]]})}function W(t){x||T[t.type](t)}function j(){return m.getXY()}function N(t,n){var e=O();n?(e[3][0]-=t[0],e[3][1]+=t[1]):(e[3][0]=t[0],e[3][1]=t[1]),P(e)}function O(){var t,e=[],o=[];if(r)return r;if(!(t=m.getStyle("transform")).match(n))return P([[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,1,1]],!0),r;o=t.match(n)[1].replace(/\s/g,"").split(",");for(var i,a=0,s=0;s<4;s++){i=[];for(var u=0;u<4;u++)i.push(o[a++]);e.push(i)}return r=e,e}function P(t,n){t&&4===t.length&&(r=t,n&&R())}function R(){var t=r;t&&m&&m.setStyle("transform","matrix3d("+t.join(",")+")")}return Y.getTouchHandler=function(){return W},Y.destroy=function(){m=null,x=!0},Y.updateBoundingBox=function(t){u=t},Y.updateImageSize=function(){d=g.get("offsetWidth"),b=g.get("offsetHeight")},Y.resetTransform=function(){H()},Y}t.MrPinchy={init:function(t){return new i(t)}}}),"@VERSION@",{requires:["matrix-math"],optional:[]});YUI.add("mobile-photo-well-view",(function(e,t){var i=require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("mobile-photo-well-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.photoId=t.photoId,this.context=e.clone(t.context,!0);var i=this.appContext.getUA().os;if(this.nsid=t.nsid,this.disablePinchZooming="windows"===i,this.isAndroid="android"===i,this.context&&this.context.params&&this.context.params.isSharedEntity){var o=this.context.params;this.appContext.setGPCredentials({gp_code:o.gpCode,gp_owner:o.gpOwner,share_code:o.gpCode})}else this.appContext.setGPCredentials(null);return this},loadState:function(){var t=this,i=[];return i.push(this.appContext.getModel("photo-models",this.photoId).then((function(i){if(t.set("photoModel",i),i.getValue("isVideo"))return new e.Promise((function(t,i){e.use("flickr-video-player",(function(){t()}))}))}))),e.Promise.all(i)},buildContainer:function(){var t,i,o,n,s,a,r=this.get("photoModel"),l=r.getValue("isVideo");if(YUI.Env.isServer)o=(t=500)/8,n=(i=500)/8;else{t=parseInt(e.StorageHelper.getItem("mobile-photo-well-width"),10),i=parseInt(e.StorageHelper.getItem("mobile-photo-well-height"),10);var h=this.getUsableAreaSize(),d=h.actualW,u=h.adjustedH;(!t||isNaN(t)||t<50)&&(t=d),(!i||isNaN(i)||i<50)&&(i=u),o=t,n=i}var p=r.getSizeToFit({width:o,height:n},{cropToFit:!0});return this.set("bestImageSize",p),s=Math.max(p.height/3,i),a=p.height/p.width,this.setContainerWithTemplate("mobile-photo-well",{maxHeight:s,isServer:YUI.Env.isServer,loadAspect:a,loadHeight:a*t,url:p.url,isVideo:l,needsInterstitial:r.getValue("needsInterstitial"),isSignedIn:this.appContext.getViewer().signedIn,isMinor:this.appContext.getViewer().isMinor}),this},activate:function(){var t=this.get("container"),i=t.one(".main-image"),o=t.one(".main-image-wrapper"),n=this.get("photoModel"),s=this.get("photoModel").getValue("isVideo"),a=this;if(t.all(".photo-link.loading").removeClass("loading"),this.appContext.getViewer().signedIn&&this.appContext.getModel("person-preferences-models",this.appContext.auth.user.nsid).then((function(e){a.set("personPreferences",e),a.get("photoModel").getValue("needsInterstitial")&&!this.appContext.getViewer().isMinor&&a.get("container").one(".restricted-interstitial-message button")&&a.registerEventHandler(a.get("container").one(".restricted-interstitial-message button").on("click",a.handleInterstitialDismissButtonClick,a))})),i&&(i.setStyle("width",null),o.setStyle("height",null)),this.findBestPhoto(n,i),this.appContext.getViewCounter().queue(this.get("photoModel").getValue("id"),this.appContext.getReferrer()),this.loadAdjacentPhotos(),o){var r=parseInt(o.getComputedStyle("height"),10);this.get("container").setStyle("height",r+"px"),o.setStyle("position","absolute")}return!s||n.getValue("isVideoPending")||n.getValue("isVideoFailed")||(a.player=new e.FlickrVideoPlayer({container:t.one(".videoplayer"),model:n,appContext:a.appContext,videoNode:t.one("#video_1")?t.one("#video_1")._node:null}),a.player.init(),a.on("destroy",(function(){a.player&&(a.player.destroy(),a.player=null)}))),s||this.disablePinchZooming||!o||this.addPinchy(),window.orientation&&this.registerEventHandler(e.on("orientationchange",(function(e){var t=window.innerWidth,i=window.innerHeight,o=t>i,n=[[0,0],[o?i:t,o?t:i]];a.transform.updateBoundingBox(n),a.transform.updateImageSize()}))),this.context&&this.context.modelName&&this.context.params&&this.appContext.getModel(this.context.modelName,this.context.params).then((function(e){if(e)return a.set("contextModel",e),e.getValue("photoContextList").getContext({photoId:a.photoId}).then((function(){var t=-1,i=e.getValue("photoContextList").getList();if(i.some((function(e,i){return e.id===a.photoId&&(t=i),t>0})),t>-1){var o,n,s,r,l="/in/"+e.getValue("urlSuffix");t>0&&(o=i[t-1])&&(s=o.getValue("url")+l),t<i.length-1&&(n=i[t+1])&&(r=n.getValue("url")+l),s&&a.get("container").one(".prev-photo").setAttribute("href",s).removeClass("hide-nav-link"),r&&a.get("container").one(".next-photo").setAttribute("href",r).removeClass("hide-nav-link")}}))})),this},addPinchy:function(){var t,i=window.innerWidth,o=window.innerHeight,n=i>o,s=this.get("container").one(".main-image-wrapper"),a=this.get("container").one(".main-image-wrapper-underlay"),r=[[0,0],[n?o:i,n?i:o]],l=this;this.transform=e.MrPinchy.init({node:s,maxScale:n?2:3,minScale:1,boundingBox:r}),t=this.transform.getTouchHandler(),this.largeLoaded=!1,s.on("touchstart",(function(i){t(i),1!==i.touches.length&&(l.largeLoaded||(l.largeLoaded=!0,l.findBestPhoto(l.get("photoModel"),s.one(".img"),!0,!0)),l.addZoomTimeout=setTimeout((function(){l.get("container").addClass("zoomed"),s.addClass("zoomed"),e.one("html").setStyle("maxWidth","100%"),e.one("html").setStyle("position","fixed"),a.setStyle("display","block"),setTimeout((function(){a.addClass("show-overlay")}),10)}),200))})),s.on("touchmove",t),s.on("touchend",t),s.on("touchcancel",(function(e){l.transform.resetTransform(),l.transform.fire("mrpinchy:reset")})),this.transform.on("mrpinchy:reset",(function(){clearTimeout(l.addZoomTimeout),l.get("container").removeClass("zoomed"),s.removeClass("zoomed"),e.one("html").setStyle("maxWidth",null),e.one("html").setStyle("position",null),a.removeClass("show-overlay"),setTimeout((function(){a.setStyle("display","none")}),800)})),this.transform.on("mrpinchy:endpinch",(function(t){1===t&&(clearTimeout(l.addZoomTimeout),l.get("container").removeClass("zoomed"),s.removeClass("zoomed"),e.one("html").setStyle("maxWidth",null),e.one("html").setStyle("position",null),a.removeClass("show-overlay"),setTimeout((function(){a.setStyle("display","none")}),800))}))},getUsableAreaSize:function(){var e=window.innerWidth,t=window.innerHeight;return{actualW:e,actualH:t,adjustedH:t-50-50}},findBestPhoto:function(t,i,o,n){var s=this.getUsableAreaSize(),a=s.actualW,r=s.adjustedH,l=t.getSizeToFit({width:o?3*a:a,height:o?3*r:r},{cropToFit:!0});(r=Math.min(a/l.width*l.height,s.adjustedH),a=Math.min(r/l.height*l.width,s.actualW),i)?(i.getAttribute("src")!==l.url&&i.setAttribute("src",l.url),this.set("bestImageSize",l),i.setStyle("width",a),i.setStyle("height",r),this.get("container").setStyle("height",r),YUI.Env.isServer||(e.StorageHelper.setItem("mobile-photo-well-width",s.actualW),e.StorageHelper.setItem("mobile-photo-well-height",s.adjustedH))):(new Image).src=l.url},loadAdjacentPhotos:function(){var e=this.get("prevPhoto"),t=this.get("nextPhoto");t&&this.findBestPhoto(t),e&&this.findBestPhoto(e)},handleInterstitialDismissButtonClick:function(e){var t=this,o=this.get("personPreferences"),n=this.get("photoModel"),s=n.getValue("safetyLevel");o.setValue("safeSearch",s),o.registry.remoteUpdate(t.appContext.auth.user.nsid).then((function(e){n.registry.attributeSearch({needsInterstitial:!0}).forEach((function(e){n.registry.getValue(e,"safetyLevel")<=o.getValue("safeSearch")&&n.registry.setValue(e,"needsInterstitial",!1)})),t.buildContainer(),t.activate()}),(function(e){i.error({err:e}),t.onError(t.intlMessage({intlName:"photo-page-scrappy.COULDNT_UPDATE_SETTINGS"}))}))}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-mobile-photo-well","viewport-data","storage-helper","mrpinchy"],optionalRequires:["hermes-core"],langBundles:["common","photo-page-scrappy"]});YUI.add("hermes-template-sub-photo",(function(t,e){var n=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,n,l,o){var a=null!=e?e:t.nullContext||{},r=t.hooks.helperMissing,s=t.escapeExpression,u=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="sub-photo-container centered-content">\n\t<div class="sub-photo-content-container">\n\t\t'+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-left-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:3,column:2},end:{line:3,column:32}}}))+"\n\t\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-right-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:4,column:2},end:{line:4,column:33}}}))+"\n\t</div>\n\n\t\n\t"+s((u(n,"outlet")||e&&u(e,"outlet")||r).call(a,null!=e?u(e,"sub-photo-keyboard-shortcuts-view"):e,{name:"outlet",hash:{},data:o,loc:{start:{line:8,column:1},end:{line:8,column:45}}}))+"\n</div>\n"},useData:!0}),l={};t.Array.each([],(function(e){var n=t.Template.get("hermes/"+e);n&&(l[e]=n)})),t.Template.register("hermes/sub-photo",(function(e,o){return(o=o||{}).partials=o.partials?t.merge(l,o.partials):l,n(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-sub-photo-left",(function(e,l){var t=e.Template.Handlebars.revive({1:function(e,l,t,n,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(t,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-liked-by-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:6,column:1},end:{line:6,column:35}}}))+"\n"},3:function(e,l,t,n,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(t,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-fave-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:8,column:1},end:{line:8,column:31}}}))+"\n"},5:function(e,l,t,n,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(t,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"photo-comments-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:12,column:1},end:{line:12,column:31}}}))+"\n"},7:function(e,l,t,n,o){var a=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return"\t"+e.escapeExpression((a(t,"outlet")||l&&a(l,"outlet")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},null!=l?a(l,"sub-photo-comments-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:14,column:1},end:{line:14,column:35}}}))+"\n"},compiler:[8,">= 4.3.0"],main:function(e,l,t,n,o){var a,u=null!=l?l:e.nullContext||{},r=e.hooks.helperMissing,i=e.escapeExpression,s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"attribution-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:1,column:0},end:{line:1,column:27}}}))+"\n"+i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"sub-photo-title-desc-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:2,column:0},end:{line:2,column:36}}}))+"\n"+i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"sub-photo-submoola-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:3,column:0},end:{line:3,column:34}}}))+"\n"+i((s(t,"outlet")||l&&s(l,"outlet")||r).call(u,null!=l?s(l,"gift-pro-view"):l,{name:"outlet",hash:{},data:o,loc:{start:{line:4,column:0},end:{line:4,column:24}}}))+"\n"+(null!=(a=(s(t,"isFlipped")||l&&s(l,"isFlipped")||r).call(u,"enable-likes",{name:"isFlipped",hash:{},fn:e.program(1,o,0),inverse:e.program(3,o,0),data:o,loc:{start:{line:5,column:0},end:{line:9,column:14}}}))?a:"")+"\n"+(null!=(a=(s(t,"isFlipped")||l&&s(l,"isFlipped")||r).call(u,"enable-photo-page-comments-component",{name:"isFlipped",hash:{},fn:e.program(5,o,0),inverse:e.program(7,o,0),data:o,loc:{start:{line:11,column:0},end:{line:15,column:14}}}))?a:"")},useData:!0}),n={};e.Array.each([],(function(l){var t=e.Template.get("hermes/"+l);t&&(n[l]=t)})),e.Template.register("hermes/sub-photo-left",(function(l,o){return(o=o||{}).partials=o.partials?e.merge(n,o.partials):n,t(l,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});